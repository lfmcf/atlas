import{r as j,j as e,c as a}from"./app-6e08d717.js";import{R as u,h as g,K as n,A as N}from"./AuthenticatedLayout-8acf847b.js";import"./MetronicSplashScreen-00e48f67.js";import"./MenuComponent-c9dbc718.js";import{w as y,S as v}from"./sweetalert2-react-content.es-e684bd9d.js";import{S as p}from"./StatusComponent-8520c978.js";import{D as f}from"./DeliveryMessage-4b907e84.js";const _=({data:l})=>{const[i,r]=j.useState({status:!1,id:"",form:""}),m=(t,s)=>{r({status:!i.status,id:t,form:s})},d=t=>{a.post(route("close-formatting"),{id:t})},o=t=>{a.get(route("formatting-verification"),{id:t})},h=t=>{a.get(route("show-formatting"),{id:t})},b=t=>{a.post(route("complete-formatting"),{id:t})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card mb-5",children:[e.jsx("div",{className:"card-header border-0 pt-5",children:e.jsx("h3",{className:"card-title align-items-start flex-column",children:e.jsx("span",{className:"card-label fw-bold fs-3 mb-1",children:"Formatting List"})})}),e.jsx("div",{className:"card-body py-3",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"fw-bold text-muted",children:[e.jsx("th",{className:"min-w-150px",children:"Product"}),e.jsx("th",{className:"min-w-140px",children:"Country"}),e.jsx("th",{className:"min-w-140px",children:"Sequence"}),e.jsx("th",{className:"min-w-130px",children:"Status"}),e.jsx("th",{className:"min-w-130px",children:"Dossier type"}),e.jsx("th",{className:"min-w-130px",children:"Request date"}),e.jsx("th",{className:"min-w-100px text-end",children:"Actions"})]})}),e.jsx("tbody",{children:l?Object.values(l).map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:t.product_name?t.product_name.value:""})}),e.jsx("td",{children:e.jsx(u,{countryCode:t.country.code,"aria-label":t.country.value,title:t.country.value,svg:!0,style:{width:"1.5em",height:"1.5em"}})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:"NA"})}),e.jsx("td",{children:e.jsx(p,{status:t.status})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:t.dossier_type?t.dossier_type.value:""})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:t.request_date?g(t.request_date).format("DD-MMM-YYYY"):""})}),e.jsx("td",{children:e.jsx("div",{className:"d-flex justify-content-end flex-shrink-0",children:t.status=="draft"?e.jsx("a",{href:"#",onClick:()=>a.get(route("formatting-initiate",{id:t._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"pencil",className:"fs-3"})}):t.status=="initiated"?e.jsx("a",{href:"#",onClick:()=>a.get(route("formatting-confirm",{id:t._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"pencil",className:"fs-3"})}):t.status=="submitted"?e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#",onClick:()=>a.post(route("progress-formatting",{id:t._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"check-circle",className:"fs-3"})}),e.jsx("a",{href:"#",onClick:()=>a.get(route("formatting-audit",{id:t._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"pencil",className:"fs-3"})})]}):t.status=="to verify"?e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#",onClick:()=>a.post(route("confirm-formatting-out",{id:t._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"check-circle",className:"fs-3"})}),e.jsx("a",{href:"#",onClick:()=>a.get(route("formatting-audit",{id:t._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"pencil",className:"fs-3"})})]}):t.status=="in progress"||t.status=="to correct"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(t._id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"eye",className:"fs-3"})}),e.jsx("a",{href:"#",onClick:()=>m(t._id,t.form),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_delivery_message",className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"check-circle",className:"fs-3"})})]}):t.status=="delivered"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>b(t._id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"check-circle",className:"fs-3"})}),e.jsx("button",{onClick:()=>o(t._id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"cross-circle",className:"fs-3"})})]}):t.status=="completed"?e.jsx("button",{onClick:()=>d(t._id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"check-circle",className:"fs-3"})}):""})})]},s)):""})]})})})]}),e.jsx(f,{show:i.status,id:i.id,form:i.form})]})},C=({data:l})=>{const[i,r]=j.useState({status:!1,id:"",form:""}),m=(s,c)=>{r({status:!i.status,id:s,form:c})},d=s=>{a.post(route("close-publishing"),{id:s})},o=s=>{a.get(route("publishing-verification"),{id:s})},h=(s,c,x)=>{c==="CH"?a.get(route("show-publishing-nat-ch"),{id:s}):c=="EU"&&x=="Mutual Recognition"||c=="EU"&&x=="Decentralized"?a.get(route("show-publishing-rmp"),{id:s}):a.get(route("show"),{id:s})},b=s=>{let c;return s==="Swissmedic"||s==null?c="CH":c=s.split("-")[0],c},t=s=>{a.post(route("complete-publishing"),{id:s})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card mb-5",children:[e.jsx("div",{className:"card-header border-0 pt-5",children:e.jsx("h3",{className:"card-title align-items-start flex-column",children:e.jsx("span",{className:"card-label fw-bold fs-3 mb-1",children:"Publishing List"})})}),e.jsx("div",{className:"card-body py-3",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"fw-bold text-muted",children:[e.jsx("th",{className:"min-w-150px",children:"Product"}),e.jsx("th",{className:"min-w-140px",children:"Country"}),e.jsx("th",{className:"min-w-140px",children:"Sequence"}),e.jsx("th",{className:"min-w-130px",children:"Status"}),e.jsx("th",{className:"min-w-130px",children:"Dossier type"}),e.jsx("th",{className:"min-w-130px",children:"Request date"}),e.jsx("th",{className:"min-w-100px text-end",children:"Actions"})]})}),e.jsx("tbody",{children:l?Object.values(l).map((s,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:typeof s.product_name=="object"&&s.product_name?s.product_name.value:s.product_name})}),e.jsx("td",{children:typeof s.country=="object"&&s.country?e.jsx(e.Fragment,{children:e.jsx(u,{countryCode:s.country.code,"aria-label":s.country.value,title:s.country.value,svg:!0,style:{width:"1.5em",height:"1.5em"}})}):e.jsx(u,{countryCode:b(s.agency_code),"aria-label":s.country,title:s.country,svg:!0,style:{width:"1.5em",height:"1.5em"}})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:s.sequence})}),e.jsx("td",{children:e.jsx(p,{status:s.status})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:s.dossier_type?s.dossier_type.value:""})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:s.request_date?g(s.request_date).format("DD-MMM-YYYY"):""})}),e.jsx("td",{children:e.jsx("div",{className:"d-flex justify-content-end flex-shrink-0",children:s.status=="draft"?e.jsx("a",{onClick:()=>a.get(route("publishing-initiate",{id:s._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"pencil",className:"fs-3"})}):s.status=="initiated"?e.jsx("a",{href:"#",onClick:()=>a.get(route("publishing-confirm",{id:s._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"pencil",className:"fs-3"})}):s.status=="submitted"?e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#",onClick:()=>a.post(route("progress-publishing",{id:s._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"check-circle",className:"fs-3"})}),e.jsx("a",{href:"#",onClick:()=>a.get(route("publishing-audit",{id:s._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"pencil",className:"fs-3"})})]}):s.status=="to verify"?e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#",onClick:()=>a.post(route("confirm-publishing-out",{id:s._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"check-circle",className:"fs-3"})}),e.jsx("a",{href:"#",onClick:()=>a.get(route("publishing-audit",{id:s._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"pencil",className:"fs-3"})})]}):s.status=="in progress"||s.status=="to correct"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(s._id,s.region,s.procedure),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"eye",className:"fs-3"})}),e.jsx("a",{href:"#",onClick:()=>m(s._id,s.form),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_delivery_message",className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"check-circle",className:"fs-3"})})]}):s.status=="delivered"&&s.region?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t(s._id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"check-circle",className:"fs-3"})}),e.jsx("button",{onClick:()=>o(s._id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"cross-circle",className:"fs-3"})})]}):s.status=="completed"?e.jsx("button",{onClick:()=>d(s._id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",children:e.jsx(n,{iconName:"check-circle",className:"fs-3"})}):""})})]},c)):""})]})})})]}),e.jsx(f,{show:i.status,id:i.id,form:i.form})]})},k=y(v),A=l=>{const{formatting:i,publishing:r}=l;return j.useEffect(()=>{l.flash.message&&k.fire({title:e.jsx("p",{children:"Done !"}),icon:"success",text:l.flash.message})}),e.jsxs(N,{auth:l.auth,children:[e.jsx(_,{data:i}),e.jsx(C,{data:r})]})};export{A as default};
