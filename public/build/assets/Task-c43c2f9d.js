import{j as e,r as l,h as i,a as Q}from"./app-dfff02f7.js";import{K as p,h as f,$,R as S,S as K,A as W}from"./AuthenticatedLayout-816c0d02.js";import"./MetronicSplashScreen-33ca22ee.js";import"./MenuComponent-3a060902.js";import"./jquery.dataTables-e0de7087.js";import{c as j}from"./hoist-non-react-statics.cjs-1d8f9095.js";import{S as J}from"./StatusComponent-cc8d72e3.js";import{D as X}from"./DeliveryMessage-16b650dd.js";import{w as G}from"./sweetalert2-react-content.es-91887214.js";import{T as Z,a as O}from"./Tabs-5de53d28.js";const w=a=>e.jsxs("div",{className:j("modal fade",a.show?"show":""),id:"kt_modal_date_consultation","aria-hidden":"true",style:{display:a.show?"block":"none"},children:[e.jsx("div",{className:"modal-dialog modal-dialog-centered mw-650px",children:e.jsxs("div",{className:"modal-content shadow-lg",children:[e.jsxs("div",{className:"modal-header pb-0 border-0 position-relative",children:[e.jsx("h1",{className:"modal-title fs-3 text-gray-800 w-100 text-center",children:"Consultation Details"}),e.jsx("div",{className:"btn btn-sm btn-icon btn-active-color-primary","data-bs-dismiss":"modal",children:e.jsx(p,{iconName:"cross",className:"fs-1"})})]}),e.jsxs("div",{className:"modal-body scroll-y px-10 py-8",children:[e.jsxs("div",{className:"card card-flush shadow-sm mb-7",children:[e.jsx("div",{className:"card-header pt-5",children:e.jsx("h3",{className:"card-title fw-bold text-gray-800",children:"Request Information"})}),e.jsx("div",{className:"card-body py-3",children:e.jsxs("div",{className:"d-flex flex-column gap-5",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"fw-semibold text-muted fs-6",children:"Request Date:"}),e.jsx("span",{className:"fw-bold fs-6 text-gray-800",children:f(a.request_date).format("DD MMM YYYY, hh:mm A")})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"fw-semibold text-muted fs-6",children:"Delivery Deadline:"}),e.jsx("span",{className:"fw-bold fs-6 text-gray-800",children:f(a.delivery_deadline).format("DD MMM YYYY, hh:mm A")})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"fw-semibold text-muted fs-6",children:"Operational Deadline:"}),e.jsx("span",{className:"fw-bold fs-6 text-gray-800",children:f(a.adjusted_deadline).format("DD MMM YYYY, hh:mm A")})]}),a.adjusted_deadline_car&&e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"fw-semibold text-muted fs-6",children:"Urgent Request Deadline:"}),e.jsx("span",{className:"fw-bold fs-6 text-gray-800",children:f(a.adjusted_deadline_car).format("DD MMM YYYY, hh:mm A")})]})]})})]}),e.jsx("div",{className:"d-flex justify-content-end gap-3 mt-5",children:e.jsx("button",{className:"btn btn-light-primary fw-bold","data-bs-dismiss":"modal",children:"Close"})})]})]})}),e.jsx("style",{children:`
                .backdrop {
                    background-color: rgba(0, 0, 0, 0.5);
                }
                .modal-content {
                    border-radius: 12px;
                }
                .card {
                    border-radius: 8px;
                    border: 1px solid #E4E6EF;
                }
            `})]}),k=G(K),ee=({data:a,handleconsultdate:g})=>{const[m,o]=l.useState({status:!1,id:"",form:""}),[h,u]=l.useState(1),[c,d]=l.useState(),[Y,q]=l.useState([]),[N,b]=l.useState(0),[x,I]=l.useState(10),M=l.useRef();l.useEffect(()=>{const s=$(M.current).DataTable({info:!1,order:[],pageLength:x});return b(s.page.info().pages),d(s),function(){s.destroy()}},[]),l.useEffect(()=>{let s=Array.from({length:N},(r,H)=>H+1);q(s)},[N]);const C=(s,r)=>{o({status:!m.status,id:s,form:r})},T=s=>{k.fire({title:'Click on "Yes" to close the request or click on "No, return"  to return to the list.',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, proceed!",cancelButtonText:"No, return"}).then(r=>{r.isConfirmed&&i.post(route("close-formatting"),{id:s})})},E=s=>{k.fire({title:'Click on "Yes" to accept the request or click on "No, return"  to return to the list.',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, proceed!",cancelButtonText:"No, return"}).then(r=>{r.isConfirmed&&i.post(route("accept-formatting"),{id:s})})},_=s=>{i.get(route("formatting-verification"),{id:s})},v=s=>{i.get(route("show-formatting"),{id:s})},U=s=>{k.fire({title:'Click on "Yes" to ACK the request or click on "No, return"  to return to the list.',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, proceed!",cancelButtonText:"No, return"}).then(r=>{r.isConfirmed&&i.post(route("progress-formatting",{id:s}))})},B=s=>{k.fire({title:'Click on "Yes" to complete the request or click on "No, return"  to return to the list.',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, proceed!",cancelButtonText:"No, return"}).then(r=>{r.isConfirmed&&i.post(route("complete-formatting"),{id:s})})},R=()=>{let s=c.page.info().page;u(s),c.page(s-1).draw("page")},F=()=>{let s=c.page.info().page+1;u(s+1),c.page(s).draw("page")},A=s=>{c.page.len(s.target.value).draw(),b(c.page.info().pages)},P=s=>{c.search(s.target.value).draw(),b(c.page.info().pages)},z=s=>{let r=s.target.value;r==="all"&&(r=""),c.column(3).search(r).draw("page"),b(c.page.info().pages)},L=s=>{u(s),c.page(s-1).draw("page")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"table-responsive",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-4 mb-5",children:[e.jsxs("div",{className:"d-flex align-items-center gap-4",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"text-muted fs-7 me-2",children:"Status"}),e.jsxs("select",{className:"form-select form-select-sm form-select-solid w-150px",onChange:z,children:[e.jsx("option",{value:"all",children:"Show All"}),e.jsx("option",{value:"initiated",children:"Initiated"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"to verify",children:"To verify"}),e.jsx("option",{value:"in progress",children:"In progress"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"to correct",children:"To correct"}),e.jsx("option",{value:"closed",children:"Closed"})]})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"text-muted fs-7 me-2",children:"Dossier Type"}),e.jsx("select",{className:"form-select form-select-sm form-select-solid w-150px",children:e.jsx("option",{children:"Show All"})})]})]}),e.jsxs("div",{className:"d-flex align-items-center position-relative",children:[e.jsx(p,{iconName:"magnifier",className:"fs-3 position-absolute ms-3"}),e.jsx("input",{type:"text",className:"form-control form-control-sm form-control-solid w-250px ps-10",placeholder:"Search...",onChange:P})]})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4",ref:M,children:[e.jsx("thead",{children:e.jsxs("tr",{className:"fw-bold text-muted",children:[e.jsx("th",{className:"min-w-150px",children:"Product"}),e.jsx("th",{className:"min-w-140px",children:"Country"}),e.jsx("th",{className:"min-w-140px",children:"Sequence"}),e.jsx("th",{className:"min-w-130px",children:"Status"}),e.jsx("th",{className:"min-w-130px",children:"Dossier type"}),e.jsx("th",{className:"min-w-130px",children:"Request date"}),e.jsx("th",{className:"min-w-130px",children:"Last update"}),e.jsx("th",{className:"min-w-100px text-end",children:"Actions"})]})}),e.jsx("tbody",{children:a?Object.values(a).map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:s.product_name?s.product_name.value:""})}),e.jsx("td",{children:s.country?e.jsx(S,{countryCode:s.country.code,"aria-label":s.country.value,title:s.country.value,svg:!0,style:{width:"1.5em",height:"1.5em"}}):""}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:"NA"})}),e.jsx("td",{children:e.jsx(J,{status:s.status})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:s.dossier_type?s.dossier_type.value:""})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:s.request_date?f(s.request_date).format("DD-MMM-YYYY"):""})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:s.request_date?f(s.updated_at).format("DD-MMM-YYYY"):""})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex justify-content-end flex-shrink-0",children:[e.jsx("a",{href:"#",onClick:()=>g(s),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_date_consultation",className:"btn btn-icon btn-sm me-1",title:"Consulte request dates",children:e.jsx("i",{className:"bi bi-calendar-check text-info fs-5"})}),e.jsx("a",{href:"#",className:"btn btn-icon btn-sm me-1 bg-light",onClick:()=>i.get("show-formatting",{id:s._id}),title:"View the request",children:e.jsx("i",{className:"bi bi-eye-fill text-info fs-5"})}),s.status=="draft"?e.jsx("a",{href:"#",onClick:()=>i.get(route("formatting-initiate",{id:s._id})),className:"btn btn-icon btn-sm me-1",title:"Update and Submit the form",style:{backgroundColor:"#f8f5ff"},children:e.jsx("i",{className:"bi bi-pencil-fill text-info fs-5"})}):s.status=="initiated"?e.jsx("a",{href:"#",onClick:()=>i.get(route("formatting-confirm",{id:s._id})),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#fff8dd"},children:e.jsx("i",{className:"bi bi-pencil-fill text-warning fs-5"})}):s.status=="submitted"?e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#",onClick:()=>U(s._id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",style:{backgroundColor:"#e8fff3"},children:e.jsx("i",{className:"bi bi-check text-success fs-5"})}),e.jsx("a",{href:"#",onClick:()=>i.get(route("formatting-audit",{id:s._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",style:{backgroundColor:"#fff8dd"},children:e.jsx("i",{className:"bi bi-pencil-fill text-warning fs-5"})})]}):s.status=="to verify"?e.jsx(e.Fragment,{children:e.jsx("a",{href:"#",onClick:()=>i.get(route("formatting-audit",{id:s._id})),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",style:{backgroundColor:"#fff5f8"},children:e.jsx("i",{className:"bi bi-eye text-danger fs-5"})})}):s.status=="in progress"||s.status=="to correct"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>v(s._id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",style:{backgroundColor:"#ffc700"},children:e.jsx("i",{className:"bi bi-eye text-white fs-5"})}),e.jsx("a",{href:"#",onClick:()=>C(s._id,s.form),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_delivery_message",className:"btn btn-icon btn-bg-success btn-active-color-primary btn-sm me-1",children:e.jsx("i",{className:"bi bi-check text-white fs-5"})})]}):s.status=="delivered"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>B(s._id),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#d1f7c4"},children:e.jsx("i",{className:"bi bi-check text-success fs-5"})}),e.jsx("button",{onClick:()=>_(s._id),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#f8d7da"},children:e.jsx("i",{className:"bi bi-x text-danger fs-5"})})]}):s.status=="completed"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>E(s._id),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#d1f7c4"},children:e.jsx("i",{className:"bi bi-check text-success fs-5"})}),e.jsx("button",{onClick:()=>_(s._id),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#f8d7da"},children:e.jsx("i",{className:"bi bi-x text-danger fs-5"})})]}):s.status=="accepted"?e.jsx("button",{onClick:()=>T(s._id),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#d1f7c4"},children:e.jsx("i",{className:"bi bi-check text-success fs-5"})}):s.status=="Correction Required"?e.jsx("button",{onClick:()=>_(s._id),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#f8d7da"},children:e.jsx("i",{className:"bi bi-x text-danger fs-5"})}):""]})})]},r)):""})]})}),e.jsxs("div",{className:"row paginate_row",children:[e.jsx("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start",children:e.jsx("div",{className:"dataTables_length",id:"kt_profile_overview_table_length",children:e.jsx("label",{children:e.jsxs("select",{name:"kt_profile_overview_table_length","aria-controls":"kt_profile_overview_table",className:"form-select form-select-sm form-select-solid",onChange:A,children:[e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",selected:!0,children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]})})})}),e.jsx("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:e.jsx("div",{className:"dataTables_paginate paging_simple_numbers",id:"kt_profile_overview_table_paginate",children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:j("paginate_button page-item previous",h===1?"disabled":""),id:"kt_profile_overview_table_previous",children:e.jsx("a",{href:"#","aria-controls":"kt_profile_overview_table",className:"page-link",onClick:R,children:e.jsx("i",{className:"previous"})})}),Y.map(s=>e.jsx("li",{className:h===s?"page-item active":"paginate_button page-item",children:e.jsxs("button",{onClick:()=>L(s),className:"page-link",children:[" ",s," "]})},s)),e.jsx("li",{className:j("paginate_button page-item next",h===N?"disabled":""),id:"kt_profile_overview_table_next",children:e.jsx("a",{href:"#","aria-controls":"kt_profile_overview_table",className:"page-link",onClick:F,children:e.jsx("i",{className:"next"})})})]})})})]}),e.jsx(X,{show:m.status,id:m.id,form:m.form})]})})},te=a=>{const[g,m]=l.useState(""),o=()=>{a.form=="Formatting"?i.post(route("diliver-formatting"),{id:a.id,comment:g}):i.post(route("deliver-publishing"),{id:a.id,comment:g})};return l.useEffect(()=>{m("")},[]),e.jsx("div",{className:j("modal fade",a.show?"show":""),id:"kt_modal_delivery_message_pub","aria-hidden":"true",style:{display:a.show?"block":"none"},children:e.jsx("div",{className:"modal-dialog mw-650px",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header pb-0 border-0 justify-content-end",children:e.jsx("div",{className:"btn btn-sm btn-icon btn-active-color-primary","data-bs-dismiss":"modal",children:e.jsx(p,{iconName:"cross",className:"fs-1"})})}),e.jsxs("div",{className:"modal-body scroll-y mx-5 mx-xl-18 pt-0 pb-15",children:[e.jsx("div",{className:"text-center mb-13",children:e.jsx("h1",{className:"mb-3",children:"Delivery Comment"})}),e.jsxs("form",{onSubmit:o,children:[e.jsx("label",{className:"form-label",children:"Comment"}),e.jsx("textarea",{rows:3,className:"form-control",onChange:h=>m(h.target.value)})]}),e.jsxs("div",{className:"d-flex mt-5 justify-content-end",children:[e.jsx("a",{href:"#","data-bs-dismiss":"modal",className:"btn btn-sm btn-light-primary me-3",children:"Cancel"}),e.jsx("button",{onClick:o,className:"btn btn-sm btn-primary","data-bs-dismiss":"modal",children:"Send"})]})]})]})})})},D=G(K),se=({data:a,currentUser:g,handleconsultdate:m})=>{const[o,h]=l.useState({status:!1,id:"",form:""}),[u,c]=l.useState(1),[d,Y]=l.useState(),[q,N]=l.useState([]),[b,x]=l.useState(0),[I,M]=l.useState(10),C=l.useRef();l.useEffect(()=>{const t=$(C.current).DataTable({info:!1,order:[],pageLength:I});return x(t.page.info().pages),Y(t),function(){t.destroy()}},[]),l.useEffect(()=>{let t=Array.from({length:b},(n,y)=>y+1);N(t)},[b]);const T=(t,n)=>{h({status:!o.status,id:t,form:n})},E=t=>{D.fire({title:'Click on "Yes" to close the request or click on "No, return"  to return to the list.',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, proceed!",cancelButtonText:"No, return"}).then(n=>{n.isConfirmed&&(t.region=="EU"&&t.procedure=="Nationale"||t.region=="EU"&&t.procedure=="Centralized"?i.post(route("close_eu_publishing"),{id:t._id}):t.region=="CH"?i.post(route("close_ch_publishing"),{id:t._id}):t.region=="GCC"?i.post(route("close_gcc_publishing"),{id:t._id}):i.post(route("close_rmp_publishing"),{id:t._id}))})},_=t=>{D.fire({title:'Click on "Yes" to accept the request or click on "No, return"  to return to the list.',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, proceed!",cancelButtonText:"No, return"}).then(n=>{n.isConfirmed&&(t.region=="EU"&&t.procedure=="Nationale"||t.region=="EU"&&t.procedure=="Centralized"?i.post(route("accept_eu_verification"),{id:t._id}):t.region=="CH"?i.post(route("accept_ch_verification"),{id:t._id}):t.region=="GCC"?i.post(route("accept_gcc_verification"),{id:t._id}):(t.region=="EU"&&t.procedure=="Mutual Recognition"||t.region=="EU"&&t.procedure=="Decentralized")&&i.post(route("accept-publishing"),{id:t._id}))})},v=t=>{t.region=="EU"&&t.procedure=="Nationale"||t.region=="EU"&&t.procedure=="Centralized"?i.get(route("publishing_eu_verification"),{id:t._id}):t.region=="CH"?i.get(route("publishing_ch_verify"),{id:t._id}):t.region=="GCC"?i.get(route("publishing_gcc_verify"),{id:t._id}):(t.region=="EU"&&t.procedure=="Mutual Recognition"||t.region=="EU"&&t.procedure=="Decentralized")&&i.get(route("publishing_rmp_verify"),{id:t._id})},U=t=>{D.fire({title:'Click on "Yes" to ACK the request or click on "No, return"  to return to the list.',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, proceed!",cancelButtonText:"No, return"}).then(n=>{n.isConfirmed&&i.post(route("progress-publishing",{id:t}))})},B=(t,n,y)=>{n==="CH"?i.get(route("show-publishing-nat-ch"),{id:t}):n=="EU"&&y=="Mutual Recognition"||n=="EU"&&y=="Decentralized"?i.get(route("show-publishing-rmp"),{id:t}):i.get(route("show_eu_publishing"),{id:t})},R=t=>{let n;return t==="Swissmedic"||t==null?n="CH":n=t.split("-")[0],n},F=t=>{D.fire({title:'Click on "Yes" to complete the request or click on "No, return"  to return to the list.',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, proceed!",cancelButtonText:"No, return"}).then(n=>{n.isConfirmed&&(t.region=="EU"&&t.procedure=="Nationale"||t.region=="EU"&&t.procedure=="Centralized"?i.post(route("complete_eu_publishing"),{id:t._id}):t.region=="CH"?i.post(route("complete_ch_publishing"),{id:t._id}):t.region=="GCC"?i.post(route("complete_gcc_publishing"),{id:t._id}):i.post(route("complete_rmp_publishing"),{id:t._id}))})},A=()=>{let t=d.page.info().page;c(t),d.page(t-1).draw("page")},P=()=>{let t=d.page.info().page+1;console.log(t),c(t+1),d.page(t).draw("page")},z=t=>{d.page.len(t.target.value).draw(),x(d.page.info().pages)},L=t=>{d.search(t.target.value).draw(),x(d.page.info().pages)},s=t=>{let n=t.target.value;n==="all"&&(n=""),d.column(3).search(n).draw("page"),x(d.page.info().pages)},r=t=>{c(t),d.page(t-1).draw("page")},H=t=>{t.region=="EU"&&t.procedure=="Nationale"?i.get(route("publishing_eu_confirm",{id:t._id})):t.region=="CH"?i.get(route("publishing_ch_confirm",{id:t._id})):t.region=="GCC"?i.get(route("publishing_gcc_confirm",{id:t._id})):(t.region=="EU"&&t.procedure=="Mutual Recognition"||t.region=="EU"&&t.procedure=="Decentralized"||t.region=="EU"&&t.procedure=="Centralized")&&i.get(route("publishing_confirm",{id:t._id}))},V=t=>{t.region=="EU"&&t.procedure=="Nationale"||t.region=="EU"&&t.procedure=="Centralized"?i.get(route("publishing_eu_audit",{id:t._id})):t.region=="CH"?i.get(route("publishing_ch_audit",{id:t._id})):t.region=="GCC"?i.get(route("publishing_gcc_audit",{id:t._id})):(t.region=="EU"&&t.procedure=="Mutual Recognition"||t.region=="EU"&&t.procedure=="Decentralized")&&i.get(route("publishing_audit",{id:t._id}))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"table-responsive",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-4 mb-5",children:[e.jsxs("div",{className:"d-flex align-items-center gap-4",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"text-muted fs-7 me-2",children:"Status"}),e.jsxs("select",{className:"form-select form-select-sm form-select-solid w-150px",onChange:s,children:[e.jsx("option",{value:"all",children:"Show All"}),e.jsx("option",{value:"initiated",children:"Initiated"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"to verify",children:"To verify"}),e.jsx("option",{value:"in progress",children:"In progress"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"to correct",children:"To correct"}),e.jsx("option",{value:"closed",children:"Closed"})]})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"text-muted fs-7 me-2",children:"Dossier Type"}),e.jsx("select",{className:"form-select form-select-sm form-select-solid w-150px",children:e.jsx("option",{children:"Show All"})})]})]}),e.jsxs("div",{className:"d-flex align-items-center position-relative",children:[e.jsx(p,{iconName:"magnifier",className:"fs-3 position-absolute ms-3"}),e.jsx("input",{type:"text",className:"form-control form-control-sm form-control-solid w-250px ps-10",placeholder:"Search...",onChange:L})]})]}),e.jsxs("div",{className:"table-container",children:[e.jsxs("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4",ref:C,children:[e.jsx("thead",{children:e.jsxs("tr",{className:"fw-bold text-muted",children:[e.jsx("th",{className:"min-w-150px",children:"Product"}),e.jsx("th",{className:"min-w-140px",children:"Country"}),e.jsx("th",{className:"min-w-140px",children:"Sequence"}),e.jsx("th",{className:"min-w-130px",children:"Status"}),e.jsx("th",{className:"min-w-130px",children:"Dossier type"}),e.jsx("th",{className:"min-w-130px",children:"Request date"}),e.jsx("th",{className:"min-w-130px",children:"Last update"}),e.jsx("th",{className:"min-w-100px text-end",children:"Actions"})]})}),e.jsx("tbody",{children:a?Object.values(a).map((t,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:typeof t.product_name=="object"&&t.product_name?t.product_name.value:t.product_name})}),e.jsx("td",{children:t.procedure=="Mutual Recognition"||t.procedure=="Decentralized"||t.procedure=="Centralized"?e.jsx(e.Fragment,{children:e.jsx(S,{countryCode:"EU","aria-label":"Europe",title:"Europe",svg:!0,style:{width:"1.5em",height:"1.5em"}})}):typeof t.country=="object"&&t.country?e.jsx(e.Fragment,{children:e.jsx(S,{countryCode:t.country.code,"aria-label":t.country.value,title:t.country.value,svg:!0,style:{width:"1.5em",height:"1.5em"}})}):e.jsx(S,{countryCode:R(t.agency_code),"aria-label":t.country,title:t.country,svg:!0,style:{width:"1.5em",height:"1.5em"}})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:t.sequence?t.sequence:t.mt?t.mt[0].sequence:""})}),e.jsx("td",{children:e.jsx(J,{status:t.status})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:t.dossier_type?t.dossier_type.value:""})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:t.request_date?f(t.request_date).format("DD-MMM-YYYY"):""})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:t.request_date?f(t.updated_at).format("DD-MMM-YYYY"):""})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex justify-content-end flex-shrink-0",children:[e.jsx("a",{href:"#",onClick:()=>m(t),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_date_consultation",className:"btn btn-icon btn-sm me-1",title:"Consulte request dates",children:e.jsx("i",{className:"bi bi-calendar-check text-info fs-5"})}),t.procedure=="Decentralized"||t.procedure=="Mutual Recognition"?e.jsx("a",{href:"#",onClick:()=>i.get("show-publishing-rmp",{id:t._id}),className:"btn btn-icon btn-sm me-1 bg-light",title:"View the request",children:e.jsx("i",{className:"bi bi-eye-fill text-info fs-5"})}):t.form=="Publishing"&&t.region=="CH"?e.jsx("a",{href:"#",onClick:()=>i.get("show-publishing-nat-ch",{id:t._id}),className:"btn btn-icon btn-sm me-1 bg-light",title:"View the request",children:e.jsx("i",{className:"bi bi-eye-fill text-info fs-5"})}):e.jsx("a",{href:"#",onClick:()=>i.get("show-publishing",{id:t._id}),className:"btn btn-icon btn-sm me-1 bg-light",title:"View the request",children:e.jsx("i",{className:"bi bi-eye-fill text-info fs-5"})}),t.status=="draft"?t.procedure=="Mutual Recognition"||t.procedure=="Decentralized"?e.jsx("a",{onClick:()=>i.get(route("publishing_initiate",{id:t._id})),className:"btn btn-icon btn-sm me-1",title:"Update and Submit the form",style:{backgroundColor:"#f8f5ff"},children:e.jsx("i",{className:"bi bi-pencil-fill text-info fs-5"})}):e.jsx("a",{onClick:()=>i.get(route("publishing-initiate",{id:t._id})),className:"btn btn-icon btn-sm me-1",title:"Update and Submit the form",style:{backgroundColor:"#f8f5ff"},children:e.jsx("i",{className:"bi bi-pencil-fill text-info fs-5"})}):t.status=="initiated"?e.jsx("a",{href:"#",onClick:()=>H(t),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#fff8dd"},children:e.jsx("i",{className:"bi bi-pencil-fill text-warning fs-5"})}):t.status=="submitted"?e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#",onClick:()=>U(t._id),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",style:{backgroundColor:"#e8fff3"},children:e.jsx("i",{className:"bi bi-check text-success fs-5"})}),e.jsx("a",{href:"#",onClick:()=>V(t),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",style:{backgroundColor:"#fff8dd"},children:e.jsx("i",{className:"bi bi-pencil-fill text-warning fs-5"})})]}):t.status=="to verify"?e.jsx(e.Fragment,{children:e.jsx("a",{href:"#",onClick:()=>V(t),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",style:{backgroundColor:"#fff5f8"},children:e.jsx("i",{className:"bi bi-eye text-danger fs-5"})})}):t.status=="in progress"||t.status=="to correct"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>B(t._id,t.region,t.procedure),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",style:{backgroundColor:"#ffc700"},children:e.jsx("i",{className:"bi bi-eye text-white fs-5"})}),e.jsx("a",{href:"#",onClick:()=>T(t._id,t.form),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_delivery_message_pub",className:"btn btn-icon btn-bg-success btn-active-color-primary btn-sm me-1",children:e.jsx("i",{className:"bi bi-check text-white fs-5"})})]}):t.status=="delivered"&&t.region?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F(t),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",style:{backgroundColor:"#d1f7c4"},children:e.jsx("i",{className:"bi bi-check text-success fs-5"})}),e.jsx("button",{onClick:()=>v(t),className:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",style:{backgroundColor:"#f8d7da"},children:e.jsx("i",{className:"bi bi-x text-danger fs-5"})})]}):t.status=="completed"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>_(t),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#d1f7c4"},children:e.jsx("i",{className:"bi bi-check text-success fs-5"})}),e.jsx("button",{onClick:()=>v(t),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#f8d7da"},children:e.jsx("i",{className:"bi bi-x text-danger fs-5"})})]}):t.status=="accepted"?e.jsx("button",{onClick:()=>E(t),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#d1f7c4"},children:e.jsx("i",{className:"bi bi-check text-success fs-5"})}):t.status=="Correction Required"?e.jsx("button",{onClick:()=>v(t),className:"btn btn-icon btn-sm me-1",style:{backgroundColor:"#f8d7da"},children:e.jsx("i",{className:"bi bi-x text-danger fs-5"})}):""]})})]},n)):""})]}),e.jsxs("div",{className:"row paginate_row",children:[e.jsx("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start",children:e.jsx("div",{className:"dataTables_length",id:"kt_profile_overview_table_length",children:e.jsx("label",{children:e.jsxs("select",{name:"kt_profile_overview_table_length","aria-controls":"kt_profile_overview_table",className:"form-select form-select-sm form-select-solid",onChange:z,children:[e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",selected:!0,children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]})})})}),e.jsx("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:e.jsx("div",{className:"dataTables_paginate paging_simple_numbers",id:"kt_profile_overview_table_paginate",children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:j("paginate_button page-item previous",u===1?"disabled":""),id:"kt_profile_overview_table_previous",children:e.jsx("a",{href:"#","aria-controls":"kt_profile_overview_table",className:"page-link",onClick:A,children:e.jsx("i",{className:"previous"})})}),q.map(t=>e.jsx("li",{className:u===t?"page-item active":"paginate_button page-item",children:e.jsxs("button",{onClick:()=>r(t),className:"page-link",children:[" ",t," "]})},t)),e.jsx("li",{className:j("paginate_button page-item next",u===b?"disabled":""),id:"kt_profile_overview_table_next",children:e.jsx("a",{href:"#","aria-controls":"kt_profile_overview_table",className:"page-link",onClick:P,children:e.jsx("i",{className:"next"})})})]})})})]})]}),e.jsx(te,{show:o.status,id:o.id,form:o.form})]})})},ie=G(K),ae=a=>{const{formatting:g,publishing:m}=a,[o,h]=l.useState({status:!1,requestDate:"",deliveryDeadline:"",adjustedDeadline:"",adjustedDeadlineCar:"",car_deadline:""});l.useEffect(()=>{a.flash.message&&ie.fire({title:e.jsx("p",{children:"Done !"}),icon:"success",text:a.flash.message})});const u=c=>{h({status:!o.status,requestDate:c.request_date,deliveryDeadline:c.delivery_deadline,adjustedDeadline:c.adjusted_deadline,adjustedDeadlineCar:c.adjusted_deadline_car,car_deadline:c.car_deadline})};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{title:"Tasks"}),e.jsxs(Z,{fill:!0,defaultActiveKey:"formatting",id:"task-tabs",className:"nav-line-tabs nav-stretch fs-5 fw-bold mb-5",children:[e.jsx(O,{eventKey:"formatting",title:e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(p,{iconName:"file-text",className:"me-2"}),"Formatting"]}),children:e.jsx(ee,{data:g,handleconsultdate:u})}),e.jsx(O,{eventKey:"publishing",title:e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(p,{iconName:"upload",className:"me-2"}),"Publishing"]}),children:e.jsx(se,{data:m,currentUser:a.auth.user.id,handleconsultdate:u})})]}),e.jsx(w,{show:o.status,request_date:o.requestDate,delivery_deadline:o.deliveryDeadline,adjusted_deadline:o.adjustedDeadline,adjusted_deadline_car:o.car_deadline?o.adjustedDeadlineCar:""})]})};ae.layout=a=>e.jsx(W,{children:a,auth:a.props.auth});export{ae as default};
