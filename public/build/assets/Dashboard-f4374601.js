var Uf=Object.defineProperty;var Vf=(s,e,t)=>e in s?Uf(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var H=(s,e,t)=>(Vf(s,typeof e!="symbol"?e+"":e,t),t);import{c as ut,g as os,e as ie,r as q,C as Wf,A as Yf,p as Xf,f as Kf,j as f,b as Fi,a as Qf,h as Zf}from"./app-6f7d7141.js";import{u as Jf,P as ep}from"./MetronicSplashScreen-4b7624e2.js";import{_ as tp,c as ip,a as sp,i as rp,d as np,h as $,A as op,R as Is,S as ap}from"./AuthenticatedLayout-53759603.js";import{w as lp}from"./sweetalert2-react-content.es-ef68042a.js";import{c as Wi,e as hp,D as tl,t as Xt,_ as wt}from"./en-c2c1dec0.js";import{g as G}from"./MenuComponent-28b7e148.js";import"./jquery.dataTables-dfcbbe06.js";import"./hoist-non-react-statics.cjs-1d8f9095.js";var Lc={},as={},qc={exports:{}};(function(s){function e(t){return t&&t.__esModule?t:{default:t}}s.exports=e,s.exports.__esModule=!0,s.exports.default=s.exports})(qc);var dp=qc.exports;const cp=ut(tp),up=ut(ip),fp=ut(sp);var js={exports:{}},il;function Gc(){return il||(il=1,function(s){function e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}s.exports=e,s.exports.__esModule=!0,s.exports.default=s.exports}(js)),js.exports}const pp=ut(rp);var Rs={exports:{}},Ms={exports:{}},sl;function mp(){return sl||(sl=1,function(s){function e(t){"@babel/helpers - typeof";return s.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},s.exports.__esModule=!0,s.exports.default=s.exports,e(t)}s.exports=e,s.exports.__esModule=!0,s.exports.default=s.exports}(Ms)),Ms.exports}var rl;function gp(){return rl||(rl=1,function(s){var e=mp().default,t=Gc();function r(n,o){if(o&&(e(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t(n)}s.exports=r,s.exports.__esModule=!0,s.exports.default=s.exports}(Rs)),Rs.exports}var Fs={exports:{}},nl;function vp(){return nl||(nl=1,function(s){function e(t){return s.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},s.exports.__esModule=!0,s.exports.default=s.exports,e(t)}s.exports=e,s.exports.__esModule=!0,s.exports.default=s.exports}(Fs)),Fs.exports}const bp=ut(np);var Hc={exports:{}};(function(s){s.exports=e;function e(r){if(r)return t(r)}function t(r){for(var n in e.prototype)r[n]=e.prototype[n];return r}e.prototype.on=e.prototype.addEventListener=function(r,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(n),this},e.prototype.once=function(r,n){function o(){this.off(r,o),n.apply(this,arguments)}return o.fn=n,this.on(r,o),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(r,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+r];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var a,l=0;l<o.length;l++)if(a=o[l],a===n||a.fn===n){o.splice(l,1);break}return o.length===0&&delete this._callbacks["$"+r],this},e.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),o=this._callbacks["$"+r],a=1;a<arguments.length;a++)n[a-1]=arguments[a];if(o){o=o.slice(0);for(var a=0,l=o.length;a<l;++a)o[a].apply(this,n)}return this},e.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},e.prototype.hasListeners=function(r){return!!this.listeners(r).length}})(Hc);var yp=Hc.exports;const fa=os(yp);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function xe(){return xe=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},xe.apply(this,arguments)}function ve(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}function Li(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}var Uo;typeof Object.assign!="function"?Uo=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(n!=null)for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t}:Uo=Object.assign;var at=Uo,ol=["","webkit","Moz","MS","ms","o"],_p=typeof document>"u"?{style:{}}:document.createElement("div"),xp="function",Ot=Math.round,lt=Math.abs,pa=Date.now;function ls(s,e){for(var t,r,n=e[0].toUpperCase()+e.slice(1),o=0;o<ol.length;){if(t=ol[o],r=t?t+n:e,r in s)return r;o++}}var Ae;typeof window>"u"?Ae={}:Ae=window;var Bc=ls(_p.style,"touchAction"),zc=Bc!==void 0;function wp(){if(!zc)return!1;var s={},e=Ae.CSS&&Ae.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return s[t]=e?Ae.CSS.supports("touch-action",t):!0}),s}var $c="compute",Uc="auto",Vo="manipulation",st="none",li="pan-x",hi="pan-y",qi=wp(),Cp=/mobile|tablet|ip(ad|hone|od)|android/i,Vc="ontouchstart"in Ae,Tp=ls(Ae,"PointerEvent")!==void 0,Sp=Vc&&Cp.test(navigator.userAgent),_i="touch",Dp="pen",ma="mouse",kp="kinect",Ep=25,re=1,ft=2,Q=4,oe=8,Qi=1,xi=2,wi=4,Ci=8,jt=16,ke=xi|wi,rt=Ci|jt,Wc=ke|rt,Yc=["x","y"],Zi=["clientX","clientY"];function Pe(s,e,t){var r;if(s)if(s.forEach)s.forEach(e,t);else if(s.length!==void 0)for(r=0;r<s.length;)e.call(t,s[r],r,s),r++;else for(r in s)s.hasOwnProperty(r)&&e.call(t,s[r],r,s)}function hs(s,e){return typeof s===xp?s.apply(e&&e[0]||void 0,e):s}function it(s,e){return s.indexOf(e)>-1}function Np(s){if(it(s,st))return st;var e=it(s,li),t=it(s,hi);return e&&t?st:e||t?e?li:hi:it(s,Vo)?Vo:Uc}var Xc=function(){function s(t,r){this.manager=t,this.set(r)}var e=s.prototype;return e.set=function(r){r===$c&&(r=this.compute()),zc&&this.manager.element.style&&qi[r]&&(this.manager.element.style[Bc]=r),this.actions=r.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var r=[];return Pe(this.manager.recognizers,function(n){hs(n.options.enable,[n])&&(r=r.concat(n.getTouchAction()))}),Np(r.join(" "))},e.preventDefaults=function(r){var n=r.srcEvent,o=r.offsetDirection;if(this.manager.session.prevented){n.preventDefault();return}var a=this.actions,l=it(a,st)&&!qi[st],h=it(a,hi)&&!qi[hi],d=it(a,li)&&!qi[li];if(l){var c=r.pointers.length===1,u=r.distance<2,p=r.deltaTime<250;if(c&&u&&p)return}if(!(d&&h)&&(l||h&&o&ke||d&&o&rt))return this.preventSrc(n)},e.preventSrc=function(r){this.manager.session.prevented=!0,r.preventDefault()},s}();function ga(s,e){for(;s;){if(s===e)return!0;s=s.parentNode}return!1}function Kc(s){var e=s.length;if(e===1)return{x:Ot(s[0].clientX),y:Ot(s[0].clientY)};for(var t=0,r=0,n=0;n<e;)t+=s[n].clientX,r+=s[n].clientY,n++;return{x:Ot(t/e),y:Ot(r/e)}}function al(s){for(var e=[],t=0;t<s.pointers.length;)e[t]={clientX:Ot(s.pointers[t].clientX),clientY:Ot(s.pointers[t].clientY)},t++;return{timeStamp:pa(),pointers:e,center:Kc(e),deltaX:s.deltaX,deltaY:s.deltaY}}function Ji(s,e,t){t||(t=Yc);var r=e[t[0]]-s[t[0]],n=e[t[1]]-s[t[1]];return Math.sqrt(r*r+n*n)}function Wo(s,e,t){t||(t=Yc);var r=e[t[0]]-s[t[0]],n=e[t[1]]-s[t[1]];return Math.atan2(n,r)*180/Math.PI}function Qc(s,e){return s===e?Qi:lt(s)>=lt(e)?s<0?xi:wi:e<0?Ci:jt}function Op(s,e){var t=e.center,r=s.offsetDelta||{},n=s.prevDelta||{},o=s.prevInput||{};(e.eventType===re||o.eventType===Q)&&(n=s.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=s.offsetDelta={x:t.x,y:t.y}),e.deltaX=n.x+(t.x-r.x),e.deltaY=n.y+(t.y-r.y)}function Zc(s,e,t){return{x:e/s||0,y:t/s||0}}function Ap(s,e){return Ji(e[0],e[1],Zi)/Ji(s[0],s[1],Zi)}function Pp(s,e){return Wo(e[1],e[0],Zi)+Wo(s[1],s[0],Zi)}function Ip(s,e){var t=s.lastInterval||e,r=e.timeStamp-t.timeStamp,n,o,a,l;if(e.eventType!==oe&&(r>Ep||t.velocity===void 0)){var h=e.deltaX-t.deltaX,d=e.deltaY-t.deltaY,c=Zc(r,h,d);o=c.x,a=c.y,n=lt(c.x)>lt(c.y)?c.x:c.y,l=Qc(h,d),s.lastInterval=e}else n=t.velocity,o=t.velocityX,a=t.velocityY,l=t.direction;e.velocity=n,e.velocityX=o,e.velocityY=a,e.direction=l}function jp(s,e){var t=s.session,r=e.pointers,n=r.length;t.firstInput||(t.firstInput=al(e)),n>1&&!t.firstMultiple?t.firstMultiple=al(e):n===1&&(t.firstMultiple=!1);var o=t.firstInput,a=t.firstMultiple,l=a?a.center:o.center,h=e.center=Kc(r);e.timeStamp=pa(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Wo(l,h),e.distance=Ji(l,h),Op(t,e),e.offsetDirection=Qc(e.deltaX,e.deltaY);var d=Zc(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=lt(d.x)>lt(d.y)?d.x:d.y,e.scale=a?Ap(a.pointers,r):1,e.rotation=a?Pp(a.pointers,r):0,e.maxPointers=t.prevInput?e.pointers.length>t.prevInput.maxPointers?e.pointers.length:t.prevInput.maxPointers:e.pointers.length,Ip(t,e);var c=s.element,u=e.srcEvent,p;u.composedPath?p=u.composedPath()[0]:u.path?p=u.path[0]:p=u.target,ga(p,c)&&(c=p),e.target=c}function Rp(s,e,t){var r=t.pointers.length,n=t.changedPointers.length,o=e&re&&r-n===0,a=e&(Q|oe)&&r-n===0;t.isFirst=!!o,t.isFinal=!!a,o&&(s.session={}),t.eventType=e,jp(s,t),s.emit("hammer.input",t),s.recognize(t),s.session.prevInput=t}function di(s){return s.trim().split(/\s+/g)}function ri(s,e,t){Pe(di(e),function(r){s.addEventListener(r,t,!1)})}function ni(s,e,t){Pe(di(e),function(r){s.removeEventListener(r,t,!1)})}function ll(s){var e=s.ownerDocument||s;return e.defaultView||e.parentWindow||window}var Ht=function(){function s(t,r){var n=this;this.manager=t,this.callback=r,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(o){hs(t.options.enable,[t])&&n.handler(o)},this.init()}var e=s.prototype;return e.handler=function(){},e.init=function(){this.evEl&&ri(this.element,this.evEl,this.domHandler),this.evTarget&&ri(this.target,this.evTarget,this.domHandler),this.evWin&&ri(ll(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&ni(this.element,this.evEl,this.domHandler),this.evTarget&&ni(this.target,this.evTarget,this.domHandler),this.evWin&&ni(ll(this.element),this.evWin,this.domHandler)},s}();function ht(s,e,t){if(s.indexOf&&!t)return s.indexOf(e);for(var r=0;r<s.length;){if(t&&s[r][t]==e||!t&&s[r]===e)return r;r++}return-1}var Mp={pointerdown:re,pointermove:ft,pointerup:Q,pointercancel:oe,pointerout:oe},Fp={2:_i,3:Dp,4:ma,5:kp},Jc="pointerdown",eu="pointermove pointerup pointercancel";Ae.MSPointerEvent&&!Ae.PointerEvent&&(Jc="MSPointerDown",eu="MSPointerMove MSPointerUp MSPointerCancel");var tu=function(s){ve(e,s);function e(){var r,n=e.prototype;return n.evEl=Jc,n.evWin=eu,r=s.apply(this,arguments)||this,r.store=r.manager.session.pointerEvents=[],r}var t=e.prototype;return t.handler=function(n){var o=this.store,a=!1,l=n.type.toLowerCase().replace("ms",""),h=Mp[l],d=Fp[n.pointerType]||n.pointerType,c=d===_i,u=ht(o,n.pointerId,"pointerId");h&re&&(n.button===0||c)?u<0&&(o.push(n),u=o.length-1):h&(Q|oe)&&(a=!0),!(u<0)&&(o[u]=n,this.callback(this.manager,h,{pointers:o,changedPointers:[n],pointerType:d,srcEvent:n}),a&&o.splice(u,1))},e}(Ht);function ci(s){return Array.prototype.slice.call(s,0)}function va(s,e,t){for(var r=[],n=[],o=0;o<s.length;){var a=e?s[o][e]:s[o];ht(n,a)<0&&r.push(s[o]),n[o]=a,o++}return t&&(e?r=r.sort(function(l,h){return l[e]>h[e]}):r=r.sort()),r}var Lp={touchstart:re,touchmove:ft,touchend:Q,touchcancel:oe},qp="touchstart touchmove touchend touchcancel",ba=function(s){ve(e,s);function e(){var r;return e.prototype.evTarget=qp,r=s.apply(this,arguments)||this,r.targetIds={},r}var t=e.prototype;return t.handler=function(n){var o=Lp[n.type],a=Gp.call(this,n,o);a&&this.callback(this.manager,o,{pointers:a[0],changedPointers:a[1],pointerType:_i,srcEvent:n})},e}(Ht);function Gp(s,e){var t=ci(s.touches),r=this.targetIds;if(e&(re|ft)&&t.length===1)return r[t[0].identifier]=!0,[t,t];var n,o,a=ci(s.changedTouches),l=[],h=this.target;if(o=t.filter(function(d){return ga(d.target,h)}),e===re)for(n=0;n<o.length;)r[o[n].identifier]=!0,n++;for(n=0;n<a.length;)r[a[n].identifier]&&l.push(a[n]),e&(Q|oe)&&delete r[a[n].identifier],n++;if(l.length)return[va(o.concat(l),"identifier",!0),l]}var Hp={mousedown:re,mousemove:ft,mouseup:Q},Bp="mousedown",zp="mousemove mouseup",ya=function(s){ve(e,s);function e(){var r,n=e.prototype;return n.evEl=Bp,n.evWin=zp,r=s.apply(this,arguments)||this,r.pressed=!1,r}var t=e.prototype;return t.handler=function(n){var o=Hp[n.type];o&re&&n.button===0&&(this.pressed=!0),o&ft&&n.which!==1&&(o=Q),this.pressed&&(o&Q&&(this.pressed=!1),this.callback(this.manager,o,{pointers:[n],changedPointers:[n],pointerType:ma,srcEvent:n}))},e}(Ht),$p=2500,hl=25;function dl(s){var e=s.changedPointers,t=e[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY},n=this.lastTouches;this.lastTouches.push(r);var o=function(){var l=n.indexOf(r);l>-1&&n.splice(l,1)};setTimeout(o,$p)}}function Up(s,e){s&re?(this.primaryTouch=e.changedPointers[0].identifier,dl.call(this,e)):s&(Q|oe)&&dl.call(this,e)}function Vp(s){for(var e=s.srcEvent.clientX,t=s.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var n=this.lastTouches[r],o=Math.abs(e-n.x),a=Math.abs(t-n.y);if(o<=hl&&a<=hl)return!0}return!1}var iu=function(){var s=function(e){ve(t,e);function t(n,o){var a;return a=e.call(this,n,o)||this,a.handler=function(l,h,d){var c=d.pointerType===_i,u=d.pointerType===ma;if(!(u&&d.sourceCapabilities&&d.sourceCapabilities.firesTouchEvents)){if(c)Up.call(Li(Li(a)),h,d);else if(u&&Vp.call(Li(Li(a)),d))return;a.callback(l,h,d)}},a.touch=new ba(a.manager,a.handler),a.mouse=new ya(a.manager,a.handler),a.primaryTouch=null,a.lastTouches=[],a}var r=t.prototype;return r.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Ht);return s}();function Wp(s){var e,t=s.options.inputClass;return t?e=t:Tp?e=tu:Sp?e=ba:Vc?e=iu:e=ya,new e(s,Rp)}function At(s,e,t){return Array.isArray(s)?(Pe(s,t[e],t),!0):!1}var Yi=1,ge=2,Rt=4,We=8,Ie=We,ui=16,Se=32,Yp=1;function Xp(){return Yp++}function Gi(s,e){var t=e.manager;return t?t.get(s):s}function cl(s){return s&ui?"cancel":s&We?"end":s&Rt?"move":s&ge?"start":""}var Ti=function(){function s(t){t===void 0&&(t={}),this.options=xe({enable:!0},t),this.id=Xp(),this.manager=null,this.state=Yi,this.simultaneous={},this.requireFail=[]}var e=s.prototype;return e.set=function(r){return at(this.options,r),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(r){if(At(r,"recognizeWith",this))return this;var n=this.simultaneous;return r=Gi(r,this),n[r.id]||(n[r.id]=r,r.recognizeWith(this)),this},e.dropRecognizeWith=function(r){return At(r,"dropRecognizeWith",this)?this:(r=Gi(r,this),delete this.simultaneous[r.id],this)},e.requireFailure=function(r){if(At(r,"requireFailure",this))return this;var n=this.requireFail;return r=Gi(r,this),ht(n,r)===-1&&(n.push(r),r.requireFailure(this)),this},e.dropRequireFailure=function(r){if(At(r,"dropRequireFailure",this))return this;r=Gi(r,this);var n=ht(this.requireFail,r);return n>-1&&this.requireFail.splice(n,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(r){return!!this.simultaneous[r.id]},e.emit=function(r){var n=this,o=this.state;function a(l){n.manager.emit(l,r)}o<We&&a(n.options.event+cl(o)),a(n.options.event),r.additionalEvent&&a(r.additionalEvent),o>=We&&a(n.options.event+cl(o))},e.tryEmit=function(r){if(this.canEmit())return this.emit(r);this.state=Se},e.canEmit=function(){for(var r=0;r<this.requireFail.length;){if(!(this.requireFail[r].state&(Se|Yi)))return!1;r++}return!0},e.recognize=function(r){var n=at({},r);if(!hs(this.options.enable,[this,n])){this.reset(),this.state=Se;return}this.state&(Ie|ui|Se)&&(this.state=Yi),this.state=this.process(n),this.state&(ge|Rt|We|ui)&&this.tryEmit(n)},e.process=function(r){},e.getTouchAction=function(){},e.reset=function(){},s}(),Yo=function(s){ve(e,s);function e(r){var n;return r===void 0&&(r={}),n=s.call(this,xe({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},r))||this,n.pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}var t=e.prototype;return t.getTouchAction=function(){return[Vo]},t.process=function(n){var o=this,a=this.options,l=n.pointers.length===a.pointers,h=n.distance<a.threshold,d=n.deltaTime<a.time;if(this.reset(),n.eventType&re&&this.count===0)return this.failTimeout();if(h&&d&&l){if(n.eventType!==Q)return this.failTimeout();var c=this.pTime?n.timeStamp-this.pTime<a.interval:!0,u=!this.pCenter||Ji(this.pCenter,n.center)<a.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,!u||!c?this.count=1:this.count+=1,this._input=n;var p=this.count%a.taps;if(p===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){o.state=Ie,o.tryEmit()},a.interval),ge):Ie}return Se},t.failTimeout=function(){var n=this;return this._timer=setTimeout(function(){n.state=Se},this.options.interval),Se},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===Ie&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Ti),Mt=function(s){ve(e,s);function e(r){return r===void 0&&(r={}),s.call(this,xe({pointers:1},r))||this}var t=e.prototype;return t.attrTest=function(n){var o=this.options.pointers;return o===0||n.pointers.length===o},t.process=function(n){var o=this.state,a=n.eventType,l=o&(ge|Rt),h=this.attrTest(n);return l&&(a&oe||!h)?o|ui:l||h?a&Q?o|We:o&ge?o|Rt:ge:Se},e}(Ti);function su(s){return s===jt?"down":s===Ci?"up":s===xi?"left":s===wi?"right":""}var _a=function(s){ve(e,s);function e(r){var n;return r===void 0&&(r={}),n=s.call(this,xe({event:"pan",threshold:10,pointers:1,direction:Wc},r))||this,n.pX=null,n.pY=null,n}var t=e.prototype;return t.getTouchAction=function(){var n=this.options.direction,o=[];return n&ke&&o.push(hi),n&rt&&o.push(li),o},t.directionTest=function(n){var o=this.options,a=!0,l=n.distance,h=n.direction,d=n.deltaX,c=n.deltaY;return h&o.direction||(o.direction&ke?(h=d===0?Qi:d<0?xi:wi,a=d!==this.pX,l=Math.abs(n.deltaX)):(h=c===0?Qi:c<0?Ci:jt,a=c!==this.pY,l=Math.abs(n.deltaY))),n.direction=h,a&&l>o.threshold&&h&o.direction},t.attrTest=function(n){return Mt.prototype.attrTest.call(this,n)&&(this.state&ge||!(this.state&ge)&&this.directionTest(n))},t.emit=function(n){this.pX=n.deltaX,this.pY=n.deltaY;var o=su(n.direction);o&&(n.additionalEvent=this.options.event+o),s.prototype.emit.call(this,n)},e}(Mt),ru=function(s){ve(e,s);function e(r){return r===void 0&&(r={}),s.call(this,xe({event:"swipe",threshold:10,velocity:.3,direction:ke|rt,pointers:1},r))||this}var t=e.prototype;return t.getTouchAction=function(){return _a.prototype.getTouchAction.call(this)},t.attrTest=function(n){var o=this.options.direction,a;return o&(ke|rt)?a=n.overallVelocity:o&ke?a=n.overallVelocityX:o&rt&&(a=n.overallVelocityY),s.prototype.attrTest.call(this,n)&&o&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers===this.options.pointers&&lt(a)>this.options.velocity&&n.eventType&Q},t.emit=function(n){var o=su(n.offsetDirection);o&&this.manager.emit(this.options.event+o,n),this.manager.emit(this.options.event,n)},e}(Mt),nu=function(s){ve(e,s);function e(r){return r===void 0&&(r={}),s.call(this,xe({event:"pinch",threshold:0,pointers:2},r))||this}var t=e.prototype;return t.getTouchAction=function(){return[st]},t.attrTest=function(n){return s.prototype.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&ge)},t.emit=function(n){if(n.scale!==1){var o=n.scale<1?"in":"out";n.additionalEvent=this.options.event+o}s.prototype.emit.call(this,n)},e}(Mt),ou=function(s){ve(e,s);function e(r){return r===void 0&&(r={}),s.call(this,xe({event:"rotate",threshold:0,pointers:2},r))||this}var t=e.prototype;return t.getTouchAction=function(){return[st]},t.attrTest=function(n){return s.prototype.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&ge)},e}(Mt),au=function(s){ve(e,s);function e(r){var n;return r===void 0&&(r={}),n=s.call(this,xe({event:"press",pointers:1,time:251,threshold:9},r))||this,n._timer=null,n._input=null,n}var t=e.prototype;return t.getTouchAction=function(){return[Uc]},t.process=function(n){var o=this,a=this.options,l=n.pointers.length===a.pointers,h=n.distance<a.threshold,d=n.deltaTime>a.time;if(this._input=n,!h||!l||n.eventType&(Q|oe)&&!d)this.reset();else if(n.eventType&re)this.reset(),this._timer=setTimeout(function(){o.state=Ie,o.tryEmit()},a.time);else if(n.eventType&Q)return Ie;return Se},t.reset=function(){clearTimeout(this._timer)},t.emit=function(n){this.state===Ie&&(n&&n.eventType&Q?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=pa(),this.manager.emit(this.options.event,this._input)))},e}(Ti),lu={domEvents:!1,touchAction:$c,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ul=[[ou,{enable:!1}],[nu,{enable:!1},["rotate"]],[ru,{direction:ke}],[_a,{direction:ke},["swipe"]],[Yo],[Yo,{event:"doubletap",taps:2},["tap"]],[au]],Kp=1,fl=2;function pl(s,e){var t=s.element;if(t.style){var r;Pe(s.options.cssProps,function(n,o){r=ls(t.style,o),e?(s.oldCssProps[r]=t.style[r],t.style[r]=n):t.style[r]=s.oldCssProps[r]||""}),e||(s.oldCssProps={})}}function Qp(s,e){var t=document.createEvent("Event");t.initEvent(s,!0,!0),t.gesture=e,e.target.dispatchEvent(t)}var ml=function(){function s(t,r){var n=this;this.options=at({},lu,r||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=Wp(this),this.touchAction=new Xc(this,this.options.touchAction),pl(this,!0),Pe(this.options.recognizers,function(o){var a=n.add(new o[0](o[1]));o[2]&&a.recognizeWith(o[2]),o[3]&&a.requireFailure(o[3])},this)}var e=s.prototype;return e.set=function(r){return at(this.options,r),r.touchAction&&this.touchAction.update(),r.inputTarget&&(this.input.destroy(),this.input.target=r.inputTarget,this.input.init()),this},e.stop=function(r){this.session.stopped=r?fl:Kp},e.recognize=function(r){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(r);var o,a=this.recognizers,l=n.curRecognizer;(!l||l&&l.state&Ie)&&(n.curRecognizer=null,l=null);for(var h=0;h<a.length;)o=a[h],n.stopped!==fl&&(!l||o===l||o.canRecognizeWith(l))?o.recognize(r):o.reset(),!l&&o.state&(ge|Rt|We)&&(n.curRecognizer=o,l=o),h++}},e.get=function(r){if(r instanceof Ti)return r;for(var n=this.recognizers,o=0;o<n.length;o++)if(n[o].options.event===r)return n[o];return null},e.add=function(r){if(At(r,"add",this))return this;var n=this.get(r.options.event);return n&&this.remove(n),this.recognizers.push(r),r.manager=this,this.touchAction.update(),r},e.remove=function(r){if(At(r,"remove",this))return this;var n=this.get(r);if(r){var o=this.recognizers,a=ht(o,n);a!==-1&&(o.splice(a,1),this.touchAction.update())}return this},e.on=function(r,n){if(r===void 0||n===void 0)return this;var o=this.handlers;return Pe(di(r),function(a){o[a]=o[a]||[],o[a].push(n)}),this},e.off=function(r,n){if(r===void 0)return this;var o=this.handlers;return Pe(di(r),function(a){n?o[a]&&o[a].splice(ht(o[a],n),1):delete o[a]}),this},e.emit=function(r,n){this.options.domEvents&&Qp(r,n);var o=this.handlers[r]&&this.handlers[r].slice();if(!(!o||!o.length)){n.type=r,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var a=0;a<o.length;)o[a](n),a++}},e.destroy=function(){this.element&&pl(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},s}(),Zp={touchstart:re,touchmove:ft,touchend:Q,touchcancel:oe},Jp="touchstart",em="touchstart touchmove touchend touchcancel",tm=function(s){ve(e,s);function e(){var r,n=e.prototype;return n.evTarget=Jp,n.evWin=em,r=s.apply(this,arguments)||this,r.started=!1,r}var t=e.prototype;return t.handler=function(n){var o=Zp[n.type];if(o===re&&(this.started=!0),!!this.started){var a=im.call(this,n,o);o&(Q|oe)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,o,{pointers:a[0],changedPointers:a[1],pointerType:_i,srcEvent:n})}},e}(Ht);function im(s,e){var t=ci(s.touches),r=ci(s.changedTouches);return e&(Q|oe)&&(t=va(t.concat(r),"identifier",!0)),[t,r]}function hu(s,e,t){var r="DEPRECATED METHOD: "+e+`
`+t+` AT 
`;return function(){var n=new Error("get-stack-trace"),o=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=window.console&&(window.console.warn||window.console.log);return a&&a.call(window.console,r,o),s.apply(this,arguments)}}var du=hu(function(s,e,t){for(var r=Object.keys(e),n=0;n<r.length;)(!t||t&&s[r[n]]===void 0)&&(s[r[n]]=e[r[n]]),n++;return s},"extend","Use `assign`."),sm=hu(function(s,e){return du(s,e,!0)},"merge","Use `assign`.");function rm(s,e,t){var r=e.prototype,n;n=s.prototype=Object.create(r),n.constructor=s,n._super=r,t&&at(n,t)}function gl(s,e){return function(){return s.apply(e,arguments)}}var cu=function(){var s=function(t,r){return r===void 0&&(r={}),new ml(t,xe({recognizers:ul.concat()},r))};return s.VERSION="2.0.17-rc",s.DIRECTION_ALL=Wc,s.DIRECTION_DOWN=jt,s.DIRECTION_LEFT=xi,s.DIRECTION_RIGHT=wi,s.DIRECTION_UP=Ci,s.DIRECTION_HORIZONTAL=ke,s.DIRECTION_VERTICAL=rt,s.DIRECTION_NONE=Qi,s.DIRECTION_DOWN=jt,s.INPUT_START=re,s.INPUT_MOVE=ft,s.INPUT_END=Q,s.INPUT_CANCEL=oe,s.STATE_POSSIBLE=Yi,s.STATE_BEGAN=ge,s.STATE_CHANGED=Rt,s.STATE_ENDED=We,s.STATE_RECOGNIZED=Ie,s.STATE_CANCELLED=ui,s.STATE_FAILED=Se,s.Manager=ml,s.Input=Ht,s.TouchAction=Xc,s.TouchInput=ba,s.MouseInput=ya,s.PointerEventInput=tu,s.TouchMouseInput=iu,s.SingleTouchInput=tm,s.Recognizer=Ti,s.AttrRecognizer=Mt,s.Tap=Yo,s.Pan=_a,s.Swipe=ru,s.Pinch=nu,s.Rotate=ou,s.Press=au,s.on=ri,s.off=ni,s.each=Pe,s.merge=sm,s.extend=du,s.bindFn=gl,s.assign=at,s.inherit=rm,s.bindFn=gl,s.prefixed=ls,s.toArray=ci,s.inArray=ht,s.uniqueArray=va,s.splitStr=di,s.boolOrFn=hs,s.hasParent=ga,s.addEventListeners=ri,s.removeEventListeners=ni,s.defaults=at({},lu,{preset:ul}),s}();cu.defaults;const uu=cu;/**
 * vis-util
 * https://github.com/visjs/vis-util
 *
 * utilitie collection for visjs
 *
 * @version 5.0.7
 * @date    2023-11-20T09:06:51.067Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */const ds=Symbol("DELETE");function fu(s,...e){return xa({},s,...e)}function xa(...s){const e=es(...s);return mu(e),e}function es(...s){if(s.length<2)return s[0];if(s.length>2)return es(xa(s[0],s[1]),...s.slice(2));const e=s[0],t=s[1];if(e instanceof Date&&t instanceof Date)return e.setTime(t.getTime()),e;for(const r of Reflect.ownKeys(t))Object.prototype.propertyIsEnumerable.call(t,r)&&(t[r]===ds?delete e[r]:e[r]!==null&&t[r]!==null&&typeof e[r]=="object"&&typeof t[r]=="object"&&!Array.isArray(e[r])&&!Array.isArray(t[r])?e[r]=es(e[r],t[r]):e[r]=pu(t[r]));return e}function pu(s){return Array.isArray(s)?s.map(e=>pu(e)):typeof s=="object"&&s!==null?s instanceof Date?new Date(s.getTime()):es({},s):s}function mu(s){for(const e of Object.keys(s))s[e]===ds?delete s[e]:typeof s[e]=="object"&&s[e]!==null&&mu(s[e])}function nm(...s){return om(s.length?s:[Date.now()])}function om(s){let[e,t,r]=am(s),n=1;const o=()=>{const a=2091639*e+n*23283064365386963e-26;return e=t,t=r,r=a-(n=a|0)};return o.uint32=()=>o()*4294967296,o.fract53=()=>o()+(o()*2097152|0)*11102230246251565e-32,o.algorithm="Alea",o.seed=s,o.version="0.9",o}function am(...s){const e=lm();let t=e(" "),r=e(" "),n=e(" ");for(let o=0;o<s.length;o++)t-=e(s[o]),t<0&&(t+=1),r-=e(s[o]),r<0&&(r+=1),n-=e(s[o]),n<0&&(n+=1);return[t,r,n]}function lm(){let s=4022871197;return function(e){const t=e.toString();for(let r=0;r<t.length;r++){s+=t.charCodeAt(r);let n=.02519603282416938*s;s=n>>>0,n-=s,n*=s,s=n>>>0,n-=s,s+=n*4294967296}return(s>>>0)*23283064365386963e-26}}function hm(){const s=()=>{};return{on:s,off:s,destroy:s,emit:s,get(){return{set:s}}}}const wa=typeof window<"u"?window.Hammer||uu:function(){return hm()};function De(s){this._cleanupQueue=[],this.active=!1,this._dom={container:s,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const e=wa(this._dom.overlay);e.on("tap",this._onTapOverlay.bind(this)),this._cleanupQueue.push(()=>{e.destroy()}),["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(r=>{e.on(r,n=>{n.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=r=>{dm(r.target,s)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=r=>{("key"in r?r.key==="Escape":r.keyCode===27)&&this.deactivate()}}fa(De.prototype);De.current=null;De.prototype.destroy=function(){this.deactivate();for(const s of this._cleanupQueue.splice(0).reverse())s()};De.prototype.activate=function(){De.current&&De.current.deactivate(),De.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};De.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};De.prototype._onTapOverlay=function(s){this.activate(),s.srcEvent.stopPropagation()};function dm(s,e){for(;s;){if(s===e)return!0;s=s.parentNode}return!1}const cm=/^\/?Date\((-?\d+)/i,um=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,fm=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,pm=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,mm=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function oi(s){return s instanceof Number||typeof s=="number"}function gu(s){if(s)for(;s.hasChildNodes()===!0;){const e=s.firstChild;e&&(gu(e),s.removeChild(e))}}function de(s){return s instanceof String||typeof s=="string"}function Xo(s){return typeof s=="object"&&s!==null}function gm(s){if(s instanceof Date)return!0;if(de(s)){if(cm.exec(s))return!0;if(!isNaN(Date.parse(s)))return!0}return!1}function dt(s,e,t,r){let n=!1;r===!0&&(n=e[t]===null&&s[t]!==void 0),n?delete s[t]:s[t]=e[t]}function vu(s,e,t=!1){for(const r in s)if(e[r]!==void 0)if(e[r]===null||typeof e[r]!="object")dt(s,e,r,t);else{const n=s[r],o=e[r];Xo(n)&&Xo(o)&&vu(n,o,t)}}const vm=Object.assign;function bm(s,e,...t){if(!Array.isArray(s))throw new Error("Array with property names expected as first argument");for(const r of t)for(let n=0;n<s.length;n++){const o=s[n];r&&Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}function ym(s,e,t,r=!1){if(Array.isArray(t))throw new TypeError("Arrays are not supported by deepExtend");for(let n=0;n<s.length;n++){const o=s[n];if(Object.prototype.hasOwnProperty.call(t,o))if(t[o]&&t[o].constructor===Object)e[o]===void 0&&(e[o]={}),e[o].constructor===Object?fi(e[o],t[o],!1,r):dt(e,t,o,r);else{if(Array.isArray(t[o]))throw new TypeError("Arrays are not supported by deepExtend");dt(e,t,o,r)}}return e}function _m(s,e,t,r=!1){if(Array.isArray(t))throw new TypeError("Arrays are not supported by deepExtend");for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!s.includes(n))if(t[n]&&t[n].constructor===Object)e[n]===void 0&&(e[n]={}),e[n].constructor===Object?fi(e[n],t[n]):dt(e,t,n,r);else if(Array.isArray(t[n])){e[n]=[];for(let o=0;o<t[n].length;o++)e[n].push(t[n][o])}else dt(e,t,n,r);return e}function fi(s,e,t=!1,r=!1){for(const n in e)(Object.prototype.hasOwnProperty.call(e,n)||t===!0)&&(typeof e[n]=="object"&&e[n]!==null&&Object.getPrototypeOf(e[n])===Object.prototype?s[n]===void 0?s[n]=fi({},e[n],t):typeof s[n]=="object"&&s[n]!==null&&Object.getPrototypeOf(s[n])===Object.prototype?fi(s[n],e[n],t):dt(s,e,n,r):Array.isArray(e[n])?s[n]=e[n].slice():dt(s,e,n,r));return s}function xm(s,e){if(s.length!==e.length)return!1;for(let t=0,r=s.length;t<r;t++)if(s[t]!=e[t])return!1;return!0}function Jt(s){const e=typeof s;return e==="object"?s===null?"null":s instanceof Boolean?"Boolean":s instanceof Number?"Number":s instanceof String?"String":Array.isArray(s)?"Array":s instanceof Date?"Date":"Object":e==="number"?"Number":e==="boolean"?"Boolean":e==="string"?"String":e===void 0?"undefined":e}function pi(s,e){return[...s,e]}function bu(s){return s.slice()}function wm(s){return s.getBoundingClientRect().left}function Cm(s){return s.getBoundingClientRect().right}function Tm(s){return s.getBoundingClientRect().top}function Sm(s,e){let t=s.className.split(" ");const r=e.split(" ");t=t.concat(r.filter(function(n){return!t.includes(n)})),s.className=t.join(" ")}function Dm(s,e){let t=s.className.split(" ");const r=e.split(" ");t=t.filter(function(n){return!r.includes(n)}),s.className=t.join(" ")}function km(s,e){if(Array.isArray(s)){const t=s.length;for(let r=0;r<t;r++)e(s[r],r,s)}else for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(s[t],t,s)}const Em=Object.values;function Nm(s,e,t){return s[e]!==t?(s[e]=t,!0):!1}function Om(s){let e=!1;return()=>{e||(e=!0,requestAnimationFrame(()=>{e=!1,s()}))}}function Am(s){s||(s=window.event),s&&(s.preventDefault?s.preventDefault():s.returnValue=!1)}function Pm(s=window.event){let e=null;return s&&(s.target?e=s.target:s.srcElement&&(e=s.srcElement)),!(e instanceof Element)||e.nodeType!=null&&e.nodeType==3&&(e=e.parentNode,!(e instanceof Element))?null:e}function Im(s,e){let t=s;for(;t;){if(t===e)return!0;if(t.parentNode)t=t.parentNode;else return!1}return!1}const jm={asBoolean(s,e){return typeof s=="function"&&(s=s()),s!=null?s!=!1:e||null},asNumber(s,e){return typeof s=="function"&&(s=s()),s!=null?Number(s)||e||null:e||null},asString(s,e){return typeof s=="function"&&(s=s()),s!=null?String(s):e||null},asSize(s,e){return typeof s=="function"&&(s=s()),de(s)?s:oi(s)?s+"px":e||null},asElement(s,e){return typeof s=="function"&&(s=s()),s||e||null}};function cs(s){let e;switch(s.length){case 3:case 4:return e=fm.exec(s),e?{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16)}:null;case 6:case 7:return e=um.exec(s),e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null;default:return null}}function Rm(s,e){if(s.includes("rgba"))return s;if(s.includes("rgb")){const t=s.substr(s.indexOf("(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+e+")"}else{const t=cs(s);return t==null?s:"rgba("+t.r+","+t.g+","+t.b+","+e+")"}}function Ca(s,e,t){return"#"+((1<<24)+(s<<16)+(e<<8)+t).toString(16).slice(1)}function Mm(s,e){if(de(s)){let t=s;if(Sa(t)){const r=t.substr(4).substr(0,t.length-5).split(",").map(function(n){return parseInt(n)});t=Ca(r[0],r[1],r[2])}if(Ta(t)===!0){const r=_u(t),n={h:r.h,s:r.s*.8,v:Math.min(1,r.v*1.02)},o={h:r.h,s:Math.min(1,r.s*1.25),v:r.v*.8},a=Ko(o.h,o.s,o.v),l=Ko(n.h,n.s,n.v);return{background:t,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else return e?{background:s.background||e.background,border:s.border||e.border,highlight:de(s.highlight)?{border:s.highlight,background:s.highlight}:{background:s.highlight&&s.highlight.background||e.highlight.background,border:s.highlight&&s.highlight.border||e.highlight.border},hover:de(s.hover)?{border:s.hover,background:s.hover}:{border:s.hover&&s.hover.border||e.hover.border,background:s.hover&&s.hover.background||e.hover.background}}:{background:s.background||void 0,border:s.border||void 0,highlight:de(s.highlight)?{border:s.highlight,background:s.highlight}:{background:s.highlight&&s.highlight.background||void 0,border:s.highlight&&s.highlight.border||void 0},hover:de(s.hover)?{border:s.hover,background:s.hover}:{border:s.hover&&s.hover.border||void 0,background:s.hover&&s.hover.background||void 0}}}function Pt(s,e,t){s=s/255,e=e/255,t=t/255;const r=Math.min(s,Math.min(e,t)),n=Math.max(s,Math.max(e,t));if(r===n)return{h:0,s:0,v:r};const o=s===r?e-t:t===r?s-e:t-s,l=60*((s===r?3:t===r?1:5)-o/(n-r))/360,h=(n-r)/n;return{h:l,s:h,v:n}}function yu(s){const e=document.createElement("div"),t={};e.style.cssText=s;for(let r=0;r<e.style.length;++r)t[e.style[r]]=e.style.getPropertyValue(e.style[r]);return t}function Fm(s,e){const t=yu(e);for(const[r,n]of Object.entries(t))s.style.setProperty(r,n)}function Lm(s,e){const t=yu(e);for(const r of Object.keys(t))s.style.removeProperty(r)}function ai(s,e,t){let r,n,o;const a=Math.floor(s*6),l=s*6-a,h=t*(1-e),d=t*(1-l*e),c=t*(1-(1-l)*e);switch(a%6){case 0:r=t,n=c,o=h;break;case 1:r=d,n=t,o=h;break;case 2:r=h,n=t,o=c;break;case 3:r=h,n=d,o=t;break;case 4:r=c,n=h,o=t;break;case 5:r=t,n=h,o=d;break}return{r:Math.floor(r*255),g:Math.floor(n*255),b:Math.floor(o*255)}}function Ko(s,e,t){const r=ai(s,e,t);return Ca(r.r,r.g,r.b)}function _u(s){const e=cs(s);if(!e)throw new TypeError(`'${s}' is not a valid color.`);return Pt(e.r,e.g,e.b)}function Ta(s){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(s)}function Sa(s){return pm.test(s)}function xu(s){return mm.test(s)}function qm(s,e){if(e!==null&&typeof e=="object"){const t=Object.create(e);for(let r=0;r<s.length;r++)Object.prototype.hasOwnProperty.call(e,s[r])&&typeof e[s[r]]=="object"&&(t[s[r]]=Da(e[s[r]]));return t}else return null}function Da(s){if(s===null||typeof s!="object")return null;if(s instanceof Element)return s;const e=Object.create(s);for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&typeof s[t]=="object"&&(e[t]=Da(s[t]));return e}function Gm(s,e){for(let t=0;t<s.length;t++){const r=s[t];let n;for(n=t;n>0&&e(r,s[n-1])<0;n--)s[n]=s[n-1];s[n]=r}return s}function Hm(s,e,t,r={}){const n=function(m){return m!=null},o=function(m){return m!==null&&typeof m=="object"},a=function(m){for(const g in m)if(Object.prototype.hasOwnProperty.call(m,g))return!1;return!0};if(!o(s))throw new Error("Parameter mergeTarget must be an object");if(!o(e))throw new Error("Parameter options must be an object");if(!n(t))throw new Error("Parameter option must have a value");if(!o(r))throw new Error("Parameter globalOptions must be an object");const l=function(m,g,b){o(m[b])||(m[b]={});const y=g[b],_=m[b];for(const x in y)Object.prototype.hasOwnProperty.call(y,x)&&(_[x]=y[x])},h=e[t],c=o(r)&&!a(r)?r[t]:void 0,u=c?c.enabled:void 0;if(h===void 0)return;if(typeof h=="boolean"){o(s[t])||(s[t]={}),s[t].enabled=h;return}if(h===null&&!o(s[t]))if(n(c))s[t]=Object.create(c);else return;if(!o(h))return;let p=!0;h.enabled!==void 0?p=h.enabled:u!==void 0&&(p=c.enabled),l(s,e,t),s[t].enabled=p}function Bm(s,e,t,r){let o=0,a=0,l=s.length-1;for(;a<=l&&o<1e4;){const h=Math.floor((a+l)/2),d=s[h],c=r===void 0?d[t]:d[t][r],u=e(c);if(u==0)return h;u==-1?a=h+1:l=h-1,o++}return-1}function zm(s,e,t,r,n){let a=0,l=0,h=s.length-1,d,c,u,p;for(n=n??function(m,g){return m==g?0:m<g?-1:1};l<=h&&a<1e4;){if(p=Math.floor(.5*(h+l)),d=s[Math.max(0,p-1)][t],c=s[p][t],u=s[Math.min(s.length-1,p+1)][t],n(c,e)==0)return p;if(n(d,e)<0&&n(c,e)>0)return r=="before"?Math.max(0,p-1):p;if(n(c,e)<0&&n(u,e)>0)return r=="before"?p:Math.min(s.length-1,p+1);n(c,e)<0?l=p+1:h=p-1,a++}return-1}const $m={linear(s){return s},easeInQuad(s){return s*s},easeOutQuad(s){return s*(2-s)},easeInOutQuad(s){return s<.5?2*s*s:-1+(4-2*s)*s},easeInCubic(s){return s*s*s},easeOutCubic(s){return--s*s*s+1},easeInOutCubic(s){return s<.5?4*s*s*s:(s-1)*(2*s-2)*(2*s-2)+1},easeInQuart(s){return s*s*s*s},easeOutQuart(s){return 1- --s*s*s*s},easeInOutQuart(s){return s<.5?8*s*s*s*s:1-8*--s*s*s*s},easeInQuint(s){return s*s*s*s*s},easeOutQuint(s){return 1+--s*s*s*s*s},easeInOutQuint(s){return s<.5?16*s*s*s*s*s:1+16*--s*s*s*s*s}};function Um(){const s=document.createElement("p");s.style.width="100%",s.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(s),document.body.appendChild(e);const t=s.offsetWidth;e.style.overflow="scroll";let r=s.offsetWidth;return t==r&&(r=e.clientWidth),document.body.removeChild(e),t-r}function Vm(s,e){let t;Array.isArray(e)||(e=[e]);for(const r of s)if(r){t=r[e[0]];for(let n=1;n<e.length;n++)t&&(t=t[e[n]]);if(typeof t<"u")break}return t}const Wm={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let wu=class{constructor(e=1){this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return Wm[e]}setColor(e,t=!0){if(e==="none")return;let r;const n=this._isColorString(e);if(n!==void 0&&(e=n),de(e)===!0){if(Sa(e)===!0){const o=e.substr(4).substr(0,e.length-5).split(",");r={r:o[0],g:o[1],b:o[2],a:1}}else if(xu(e)===!0){const o=e.substr(5).substr(0,e.length-6).split(",");r={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(Ta(e)===!0){const o=cs(e);r={r:o.r,g:o.g,b:o.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const o=e.a!==void 0?e.a:"1.0";r={r:e.r,g:e.g,b:e.b,a:o}}if(r===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(e));this._setColor(r,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(e=!0){e===!0&&(this.previousColor=Object.assign({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e,t=!0){t===!0&&(this.initialColor=Object.assign({},e)),this.color=e;const r=Pt(e.r,e.g,e.b),n=2*Math.PI,o=this.r*r.s,a=this.centerCoordinates.x+o*Math.sin(n*r.h),l=this.centerCoordinates.y+o*Math.cos(n*r.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const t=Pt(this.color.r,this.color.g,this.color.b);t.v=e/100;const r=ai(t.h,t.s,t.v);r.a=this.color.a,this.color=r,this._updatePicker()}_updatePicker(e=this.color){const t=Pt(e.r,e.g,e.b),r=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1)),r.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const n=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;r.clearRect(0,0,n,o),r.putImageData(this.hueCircle,0,0),r.fillStyle="rgba(0,0,0,"+(1-t.v)+")",r.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),r.fill(),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const e=this;this.opacityRange.onchange=function(){e._setOpacity(this.value)},this.opacityRange.oninput=function(){e._setOpacity(this.value)},this.brightnessRange.onchange=function(){e._setBrightness(this.value)},this.brightnessRange.oninput=function(){e._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new wa(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const t=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,r);let n,o,a,l;this.centerCoordinates={x:t*.5,y:r*.5},this.r=.49*t;const h=2*Math.PI/360,d=1/360,c=1/this.r;let u;for(a=0;a<360;a++)for(l=0;l<this.r;l++)n=this.centerCoordinates.x+l*Math.sin(h*a),o=this.centerCoordinates.y+l*Math.cos(h*a),u=ai(a*d,l*c,1),e.fillStyle="rgb("+u.r+","+u.g+","+u.b+")",e.fillRect(n-.5,o-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,r)}this.generated=!0}_moveSelector(e){const t=this.colorPickerDiv.getBoundingClientRect(),r=e.center.x-t.left,n=e.center.y-t.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=r-a,h=n-o,d=Math.atan2(l,h),c=.98*Math.min(Math.sqrt(l*l+h*h),a),u=Math.cos(d)*c+o,p=Math.sin(d)*c+a;this.colorPickerSelector.style.top=u-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=p-.5*this.colorPickerSelector.clientWidth+"px";let m=d/(2*Math.PI);m=m<0?m+1:m;const g=c/this.r,b=Pt(this.color.r,this.color.g,this.color.b);b.h=m,b.s=g;const y=ai(b.h,b.s,b.v);y.a=this.color.a,this.color=y,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function Qo(...s){if(s.length<1)throw new TypeError("Invalid arguments.");if(s.length===1)return document.createTextNode(s[0]);{const e=document.createElement(s[0]);return e.appendChild(Qo(...s.slice(1))),e}}let Ym=class{constructor(e,t,r,n=1,o=()=>!1){this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=o,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Object.assign(this.options,this.defaultOptions),this.configureOptions=r,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new wu(n),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof e=="string")this.options.filter=e;else if(Array.isArray(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),e.filter!==void 0&&(this.options.filter=e.filter),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);this.options.filter===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=this.options.filter;let t=0,r=!1;for(const n in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,n)&&(this.allowCreation=!1,r=!1,typeof e=="function"?(r=e(n,[]),r=r||this._handleObject(this.configureOptions[n],[n],!0)):(e===!0||e.indexOf(n)!==-1)&&(r=!0),r!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(n),this._handleObject(this.configureOptions[n],[n])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let t=this.moduleOptions;for(let r=0;r<e.length;r++)if(t[e[r]]!==void 0)t=t[e[r]];else{t=void 0;break}return t}_makeItem(e,...t){if(this.allowCreation===!0){const r=document.createElement("div");return r.className="vis-configuration vis-config-item vis-config-s"+e.length,t.forEach(n=>{r.appendChild(n)}),this.domElements.push(r),this.domElements.length}return 0}_makeHeader(e){const t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerText=e,this._makeItem([],t)}_makeLabel(e,t,r=!1){const n=document.createElement("div");if(n.className="vis-configuration vis-config-label vis-config-s"+t.length,r===!0){for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(Qo("i","b",e))}else n.innerText=e+":";return n}_makeDropdown(e,t,r){const n=document.createElement("select");n.className="vis-configuration vis-config-select";let o=0;t!==void 0&&e.indexOf(t)!==-1&&(o=e.indexOf(t));for(let h=0;h<e.length;h++){const d=document.createElement("option");d.value=e[h],h===o&&(d.selected="selected"),d.innerText=e[h],n.appendChild(d)}const a=this;n.onchange=function(){a._update(this.value,r)};const l=this._makeLabel(r[r.length-1],r);this._makeItem(r,l,n)}_makeRange(e,t,r){const n=e[0],o=e[1],a=e[2],l=e[3],h=document.createElement("input");h.className="vis-configuration vis-config-range";try{h.type="range",h.min=o,h.max=a}catch{}h.step=l;let d="",c=0;t!==void 0?(t<0&&t*1.2<o?(h.min=Math.ceil(t*1.2),c=h.min,d="range increased"):t/1.2<o&&(h.min=Math.ceil(t/1.2),c=h.min,d="range increased"),t*1.2>a&&a!==1&&(h.max=Math.ceil(t*1.2),c=h.max,d="range increased"),h.value=t):h.value=n;const u=document.createElement("input");u.className="vis-configuration vis-config-rangeinput",u.value=h.value;const p=this;h.onchange=function(){u.value=this.value,p._update(Number(this.value),r)},h.oninput=function(){u.value=this.value};const m=this._makeLabel(r[r.length-1],r),g=this._makeItem(r,m,h,u);d!==""&&this.popupHistory[g]!==c&&(this.popupHistory[g]=c,this._setupPopup(d,g))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const r=document.createElement("div");r.id="vis-configuration-popup",r.className="vis-configuration-popup",r.innerText=e,r.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:r,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(()=>{this._removePopup()},1800)}}_makeCheckbox(e,t,r){const n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=e,t!==void 0&&(n.checked=t,t!==e&&(typeof e=="object"?t!==e.enabled&&this.changedOptions.push({path:r,value:t}):this.changedOptions.push({path:r,value:t})));const o=this;n.onchange=function(){o._update(this.checked,r)};const a=this._makeLabel(r[r.length-1],r);this._makeItem(r,a,n)}_makeTextInput(e,t,r){const n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=t,t!==e&&this.changedOptions.push({path:r,value:t});const o=this;n.onchange=function(){o._update(this.value,r)};const a=this._makeLabel(r[r.length-1],r);this._makeItem(r,a,n)}_makeColorField(e,t,r){const n=e[1],o=document.createElement("div");t=t===void 0?n:t,t!=="none"?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=t):o.className="vis-configuration vis-config-colorBlock none",t=t===void 0?n:t,o.onclick=()=>{this._showColorPicker(t,o,r)};const a=this._makeLabel(r[r.length-1],r);this._makeItem(r,a,o)}_showColorPicker(e,t,r){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(n=>{const o="rgba("+n.r+","+n.g+","+n.b+","+n.a+")";t.style.backgroundColor=o,this._update(o,r)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(e,t,r)}})}_handleObject(e,t=[],r=!1){let n=!1;const o=this.options.filter;let a=!1;for(const l in e)if(Object.prototype.hasOwnProperty.call(e,l)){n=!0;const h=e[l],d=pi(t,l);if(typeof o=="function"&&(n=o(l,t),n===!1&&!Array.isArray(h)&&typeof h!="string"&&typeof h!="boolean"&&h instanceof Object&&(this.allowCreation=!1,n=this._handleObject(h,d,!0),this.allowCreation=r===!1)),n!==!1){a=!0;const c=this._getValue(d);if(Array.isArray(h))this._handleArray(h,c,d);else if(typeof h=="string")this._makeTextInput(h,c,d);else if(typeof h=="boolean")this._makeCheckbox(h,c,d);else if(h instanceof Object){if(!this.hideOption(t,l,this.moduleOptions))if(h.enabled!==void 0){const u=pi(d,"enabled"),p=this._getValue(u);if(p===!0){const m=this._makeLabel(l,d,!0);this._makeItem(d,m),a=this._handleObject(h,d)||a}else this._makeCheckbox(h,p,d)}else{const u=this._makeLabel(l,d,!0);this._makeItem(d,u),a=this._handleObject(h,d)||a}}else console.error("dont know how to handle",h,l,d)}}return a}_handleArray(e,t,r){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,r),e[1]!==t&&this.changedOptions.push({path:r,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:Number(t)}))}_update(e,t){const r=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",r),this.initialized=!0,this.parent.setOptions(r)}_constructOptions(e,t,r={}){let n=r;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let o=0;o<t.length;o++)t[o]!=="global"&&(n[t[o]]===void 0&&(n[t[o]]={}),o!==t.length-1?n=n[t[o]]:n[t[o]]=e);return r}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(Qo("pre","const options = "+JSON.stringify(e,null,2)))}getOptions(){const e={};for(let t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}},Xm=class{constructor(e,t){this.container=e,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,t){this.x=parseInt(e),this.y=parseInt(t)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const t=this.frame.clientHeight,r=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth;let a=0,l=0;if(this.overflowMethod=="flip"){let h=!1,d=!0;this.y-t<this.padding&&(d=!1),this.x+r>o-this.padding&&(h=!0),h?a=this.x-r:a=this.x,d?l=this.y-t:l=this.y}else l=this.y-t,l+t+this.padding>n&&(l=n-t-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+r+this.padding>o&&(a=o-r-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},Kt=!1,vl;const Zo="background: #FFeeee; color: #dd0000";let Km=class X{static validate(e,t,r){Kt=!1,vl=t;let n=t;return r!==void 0&&(n=t[r]),X.parse(e,n,[]),Kt}static parse(e,t,r){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&X.check(n,e,t,r)}static check(e,t,r,n){if(r[e]===void 0&&r.__any__===void 0){X.getSuggestion(e,r,n);return}let o=e,a=!0;r[e]===void 0&&r.__any__!==void 0&&(o="__any__",a=X.getType(t[e])==="object");let l=r[o];a&&l.__type__!==void 0&&(l=l.__type__),X.checkFields(e,t,r,o,l,n)}static checkFields(e,t,r,n,o,a){const l=function(c){console.error("%c"+c+X.printLocation(a,e),Zo)},h=X.getType(t[e]),d=o[h];d!==void 0?X.getType(d)==="array"&&d.indexOf(t[e])===-1?(l('Invalid option detected in "'+e+'". Allowed values are:'+X.print(d)+' not "'+t[e]+'". '),Kt=!0):h==="object"&&n!=="__any__"&&(a=pi(a,e),X.parse(t[e],r[n],a)):o.any===void 0&&(l('Invalid type received for "'+e+'". Expected: '+X.print(Object.keys(o))+". Received ["+h+'] "'+t[e]+'"'),Kt=!0)}static getType(e){const t=typeof e;return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}static getSuggestion(e,t,r){const n=X.findInOptions(e,t,r,!1),o=X.findInOptions(e,vl,[],!0),a=8,l=4;let h;n.indexMatch!==void 0?h=" in "+X.printLocation(n.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+n.indexMatch+`"?

`:o.distance<=l&&n.distance>o.distance?h=" in "+X.printLocation(n.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+X.printLocation(o.path,o.closestMatch,""):n.distance<=a?h='. Did you mean "'+n.closestMatch+'"?'+X.printLocation(n.path,e):h=". Did you mean one of these: "+X.print(Object.keys(t))+X.printLocation(r,e),console.error('%cUnknown option detected: "'+e+'"'+h,Zo),Kt=!0}static findInOptions(e,t,r,n=!1){let o=1e9,a="",l=[];const h=e.toLowerCase();let d;for(const c in t){let u;if(t[c].__type__!==void 0&&n===!0){const p=X.findInOptions(e,t[c],pi(r,c));o>p.distance&&(a=p.closestMatch,l=p.path,o=p.distance,d=p.indexMatch)}else c.toLowerCase().indexOf(h)!==-1&&(d=c),u=X.levenshteinDistance(e,c),o>u&&(a=c,l=bu(r),o=u)}return{closestMatch:a,path:l,distance:o,indexMatch:d}}static printLocation(e,t,r=`Problem value found at: 
`){let n=`

`+r+`options = {
`;for(let o=0;o<e.length;o++){for(let a=0;a<o+1;a++)n+="  ";n+=e[o]+`: {
`}for(let o=0;o<e.length+1;o++)n+="  ";n+=t+`
`;for(let o=0;o<e.length+1;o++){for(let a=0;a<e.length-o;a++)n+="  ";n+=`}
`}return n+`

`}static print(e){return JSON.stringify(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;const r=[];let n;for(n=0;n<=t.length;n++)r[n]=[n];let o;for(o=0;o<=e.length;o++)r[0][o]=o;for(n=1;n<=t.length;n++)for(o=1;o<=e.length;o++)t.charAt(n-1)==e.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[t.length][e.length]}};const Qm=De,Zm=wu,Jm=Ym,eg=wa,tg=Xm,ig=Zo,sg=Km,rg=Object.freeze(Object.defineProperty({__proto__:null,Activator:Qm,Alea:nm,ColorPicker:Zm,Configurator:Jm,DELETE:ds,HSVToHex:Ko,HSVToRGB:ai,Hammer:eg,Popup:tg,RGBToHSV:Pt,RGBToHex:Ca,VALIDATOR_PRINT_STYLE:ig,Validator:sg,addClassName:Sm,addCssText:Fm,binarySearchCustom:Bm,binarySearchValue:zm,bridgeObject:Da,copyAndExtendArray:pi,copyArray:bu,deepExtend:fi,deepObjectAssign:xa,easingFunctions:$m,equalArray:xm,extend:vm,fillIfDefined:vu,forEach:km,getAbsoluteLeft:wm,getAbsoluteRight:Cm,getAbsoluteTop:Tm,getScrollBarWidth:Um,getTarget:Pm,getType:Jt,hasParent:Im,hexToHSV:_u,hexToRGB:cs,insertSort:Gm,isDate:gm,isNumber:oi,isObject:Xo,isString:de,isValidHex:Ta,isValidRGB:Sa,isValidRGBA:xu,mergeOptions:Hm,option:jm,overrideOpacity:Rm,parseColor:Mm,preventDefault:Am,pureDeepObjectAssign:fu,recursiveDOMDelete:gu,removeClassName:Dm,removeCssText:Lm,selectiveBridgeObject:qm,selectiveDeepExtend:ym,selectiveExtend:bm,selectiveNotDeepExtend:_m,throttle:Om,toArray:Em,topMost:Vm,updateProperty:Nm},Symbol.toStringTag,{value:"Module"}));var Hi,ng=new Uint8Array(16);function og(){if(!Hi&&(Hi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Hi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hi(ng)}const ag=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function lg(s){return typeof s=="string"&&ag.test(s)}var Z=[];for(var Ls=0;Ls<256;++Ls)Z.push((Ls+256).toString(16).substr(1));function hg(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Z[s[e+0]]+Z[s[e+1]]+Z[s[e+2]]+Z[s[e+3]]+"-"+Z[s[e+4]]+Z[s[e+5]]+"-"+Z[s[e+6]]+Z[s[e+7]]+"-"+Z[s[e+8]]+Z[s[e+9]]+"-"+Z[s[e+10]]+Z[s[e+11]]+Z[s[e+12]]+Z[s[e+13]]+Z[s[e+14]]+Z[s[e+15]]).toLowerCase();if(!lg(t))throw TypeError("Stringified UUID is invalid");return t}function nt(s,e,t){s=s||{};var r=s.random||(s.rng||og)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var n=0;n<16;++n)e[t+n]=r[n];return e}return hg(r)}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 7.1.9
 * @date    2023-11-24T17:53:34.179Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function Cu(s){return new cg(s)}class dg{constructor(e,t,r){H(this,"_source");H(this,"_transformers");H(this,"_target");H(this,"_listeners",{add:this._add.bind(this),remove:this._remove.bind(this),update:this._update.bind(this)});this._source=e,this._transformers=t,this._target=r}all(){return this._target.update(this._transformItems(this._source.get())),this}start(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}stop(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}_transformItems(e){return this._transformers.reduce((t,r)=>r(t),e)}_add(e,t){t!=null&&this._target.add(this._transformItems(this._source.get(t.items)))}_update(e,t){t!=null&&this._target.update(this._transformItems(this._source.get(t.items)))}_remove(e,t){t!=null&&this._target.remove(this._transformItems(t.oldData))}}class cg{constructor(e){H(this,"_source");H(this,"_transformers",[]);this._source=e}filter(e){return this._transformers.push(t=>t.filter(e)),this}map(e){return this._transformers.push(t=>t.map(e)),this}flatMap(e){return this._transformers.push(t=>t.flatMap(e)),this}to(e){return new dg(this._source,this._transformers,e)}}function Jo(s){return typeof s=="string"||typeof s=="number"}class us{constructor(e){H(this,"delay");H(this,"max");H(this,"_queue",[]);H(this,"_timeout",null);H(this,"_extended",null);this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,t){const r=new us(t);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{r.flush()};const n=[{name:"flush",original:void 0}];if(t&&t.replace)for(let o=0;o<t.replace.length;o++){const a=t.replace[o];n.push({name:a,original:e[a]}),r.replace(e,a)}return r._extended={object:e,methods:n},r}destroy(){if(this.flush(),this._extended){const e=this._extended.object,t=this._extended.methods;for(let r=0;r<t.length;r++){const n=t[r];n.original?e[n.name]=n.original:delete e[n.name]}this._extended=null}}replace(e,t){const r=this,n=e[t];if(!n)throw new Error("Method "+t+" undefined");e[t]=function(...o){r.queue({args:o,fn:n,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=setTimeout(()=>{this.flush()},this.delay))}flush(){this._queue.splice(0).forEach(e=>{e.fn.apply(e.context||e.fn,e.args||[])})}}class mi{constructor(){H(this,"_subscribers",{"*":[],add:[],remove:[],update:[]});H(this,"subscribe",mi.prototype.on);H(this,"unsubscribe",mi.prototype.off)}_trigger(e,t,r){if(e==="*")throw new Error("Cannot trigger event *");[...this._subscribers[e],...this._subscribers["*"]].forEach(n=>{n(e,t,r??null)})}on(e,t){typeof t=="function"&&this._subscribers[e].push(t)}off(e,t){this._subscribers[e]=this._subscribers[e].filter(r=>r!==t)}}class Ve{constructor(e){H(this,"_pairs");this._pairs=e}*[Symbol.iterator](){for(const[e,t]of this._pairs)yield[e,t]}*entries(){for(const[e,t]of this._pairs)yield[e,t]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){return[...this._pairs].map(e=>e[0])}toItemArray(){return[...this._pairs].map(e=>e[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=Object.create(null);for(const[t,r]of this._pairs)e[t]=r;return e}toMap(){return new Map(this._pairs)}toIdSet(){return new Set(this.toIdArray())}toItemSet(){return new Set(this.toItemArray())}cache(){return new Ve([...this._pairs])}distinct(e){const t=new Set;for(const[r,n]of this._pairs)t.add(e(n,r));return t}filter(e){const t=this._pairs;return new Ve({*[Symbol.iterator](){for(const[r,n]of t)e(n,r)&&(yield[r,n])}})}forEach(e){for(const[t,r]of this._pairs)e(r,t)}map(e){const t=this._pairs;return new Ve({*[Symbol.iterator](){for(const[r,n]of t)yield[r,e(n,r)]}})}max(e){const t=this._pairs[Symbol.iterator]();let r=t.next();if(r.done)return null;let n=r.value[1],o=e(r.value[1],r.value[0]);for(;!(r=t.next()).done;){const[a,l]=r.value,h=e(l,a);h>o&&(o=h,n=l)}return n}min(e){const t=this._pairs[Symbol.iterator]();let r=t.next();if(r.done)return null;let n=r.value[1],o=e(r.value[1],r.value[0]);for(;!(r=t.next()).done;){const[a,l]=r.value,h=e(l,a);h<o&&(o=h,n=l)}return n}reduce(e,t){for(const[r,n]of this._pairs)t=e(t,n,r);return t}sort(e){return new Ve({[Symbol.iterator]:()=>[...this._pairs].sort(([t,r],[n,o])=>e(r,o,t,n))[Symbol.iterator]()})}}function ug(s,e){return s[e]==null&&(s[e]=nt()),s}class ct extends mi{constructor(t,r){super();H(this,"flush");H(this,"length");H(this,"_options");H(this,"_data");H(this,"_idProp");H(this,"_queue",null);t&&!Array.isArray(t)&&(r=t,t=[]),this._options=r||{},this._data=new Map,this.length=0,this._idProp=this._options.fieldId||"id",t&&t.length&&this.add(t),this.setOptions(r)}get idProp(){return this._idProp}setOptions(t){t&&t.queue!==void 0&&(t.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=us.extend(this,{replace:["add","update","remove"]})),t.queue&&typeof t.queue=="object"&&this._queue.setOptions(t.queue)))}add(t,r){const n=[];let o;if(Array.isArray(t)){if(t.map(l=>l[this._idProp]).some(l=>this._data.has(l)))throw new Error("A duplicate id was found in the parameter array.");for(let l=0,h=t.length;l<h;l++)o=this._addItem(t[l]),n.push(o)}else if(t&&typeof t=="object")o=this._addItem(t),n.push(o);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(t,r){const n=[],o=[],a=[],l=[],h=this._idProp,d=c=>{const u=c[h];if(u!=null&&this._data.has(u)){const p=c,m=Object.assign({},this._data.get(u)),g=this._updateItem(p);o.push(g),l.push(p),a.push(m)}else{const p=this._addItem(c);n.push(p)}};if(Array.isArray(t))for(let c=0,u=t.length;c<u;c++)t[c]&&typeof t[c]=="object"?d(t[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(t&&typeof t=="object")d(t);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),o.length){const c={items:o,oldData:a,data:l};this._trigger("update",c,r)}return n.concat(o)}updateOnly(t,r){Array.isArray(t)||(t=[t]);const n=t.map(o=>{const a=this._data.get(o[this._idProp]);if(a==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:a,update:o}}).map(({oldData:o,update:a})=>{const l=o[this._idProp],h=fu(o,a);return this._data.set(l,h),{id:l,oldData:o,updatedData:h}});if(n.length){const o={items:n.map(a=>a.id),oldData:n.map(a=>a.oldData),data:n.map(a=>a.updatedData)};return this._trigger("update",o,r),o.items}else return[]}get(t,r){let n,o,a;Jo(t)?(n=t,a=r):Array.isArray(t)?(o=t,a=r):a=t;const l=a&&a.returnType==="Object"?"Object":"Array",h=a&&a.filter,d=[];let c,u,p;if(n!=null)c=this._data.get(n),c&&h&&!h(c)&&(c=void 0);else if(o!=null)for(let m=0,g=o.length;m<g;m++)c=this._data.get(o[m]),c!=null&&(!h||h(c))&&d.push(c);else{u=[...this._data.keys()];for(let m=0,g=u.length;m<g;m++)p=u[m],c=this._data.get(p),c!=null&&(!h||h(c))&&d.push(c)}if(a&&a.order&&n==null&&this._sort(d,a.order),a&&a.fields){const m=a.fields;if(n!=null&&c!=null)c=this._filterFields(c,m);else for(let g=0,b=d.length;g<b;g++)d[g]=this._filterFields(d[g],m)}if(l=="Object"){const m={};for(let g=0,b=d.length;g<b;g++){const y=d[g],_=y[this._idProp];m[_]=y}return m}else return n!=null?c??null:d}getIds(t){const r=this._data,n=t&&t.filter,o=t&&t.order,a=[...r.keys()],l=[];if(n)if(o){const h=[];for(let d=0,c=a.length;d<c;d++){const u=a[d],p=this._data.get(u);p!=null&&n(p)&&h.push(p)}this._sort(h,o);for(let d=0,c=h.length;d<c;d++)l.push(h[d][this._idProp])}else for(let h=0,d=a.length;h<d;h++){const c=a[h],u=this._data.get(c);u!=null&&n(u)&&l.push(u[this._idProp])}else if(o){const h=[];for(let d=0,c=a.length;d<c;d++){const u=a[d];h.push(r.get(u))}this._sort(h,o);for(let d=0,c=h.length;d<c;d++)l.push(h[d][this._idProp])}else for(let h=0,d=a.length;h<d;h++){const c=a[h],u=r.get(c);u!=null&&l.push(u[this._idProp])}return l}getDataSet(){return this}forEach(t,r){const n=r&&r.filter,a=[...this._data.keys()];if(r&&r.order){const l=this.get(r);for(let h=0,d=l.length;h<d;h++){const c=l[h],u=c[this._idProp];t(c,u)}}else for(let l=0,h=a.length;l<h;l++){const d=a[l],c=this._data.get(d);c!=null&&(!n||n(c))&&t(c,d)}}map(t,r){const n=r&&r.filter,o=[],l=[...this._data.keys()];for(let h=0,d=l.length;h<d;h++){const c=l[h],u=this._data.get(c);u!=null&&(!n||n(u))&&o.push(t(u,c))}return r&&r.order&&this._sort(o,r.order),o}_filterFields(t,r){return t&&(Array.isArray(r)?r:Object.keys(r)).reduce((n,o)=>(n[o]=t[o],n),{})}_sort(t,r){if(typeof r=="string"){const n=r;t.sort((o,a)=>{const l=o[n],h=a[n];return l>h?1:l<h?-1:0})}else if(typeof r=="function")t.sort(r);else throw new TypeError("Order must be a function or a string")}remove(t,r){const n=[],o=[],a=Array.isArray(t)?t:[t];for(let l=0,h=a.length;l<h;l++){const d=this._remove(a[l]);if(d){const c=d[this._idProp];c!=null&&(n.push(c),o.push(d))}}return n.length&&this._trigger("remove",{items:n,oldData:o},r),n}_remove(t){let r;if(Jo(t)?r=t:t&&typeof t=="object"&&(r=t[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(t){const r=[...this._data.keys()],n=[];for(let o=0,a=r.length;o<a;o++)n.push(this._data.get(r[o]));return this._data.clear(),this.length=0,this._trigger("remove",{items:r,oldData:n},t),r}max(t){let r=null,n=null;for(const o of this._data.values()){const a=o[t];typeof a=="number"&&(n==null||a>n)&&(r=o,n=a)}return r||null}min(t){let r=null,n=null;for(const o of this._data.values()){const a=o[t];typeof a=="number"&&(n==null||a<n)&&(r=o,n=a)}return r||null}distinct(t){const r=this._data,n=[...r.keys()],o=[];let a=0;for(let l=0,h=n.length;l<h;l++){const d=n[l],u=r.get(d)[t];let p=!1;for(let m=0;m<a;m++)if(o[m]==u){p=!0;break}!p&&u!==void 0&&(o[a]=u,a++)}return o}_addItem(t){const r=ug(t,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(t){const r=t[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(t)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,{...n,...t}),r}stream(t){if(t){const r=this._data;return new Ve({*[Symbol.iterator](){for(const n of t){const o=r.get(n);o!=null&&(yield[n,o])}}})}else return new Ve({[Symbol.iterator]:this._data.entries.bind(this._data)})}}class fs extends mi{constructor(t,r){super();H(this,"length",0);H(this,"_listener");H(this,"_data");H(this,"_ids",new Set);H(this,"_options");this._options=r||{},this._listener=this._onEvent.bind(this),this.setData(t)}get idProp(){return this.getDataSet().idProp}setData(t){if(this._data){this._data.off&&this._data.off("*",this._listener);const r=this._data.getIds({filter:this._options.filter}),n=this._data.get(r);this._ids.clear(),this.length=0,this._trigger("remove",{items:r,oldData:n})}if(t!=null){this._data=t;const r=this._data.getIds({filter:this._options.filter});for(let n=0,o=r.length;n<o;n++){const a=r[n];this._ids.add(a)}this.length=r.length,this._trigger("add",{items:r})}else this._data=new ct;this._data.on&&this._data.on("*",this._listener)}refresh(){const t=this._data.getIds({filter:this._options.filter}),r=[...this._ids],n={},o=[],a=[],l=[];for(let h=0,d=t.length;h<d;h++){const c=t[h];n[c]=!0,this._ids.has(c)||(o.push(c),this._ids.add(c))}for(let h=0,d=r.length;h<d;h++){const c=r[h],u=this._data.get(c);u==null?console.error("If you see this, report it please."):n[c]||(a.push(c),l.push(u),this._ids.delete(c))}this.length+=o.length-a.length,o.length&&this._trigger("add",{items:o}),a.length&&this._trigger("remove",{items:a,oldData:l})}get(t,r){if(this._data==null)return null;let n=null,o;Jo(t)||Array.isArray(t)?(n=t,o=r):o=t;const a=Object.assign({},this._options,o),l=this._options.filter,h=o&&o.filter;return l&&h&&(a.filter=d=>l(d)&&h(d)),n==null?this._data.get(a):this._data.get(n,a)}getIds(t){if(this._data.length){const r=this._options.filter,n=t!=null?t.filter:null;let o;return n?r?o=a=>r(a)&&n(a):o=n:o=r,this._data.getIds({filter:o,order:t&&t.order})}else return[]}forEach(t,r){if(this._data){const n=this._options.filter,o=r&&r.filter;let a;o?n?a=function(l){return n(l)&&o(l)}:a=o:a=n,this._data.forEach(t,{filter:a,order:r&&r.order})}}map(t,r){if(this._data){const n=this._options.filter,o=r&&r.filter;let a;return o?n?a=l=>n(l)&&o(l):a=o:a=n,this._data.map(t,{filter:a,order:r&&r.order})}else return[]}getDataSet(){return this._data.getDataSet()}stream(t){return this._data.stream(t||{[Symbol.iterator]:this._ids.keys.bind(this._ids)})}dispose(){var n;(n=this._data)!=null&&n.off&&this._data.off("*",this._listener);const t="This data view has already been disposed of.",r={get:()=>{throw new Error(t)},set:()=>{throw new Error(t)},configurable:!1};for(const o of Reflect.ownKeys(fs.prototype))Object.defineProperty(this,o,r)}_onEvent(t,r,n){if(!r||!r.items||!this._data)return;const o=r.items,a=[],l=[],h=[],d=[],c=[],u=[];switch(t){case"add":for(let p=0,m=o.length;p<m;p++){const g=o[p];this.get(g)&&(this._ids.add(g),a.push(g))}break;case"update":for(let p=0,m=o.length;p<m;p++){const g=o[p];this.get(g)?this._ids.has(g)?(l.push(g),c.push(r.data[p]),d.push(r.oldData[p])):(this._ids.add(g),a.push(g)):this._ids.has(g)&&(this._ids.delete(g),h.push(g),u.push(r.oldData[p]))}break;case"remove":for(let p=0,m=o.length;p<m;p++){const g=o[p];this._ids.has(g)&&(this._ids.delete(g),h.push(g),u.push(r.oldData[p]))}break}this.length+=a.length-h.length,a.length&&this._trigger("add",{items:a},n),l.length&&this._trigger("update",{items:l,oldData:d,data:c},n),h.length&&this._trigger("remove",{items:h,oldData:u},n)}}function Tu(s,e){return typeof e=="object"&&e!==null&&s===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof e.forEach=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof e.map=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function Su(s,e){return typeof e=="object"&&e!==null&&s===e.idProp&&typeof e.forEach=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof e.map=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&Tu(s,e.getDataSet())}const fg=Object.freeze(Object.defineProperty({__proto__:null,DELETE:ds,DataSet:ct,DataStream:Ve,DataView:fs,Queue:us,createNewDataPipeFrom:Cu,isDataSetLike:Tu,isDataViewLike:Su},Symbol.toStringTag,{value:"Module"})),pg=ut(fg);var ea={exports:{}},Y={},ta={exports:{}},pt={};function Du(){var s={};return s["align-content"]=!1,s["align-items"]=!1,s["align-self"]=!1,s["alignment-adjust"]=!1,s["alignment-baseline"]=!1,s.all=!1,s["anchor-point"]=!1,s.animation=!1,s["animation-delay"]=!1,s["animation-direction"]=!1,s["animation-duration"]=!1,s["animation-fill-mode"]=!1,s["animation-iteration-count"]=!1,s["animation-name"]=!1,s["animation-play-state"]=!1,s["animation-timing-function"]=!1,s.azimuth=!1,s["backface-visibility"]=!1,s.background=!0,s["background-attachment"]=!0,s["background-clip"]=!0,s["background-color"]=!0,s["background-image"]=!0,s["background-origin"]=!0,s["background-position"]=!0,s["background-repeat"]=!0,s["background-size"]=!0,s["baseline-shift"]=!1,s.binding=!1,s.bleed=!1,s["bookmark-label"]=!1,s["bookmark-level"]=!1,s["bookmark-state"]=!1,s.border=!0,s["border-bottom"]=!0,s["border-bottom-color"]=!0,s["border-bottom-left-radius"]=!0,s["border-bottom-right-radius"]=!0,s["border-bottom-style"]=!0,s["border-bottom-width"]=!0,s["border-collapse"]=!0,s["border-color"]=!0,s["border-image"]=!0,s["border-image-outset"]=!0,s["border-image-repeat"]=!0,s["border-image-slice"]=!0,s["border-image-source"]=!0,s["border-image-width"]=!0,s["border-left"]=!0,s["border-left-color"]=!0,s["border-left-style"]=!0,s["border-left-width"]=!0,s["border-radius"]=!0,s["border-right"]=!0,s["border-right-color"]=!0,s["border-right-style"]=!0,s["border-right-width"]=!0,s["border-spacing"]=!0,s["border-style"]=!0,s["border-top"]=!0,s["border-top-color"]=!0,s["border-top-left-radius"]=!0,s["border-top-right-radius"]=!0,s["border-top-style"]=!0,s["border-top-width"]=!0,s["border-width"]=!0,s.bottom=!1,s["box-decoration-break"]=!0,s["box-shadow"]=!0,s["box-sizing"]=!0,s["box-snap"]=!0,s["box-suppress"]=!0,s["break-after"]=!0,s["break-before"]=!0,s["break-inside"]=!0,s["caption-side"]=!1,s.chains=!1,s.clear=!0,s.clip=!1,s["clip-path"]=!1,s["clip-rule"]=!1,s.color=!0,s["color-interpolation-filters"]=!0,s["column-count"]=!1,s["column-fill"]=!1,s["column-gap"]=!1,s["column-rule"]=!1,s["column-rule-color"]=!1,s["column-rule-style"]=!1,s["column-rule-width"]=!1,s["column-span"]=!1,s["column-width"]=!1,s.columns=!1,s.contain=!1,s.content=!1,s["counter-increment"]=!1,s["counter-reset"]=!1,s["counter-set"]=!1,s.crop=!1,s.cue=!1,s["cue-after"]=!1,s["cue-before"]=!1,s.cursor=!1,s.direction=!1,s.display=!0,s["display-inside"]=!0,s["display-list"]=!0,s["display-outside"]=!0,s["dominant-baseline"]=!1,s.elevation=!1,s["empty-cells"]=!1,s.filter=!1,s.flex=!1,s["flex-basis"]=!1,s["flex-direction"]=!1,s["flex-flow"]=!1,s["flex-grow"]=!1,s["flex-shrink"]=!1,s["flex-wrap"]=!1,s.float=!1,s["float-offset"]=!1,s["flood-color"]=!1,s["flood-opacity"]=!1,s["flow-from"]=!1,s["flow-into"]=!1,s.font=!0,s["font-family"]=!0,s["font-feature-settings"]=!0,s["font-kerning"]=!0,s["font-language-override"]=!0,s["font-size"]=!0,s["font-size-adjust"]=!0,s["font-stretch"]=!0,s["font-style"]=!0,s["font-synthesis"]=!0,s["font-variant"]=!0,s["font-variant-alternates"]=!0,s["font-variant-caps"]=!0,s["font-variant-east-asian"]=!0,s["font-variant-ligatures"]=!0,s["font-variant-numeric"]=!0,s["font-variant-position"]=!0,s["font-weight"]=!0,s.grid=!1,s["grid-area"]=!1,s["grid-auto-columns"]=!1,s["grid-auto-flow"]=!1,s["grid-auto-rows"]=!1,s["grid-column"]=!1,s["grid-column-end"]=!1,s["grid-column-start"]=!1,s["grid-row"]=!1,s["grid-row-end"]=!1,s["grid-row-start"]=!1,s["grid-template"]=!1,s["grid-template-areas"]=!1,s["grid-template-columns"]=!1,s["grid-template-rows"]=!1,s["hanging-punctuation"]=!1,s.height=!0,s.hyphens=!1,s.icon=!1,s["image-orientation"]=!1,s["image-resolution"]=!1,s["ime-mode"]=!1,s["initial-letters"]=!1,s["inline-box-align"]=!1,s["justify-content"]=!1,s["justify-items"]=!1,s["justify-self"]=!1,s.left=!1,s["letter-spacing"]=!0,s["lighting-color"]=!0,s["line-box-contain"]=!1,s["line-break"]=!1,s["line-grid"]=!1,s["line-height"]=!1,s["line-snap"]=!1,s["line-stacking"]=!1,s["line-stacking-ruby"]=!1,s["line-stacking-shift"]=!1,s["line-stacking-strategy"]=!1,s["list-style"]=!0,s["list-style-image"]=!0,s["list-style-position"]=!0,s["list-style-type"]=!0,s.margin=!0,s["margin-bottom"]=!0,s["margin-left"]=!0,s["margin-right"]=!0,s["margin-top"]=!0,s["marker-offset"]=!1,s["marker-side"]=!1,s.marks=!1,s.mask=!1,s["mask-box"]=!1,s["mask-box-outset"]=!1,s["mask-box-repeat"]=!1,s["mask-box-slice"]=!1,s["mask-box-source"]=!1,s["mask-box-width"]=!1,s["mask-clip"]=!1,s["mask-image"]=!1,s["mask-origin"]=!1,s["mask-position"]=!1,s["mask-repeat"]=!1,s["mask-size"]=!1,s["mask-source-type"]=!1,s["mask-type"]=!1,s["max-height"]=!0,s["max-lines"]=!1,s["max-width"]=!0,s["min-height"]=!0,s["min-width"]=!0,s["move-to"]=!1,s["nav-down"]=!1,s["nav-index"]=!1,s["nav-left"]=!1,s["nav-right"]=!1,s["nav-up"]=!1,s["object-fit"]=!1,s["object-position"]=!1,s.opacity=!1,s.order=!1,s.orphans=!1,s.outline=!1,s["outline-color"]=!1,s["outline-offset"]=!1,s["outline-style"]=!1,s["outline-width"]=!1,s.overflow=!1,s["overflow-wrap"]=!1,s["overflow-x"]=!1,s["overflow-y"]=!1,s.padding=!0,s["padding-bottom"]=!0,s["padding-left"]=!0,s["padding-right"]=!0,s["padding-top"]=!0,s.page=!1,s["page-break-after"]=!1,s["page-break-before"]=!1,s["page-break-inside"]=!1,s["page-policy"]=!1,s.pause=!1,s["pause-after"]=!1,s["pause-before"]=!1,s.perspective=!1,s["perspective-origin"]=!1,s.pitch=!1,s["pitch-range"]=!1,s["play-during"]=!1,s.position=!1,s["presentation-level"]=!1,s.quotes=!1,s["region-fragment"]=!1,s.resize=!1,s.rest=!1,s["rest-after"]=!1,s["rest-before"]=!1,s.richness=!1,s.right=!1,s.rotation=!1,s["rotation-point"]=!1,s["ruby-align"]=!1,s["ruby-merge"]=!1,s["ruby-position"]=!1,s["shape-image-threshold"]=!1,s["shape-outside"]=!1,s["shape-margin"]=!1,s.size=!1,s.speak=!1,s["speak-as"]=!1,s["speak-header"]=!1,s["speak-numeral"]=!1,s["speak-punctuation"]=!1,s["speech-rate"]=!1,s.stress=!1,s["string-set"]=!1,s["tab-size"]=!1,s["table-layout"]=!1,s["text-align"]=!0,s["text-align-last"]=!0,s["text-combine-upright"]=!0,s["text-decoration"]=!0,s["text-decoration-color"]=!0,s["text-decoration-line"]=!0,s["text-decoration-skip"]=!0,s["text-decoration-style"]=!0,s["text-emphasis"]=!0,s["text-emphasis-color"]=!0,s["text-emphasis-position"]=!0,s["text-emphasis-style"]=!0,s["text-height"]=!0,s["text-indent"]=!0,s["text-justify"]=!0,s["text-orientation"]=!0,s["text-overflow"]=!0,s["text-shadow"]=!0,s["text-space-collapse"]=!0,s["text-transform"]=!0,s["text-underline-position"]=!0,s["text-wrap"]=!0,s.top=!1,s.transform=!1,s["transform-origin"]=!1,s["transform-style"]=!1,s.transition=!1,s["transition-delay"]=!1,s["transition-duration"]=!1,s["transition-property"]=!1,s["transition-timing-function"]=!1,s["unicode-bidi"]=!1,s["vertical-align"]=!1,s.visibility=!1,s["voice-balance"]=!1,s["voice-duration"]=!1,s["voice-family"]=!1,s["voice-pitch"]=!1,s["voice-range"]=!1,s["voice-rate"]=!1,s["voice-stress"]=!1,s["voice-volume"]=!1,s.volume=!1,s["white-space"]=!1,s.widows=!1,s.width=!0,s["will-change"]=!1,s["word-break"]=!0,s["word-spacing"]=!0,s["word-wrap"]=!0,s["wrap-flow"]=!1,s["wrap-through"]=!1,s["writing-mode"]=!1,s["z-index"]=!1,s}function mg(s,e,t){}function gg(s,e,t){}var vg=/javascript\s*\:/img;function bg(s,e){return vg.test(e)?"":e}pt.whiteList=Du();pt.getDefaultWhiteList=Du;pt.onAttr=mg;pt.onIgnoreAttr=gg;pt.safeAttrValue=bg;var yg={indexOf:function(s,e){var t,r;if(Array.prototype.indexOf)return s.indexOf(e);for(t=0,r=s.length;t<r;t++)if(s[t]===e)return t;return-1},forEach:function(s,e,t){var r,n;if(Array.prototype.forEach)return s.forEach(e,t);for(r=0,n=s.length;r<n;r++)e.call(t,s[r],r,s)},trim:function(s){return String.prototype.trim?s.trim():s.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(s){return String.prototype.trimRight?s.trimRight():s.replace(/(\s*$)/g,"")}},Qt=yg;function _g(s,e){s=Qt.trimRight(s),s[s.length-1]!==";"&&(s+=";");var t=s.length,r=!1,n=0,o=0,a="";function l(){if(!r){var c=Qt.trim(s.slice(n,o)),u=c.indexOf(":");if(u!==-1){var p=Qt.trim(c.slice(0,u)),m=Qt.trim(c.slice(u+1));if(p){var g=e(n,a.length,p,m,c);g&&(a+=g+"; ")}}}n=o+1}for(;o<t;o++){var h=s[o];if(h==="/"&&s[o+1]==="*"){var d=s.indexOf("*/",o+2);if(d===-1)break;o=d+1,n=o+1,r=!1}else h==="("?r=!0:h===")"?r=!1:h===";"?r||l():h===`
`&&l()}return Qt.trim(a)}var xg=_g,Bi=pt,wg=xg;function bl(s){return s==null}function Cg(s){var e={};for(var t in s)e[t]=s[t];return e}function ku(s){s=Cg(s||{}),s.whiteList=s.whiteList||Bi.whiteList,s.onAttr=s.onAttr||Bi.onAttr,s.onIgnoreAttr=s.onIgnoreAttr||Bi.onIgnoreAttr,s.safeAttrValue=s.safeAttrValue||Bi.safeAttrValue,this.options=s}ku.prototype.process=function(s){if(s=s||"",s=s.toString(),!s)return"";var e=this,t=e.options,r=t.whiteList,n=t.onAttr,o=t.onIgnoreAttr,a=t.safeAttrValue,l=wg(s,function(h,d,c,u,p){var m=r[c],g=!1;if(m===!0?g=m:typeof m=="function"?g=m(u):m instanceof RegExp&&(g=m.test(u)),g!==!0&&(g=!1),u=a(c,u),!!u){var b={position:d,sourcePosition:h,source:p,isWhite:g};if(g){var y=n(c,u,b);return bl(y)?c+":"+u:y}else{var y=o(c,u,b);if(!bl(y))return y}}});return l};var Tg=ku;(function(s,e){var t=pt,r=Tg;function n(a,l){var h=new r(l);return h.process(a)}e=s.exports=n,e.FilterCSS=r;for(var o in t)e[o]=t[o];typeof window<"u"&&(window.filterCSS=s.exports)})(ta,ta.exports);var ka=ta.exports,Ea={indexOf:function(s,e){var t,r;if(Array.prototype.indexOf)return s.indexOf(e);for(t=0,r=s.length;t<r;t++)if(s[t]===e)return t;return-1},forEach:function(s,e,t){var r,n;if(Array.prototype.forEach)return s.forEach(e,t);for(r=0,n=s.length;r<n;r++)e.call(t,s[r],r,s)},trim:function(s){return String.prototype.trim?s.trim():s.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(s){var e=/\s|\n|\t/,t=e.exec(s);return t?t.index:-1}},Sg=ka.FilterCSS,Dg=ka.getDefaultWhiteList,ts=Ea;function Eu(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Nu=new Sg;function kg(s,e,t){}function Eg(s,e,t){}function Ng(s,e,t){}function Og(s,e,t){}function Ou(s){return s.replace(Pg,"&lt;").replace(Ig,"&gt;")}function Ag(s,e,t,r){if(t=Mu(t),e==="href"||e==="src"){if(t=ts.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(e==="background"){if(zi.lastIndex=0,zi.test(t))return""}else if(e==="style"){if(yl.lastIndex=0,yl.test(t)||(_l.lastIndex=0,_l.test(t)&&(zi.lastIndex=0,zi.test(t))))return"";r!==!1&&(r=r||Nu,t=r.process(t))}return t=Fu(t),t}var Pg=/</g,Ig=/>/g,jg=/"/g,Rg=/&quot;/g,Mg=/&#([a-zA-Z0-9]*);?/gim,Fg=/&colon;?/gim,Lg=/&newline;?/gim,zi=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,yl=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,_l=/u\s*r\s*l\s*\(.*/gi;function Au(s){return s.replace(jg,"&quot;")}function Pu(s){return s.replace(Rg,'"')}function Iu(s){return s.replace(Mg,function(t,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function ju(s){return s.replace(Fg,":").replace(Lg," ")}function Ru(s){for(var e="",t=0,r=s.length;t<r;t++)e+=s.charCodeAt(t)<32?" ":s.charAt(t);return ts.trim(e)}function Mu(s){return s=Pu(s),s=Iu(s),s=ju(s),s=Ru(s),s}function Fu(s){return s=Au(s),s=Ou(s),s}function qg(){return""}function Gg(s,e){typeof e!="function"&&(e=function(){});var t=!Array.isArray(s);function r(a){return t?!0:ts.indexOf(s,a)!==-1}var n=[],o=!1;return{onIgnoreTag:function(a,l,h){if(r(a))if(h.isClosing){var d="[/removed]",c=h.position+d.length;return n.push([o!==!1?o:h.position,c]),o=!1,d}else return o||(o=h.position),"[removed]";else return e(a,l,h)},remove:function(a){var l="",h=0;return ts.forEach(n,function(d){l+=a.slice(h,d[0]),h=d[1]}),l+=a.slice(h),l}}}function Hg(s){for(var e="",t=0;t<s.length;){var r=s.indexOf("<!--",t);if(r===-1){e+=s.slice(t);break}e+=s.slice(t,r);var n=s.indexOf("-->",r);if(n===-1)break;t=n+3}return e}function Bg(s){var e=s.split("");return e=e.filter(function(t){var r=t.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}Y.whiteList=Eu();Y.getDefaultWhiteList=Eu;Y.onTag=kg;Y.onIgnoreTag=Eg;Y.onTagAttr=Ng;Y.onIgnoreTagAttr=Og;Y.safeAttrValue=Ag;Y.escapeHtml=Ou;Y.escapeQuote=Au;Y.unescapeQuote=Pu;Y.escapeHtmlEntities=Iu;Y.escapeDangerHtml5Entities=ju;Y.clearNonPrintableCharacter=Ru;Y.friendlyAttrValue=Mu;Y.escapeAttrValue=Fu;Y.onIgnoreTagStripAll=qg;Y.StripTagBody=Gg;Y.stripCommentTag=Hg;Y.stripBlankChar=Bg;Y.cssFilter=Nu;Y.getDefaultCSSWhiteList=Dg;var ps={},ze=Ea;function zg(s){var e=ze.spaceIndex(s),t;return e===-1?t=s.slice(1,-1):t=s.slice(1,e+1),t=ze.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function $g(s){return s.slice(0,2)==="</"}function Ug(s,e,t){var r="",n=0,o=!1,a=!1,l=0,h=s.length,d="",c="";e:for(l=0;l<h;l++){var u=s.charAt(l);if(o===!1){if(u==="<"){o=l;continue}}else if(a===!1){if(u==="<"){r+=t(s.slice(n,l)),o=l,n=l;continue}if(u===">"||l===h-1){r+=t(s.slice(n,o)),c=s.slice(o,l+1),d=zg(c),r+=e(o,r.length,d,c,$g(c)),n=l+1,o=!1;continue}if(u==='"'||u==="'")for(var p=1,m=s.charAt(l-p);m.trim()===""||m==="=";){if(m==="="){a=u;continue e}m=s.charAt(l-++p)}}else if(u===a){a=!1;continue}}return n<h&&(r+=t(s.substr(n))),r}var Vg=/[^a-zA-Z0-9\\_:.-]/gim;function Wg(s,e){var t=0,r=0,n=[],o=!1,a=s.length;function l(p,m){if(p=ze.trim(p),p=p.replace(Vg,"").toLowerCase(),!(p.length<1)){var g=e(p,m||"");g&&n.push(g)}}for(var h=0;h<a;h++){var d=s.charAt(h),c,u;if(o===!1&&d==="="){o=s.slice(t,h),t=h+1,r=s.charAt(t)==='"'||s.charAt(t)==="'"?t:Xg(s,h+1);continue}if(o!==!1&&h===r){if(u=s.indexOf(d,h+1),u===-1)break;c=ze.trim(s.slice(r+1,u)),l(o,c),o=!1,h=u,t=h+1;continue}if(/\s|\n|\t/.test(d))if(s=s.replace(/\s|\n|\t/g," "),o===!1)if(u=Yg(s,h),u===-1){c=ze.trim(s.slice(t,h)),l(c),o=!1,t=h+1;continue}else{h=u-1;continue}else if(u=Kg(s,h-1),u===-1){c=ze.trim(s.slice(t,h)),c=xl(c),l(o,c),o=!1,t=h+1;continue}else continue}return t<s.length&&(o===!1?l(s.slice(t)):l(o,xl(ze.trim(s.slice(t))))),ze.trim(n.join(" "))}function Yg(s,e){for(;e<s.length;e++){var t=s[e];if(t!==" ")return t==="="?e:-1}}function Xg(s,e){for(;e<s.length;e++){var t=s[e];if(t!==" ")return t==="'"||t==='"'?e:-1}}function Kg(s,e){for(;e>0;e--){var t=s[e];if(t!==" ")return t==="="?e:-1}}function Qg(s){return s[0]==='"'&&s[s.length-1]==='"'||s[0]==="'"&&s[s.length-1]==="'"}function xl(s){return Qg(s)?s.substr(1,s.length-2):s}ps.parseTag=Ug;ps.parseAttr=Wg;var Zg=ka.FilterCSS,ye=Y,Lu=ps,Jg=Lu.parseTag,ev=Lu.parseAttr,Xi=Ea;function $i(s){return s==null}function tv(s){var e=Xi.spaceIndex(s);if(e===-1)return{html:"",closing:s[s.length-2]==="/"};s=Xi.trim(s.slice(e+1,-1));var t=s[s.length-1]==="/";return t&&(s=Xi.trim(s.slice(0,-1))),{html:s,closing:t}}function iv(s){var e={};for(var t in s)e[t]=s[t];return e}function sv(s){var e={};for(var t in s)Array.isArray(s[t])?e[t.toLowerCase()]=s[t].map(function(r){return r.toLowerCase()}):e[t.toLowerCase()]=s[t];return e}function qu(s){s=iv(s||{}),s.stripIgnoreTag&&(s.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),s.onIgnoreTag=ye.onIgnoreTagStripAll),s.whiteList||s.allowList?s.whiteList=sv(s.whiteList||s.allowList):s.whiteList=ye.whiteList,s.onTag=s.onTag||ye.onTag,s.onTagAttr=s.onTagAttr||ye.onTagAttr,s.onIgnoreTag=s.onIgnoreTag||ye.onIgnoreTag,s.onIgnoreTagAttr=s.onIgnoreTagAttr||ye.onIgnoreTagAttr,s.safeAttrValue=s.safeAttrValue||ye.safeAttrValue,s.escapeHtml=s.escapeHtml||ye.escapeHtml,this.options=s,s.css===!1?this.cssFilter=!1:(s.css=s.css||{},this.cssFilter=new Zg(s.css))}qu.prototype.process=function(s){if(s=s||"",s=s.toString(),!s)return"";var e=this,t=e.options,r=t.whiteList,n=t.onTag,o=t.onIgnoreTag,a=t.onTagAttr,l=t.onIgnoreTagAttr,h=t.safeAttrValue,d=t.escapeHtml,c=e.cssFilter;t.stripBlankChar&&(s=ye.stripBlankChar(s)),t.allowCommentTag||(s=ye.stripCommentTag(s));var u=!1;t.stripIgnoreTagBody&&(u=ye.StripTagBody(t.stripIgnoreTagBody,o),o=u.onIgnoreTag);var p=Jg(s,function(m,g,b,y,_){var x={sourcePosition:m,position:g,isClosing:_,isWhite:Object.prototype.hasOwnProperty.call(r,b)},w=n(b,y,x);if(!$i(w))return w;if(x.isWhite){if(x.isClosing)return"</"+b+">";var D=tv(y),T=r[b],S=ev(D.html,function(k,P){var B=Xi.indexOf(T,k)!==-1,le=a(b,k,P,B);return $i(le)?B?(P=h(b,k,P,c),P?k+'="'+P+'"':k):(le=l(b,k,P,B),$i(le)?void 0:le):le});return y="<"+b,S&&(y+=" "+S),D.closing&&(y+=" /"),y+=">",y}else return w=o(b,y,x),$i(w)?d(y):w},d);return u&&(p=u.remove(p)),p};var rv=qu;(function(s,e){var t=Y,r=ps,n=rv;function o(l,h){var d=new n(h);return d.process(l)}e=s.exports=o,e.filterXSS=o,e.FilterXSS=n,function(){for(var l in t)e[l]=t[l];for(var h in r)e[h]=r[h]}(),typeof window<"u"&&(window.filterXSS=s.exports);function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=s.exports)})(ea,ea.exports);var nv=ea.exports;const ov=os(nv);var Ui=null;function ia(s,e){var t=e||{preventDefault:!1};if(s.Manager){var r=s,n=function(d,c){var u=Object.create(t);return c&&r.assign(u,c),ia(new r(d,u),u)};return r.assign(n,r),n.Manager=function(d,c){var u=Object.create(t);return c&&r.assign(u,c),ia(new r.Manager(d,u),u)},n}var o=Object.create(s),a=s.element;a.hammer||(a.hammer=[]),a.hammer.push(o),s.on("hammer.input",function(d){(t.preventDefault===!0||t.preventDefault===d.pointerType)&&d.preventDefault(),d.isFirst&&(Ui=d.target)}),o._handlers={},o.on=function(d,c){return l(d).forEach(function(u){var p=o._handlers[u];p||(o._handlers[u]=p=[],s.on(u,h)),p.push(c)}),o},o.off=function(d,c){return l(d).forEach(function(u){var p=o._handlers[u];p&&(p=c?p.filter(function(m){return m!==c}):[],p.length>0?o._handlers[u]=p:(s.off(u,h),delete o._handlers[u]))}),o},o.emit=function(d,c){Ui=c.target,s.emit(d,c)},o.destroy=function(){var d=s.element.hammer,c=d.indexOf(o);c!==-1&&d.splice(c,1),d.length||delete s.element.hammer,o._handlers={},s.destroy()};function l(d){return d.match(/[^ ]+/g)}function h(d){if(d.type!=="hammer.input"){if(d.srcEvent._handled||(d.srcEvent._handled={}),d.srcEvent._handled[d.type])return;d.srcEvent._handled[d.type]=!0}var c=!1;d.stopPropagation=function(){c=!0};var u=d.srcEvent.stopPropagation.bind(d.srcEvent);typeof u=="function"&&(d.srcEvent.stopPropagation=function(){u(),d.stopPropagation()}),d.firstTarget=Ui;for(var p=Ui;p&&!c;){var m=p.hammer;if(m){for(var g,b=0;b<m.length;b++)if(g=m[b]._handlers[d.type],g)for(var y=0;y<g.length&&!c;y++)g[y](d)}p=p.parentNode}}return o}var Gu={exports:{}};(function(s,e){(function(t,r){s.exports=r()})(ie,function(){function t(r){var n=r&&r.preventDefault||!1,o=r&&r.container||window,a={},l={keydown:{},keyup:{}},h={},d;for(d=97;d<=122;d++)h[String.fromCharCode(d)]={code:65+(d-97),shift:!1};for(d=65;d<=90;d++)h[String.fromCharCode(d)]={code:d,shift:!0};for(d=0;d<=9;d++)h[""+d]={code:48+d,shift:!1};for(d=1;d<=12;d++)h["F"+d]={code:111+d,shift:!1};for(d=0;d<=9;d++)h["num"+d]={code:96+d,shift:!1};h["num*"]={code:106,shift:!1},h["num+"]={code:107,shift:!1},h["num-"]={code:109,shift:!1},h["num/"]={code:111,shift:!1},h["num."]={code:110,shift:!1},h.left={code:37,shift:!1},h.up={code:38,shift:!1},h.right={code:39,shift:!1},h.down={code:40,shift:!1},h.space={code:32,shift:!1},h.enter={code:13,shift:!1},h.shift={code:16,shift:void 0},h.esc={code:27,shift:!1},h.backspace={code:8,shift:!1},h.tab={code:9,shift:!1},h.ctrl={code:17,shift:!1},h.alt={code:18,shift:!1},h.delete={code:46,shift:!1},h.pageup={code:33,shift:!1},h.pagedown={code:34,shift:!1},h["="]={code:187,shift:!1},h["-"]={code:189,shift:!1},h["]"]={code:221,shift:!1},h["["]={code:219,shift:!1};var c=function(m){p(m,"keydown")},u=function(m){p(m,"keyup")},p=function(m,g){if(l[g][m.keyCode]!==void 0){for(var b=l[g][m.keyCode],y=0;y<b.length;y++)(b[y].shift===void 0||b[y].shift==!0&&m.shiftKey==!0||b[y].shift==!1&&m.shiftKey==!1)&&b[y].fn(m);n==!0&&m.preventDefault()}};return a.bind=function(m,g,b){if(b===void 0&&(b="keydown"),h[m]===void 0)throw new Error("unsupported key: "+m);l[b][h[m].code]===void 0&&(l[b][h[m].code]=[]),l[b][h[m].code].push({fn:g,shift:h[m].shift})},a.bindAll=function(m,g){g===void 0&&(g="keydown");for(var b in h)h.hasOwnProperty(b)&&a.bind(b,m,g)},a.getKey=function(m){for(var g in h)if(h.hasOwnProperty(g)){if(m.shiftKey==!0&&h[g].shift==!0&&m.keyCode==h[g].code)return g;if(m.shiftKey==!1&&h[g].shift==!1&&m.keyCode==h[g].code)return g;if(m.keyCode==h[g].code&&g=="shift")return g}return"unknown key, currently not supported"},a.unbind=function(m,g,b){if(b===void 0&&(b="keydown"),h[m]===void 0)throw new Error("unsupported key: "+m);if(g!==void 0){var y=[],_=l[b][h[m].code];if(_!==void 0)for(var x=0;x<_.length;x++)_[x].fn==g&&_[x].shift==h[m].shift||y.push(l[b][h[m].code][x]);l[b][h[m].code]=y}else l[b][h[m].code]=[]},a.reset=function(){l={keydown:{},keyup:{}}},a.destroy=function(){l={keydown:{},keyup:{}},o.removeEventListener("keydown",c,!0),o.removeEventListener("keyup",u,!0)},o.addEventListener("keydown",c,!0),o.addEventListener("keyup",u,!0),a}return t})})(Gu);var av=Gu.exports;const lv=os(av);/**
 * vis-timeline and vis-graph2d
 * https://visjs.github.io/vis-timeline/
 *
 * Create a fully customizable, interactive timeline with items and ranges.
 *
 * @version 7.7.3
 * @date    2023-10-27T17:57:57.604Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function hv(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var dv=typeof window<"u"&&window.moment||$,ne=hv(dv);function je(s){if(!s)return!1;let e=s.idProp??s._idProp;return e?Su(e,s):!1}const qs=/^\/?Date\((-?\d+)/i,cv=/^\d+$/;function Na(s,e){let t;if(s!==void 0){if(s===null)return null;if(!e)return s;if(typeof e!="string"&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!s;case"number":case"Number":return de(s)&&!isNaN(Date.parse(s))?$(s).valueOf():Number(s.valueOf());case"string":case"String":return String(s);case"Date":try{return Na(s,"Moment").toDate()}catch(r){throw r instanceof TypeError?new TypeError("Cannot convert object of type "+Jt(s)+" to type "+e):r}case"Moment":if(oi(s))return $(s);if(s instanceof Date)return $(s.valueOf());if($.isMoment(s))return $(s);if(de(s))return t=qs.exec(s),t?$(Number(t[1])):(t=cv.exec(s),t?$(Number(s)):$(s));throw new TypeError("Cannot convert object of type "+Jt(s)+" to type "+e);case"ISODate":if(oi(s))return new Date(s);if(s instanceof Date)return s.toISOString();if($.isMoment(s))return s.toDate().toISOString();if(de(s))return t=qs.exec(s),t?new Date(Number(t[1])).toISOString():$(s).format();throw new Error("Cannot convert object of type "+Jt(s)+" to type ISODate");case"ASPDate":if(oi(s))return"/Date("+s+")/";if(s instanceof Date||$.isMoment(s))return"/Date("+s.valueOf()+")/";if(de(s)){t=qs.exec(s);let r;return t?r=new Date(Number(t[1])).valueOf():r=new Date(s).valueOf(),"/Date("+r+")/"}else throw new Error("Cannot convert object of type "+Jt(s)+" to type ASPDate");default:throw new Error(`Unknown type ${e}`)}}}function Ft(s,e={start:"Date",end:"Date"}){const t=s._idProp,r=new ct({fieldId:t}),n=Cu(s).map(o=>Object.keys(o).reduce((a,l)=>(a[l]=Na(o[l],e[l]),a),{})).to(r);return n.all().start(),{add:(...o)=>s.getDataSet().add(...o),remove:(...o)=>s.getDataSet().remove(...o),update:(...o)=>s.getDataSet().update(...o),updateOnly:(...o)=>s.getDataSet().updateOnly(...o),clear:(...o)=>s.getDataSet().clear(...o),forEach:r.forEach.bind(r),get:r.get.bind(r),getIds:r.getIds.bind(r),off:r.off.bind(r),on:r.on.bind(r),get length(){return r.length},idProp:t,type:e,rawDS:s,coercedDS:r,dispose:()=>n.stop()}}const Hu=s=>{const e=new ov.FilterXSS(s);return t=>e.process(t)},uv=s=>s;let sa=Hu();const fv=s=>{s&&(s.disabled===!0?(sa=uv,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):s.filterOptions&&(sa=Hu(s.filterOptions)))},v={...rg,convert:Na,setupXSSProtection:fv};Object.defineProperty(v,"xss",{get:function(){return sa}});class Re{constructor(e,t){this.options=null,this.props=null}setOptions(e){e&&v.extend(this.options,e)}redraw(){return!1}destroy(){}_isResized(){const e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e}}function ms(s,e,t){if(t&&!Array.isArray(t))return ms(s,e,[t]);if(e.hiddenDates=[],t&&Array.isArray(t)==!0){for(let r=0;r<t.length;r++)if(t[r].repeat===void 0){const n={};n.start=s(t[r].start).toDate().valueOf(),n.end=s(t[r].end).toDate().valueOf(),e.hiddenDates.push(n)}e.hiddenDates.sort((r,n)=>r.start-n.start)}}function gi(s,e,t){if(t&&!Array.isArray(t))return gi(s,e,[t]);if(t&&e.domProps.centerContainer.width!==void 0){ms(s,e,t);const r=s(e.range.start),n=s(e.range.end),a=(e.range.end-e.range.start)/e.domProps.centerContainer.width;for(let u=0;u<t.length;u++)if(t[u].repeat!==void 0){const p=s(t[u].start);let m=s(t[u].end);if(p._d=="Invalid Date")throw new Error(`Supplied start date is not valid: ${t[u].start}`);if(m._d=="Invalid Date")throw new Error(`Supplied end date is not valid: ${t[u].end}`);if(m-p>=4*a){let b=0;const y=n.clone();switch(t[u].repeat){case"daily":p.day()!=m.day()&&(b=1),p.dayOfYear(r.dayOfYear()),p.year(r.year()),p.subtract(7,"days"),m.dayOfYear(r.dayOfYear()),m.year(r.year()),m.subtract(7-b,"days"),y.add(1,"weeks");break;case"weekly":{const _=m.diff(p,"days"),x=p.day();p.date(r.date()),p.month(r.month()),p.year(r.year()),m=p.clone(),p.day(x),m.day(x),m.add(_,"days"),p.subtract(1,"weeks"),m.subtract(1,"weeks"),y.add(1,"weeks");break}case"monthly":p.month()!=m.month()&&(b=1),p.month(r.month()),p.year(r.year()),p.subtract(1,"months"),m.month(r.month()),m.year(r.year()),m.subtract(1,"months"),m.add(b,"months"),y.add(1,"months");break;case"yearly":p.year()!=m.year()&&(b=1),p.year(r.year()),p.subtract(1,"years"),m.year(r.year()),m.subtract(1,"years"),m.add(b,"years"),y.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",t[u].repeat);return}for(;p<y;)switch(e.hiddenDates.push({start:p.valueOf(),end:m.valueOf()}),t[u].repeat){case"daily":p.add(1,"days"),m.add(1,"days");break;case"weekly":p.add(1,"weeks"),m.add(1,"weeks");break;case"monthly":p.add(1,"months"),m.add(1,"months");break;case"yearly":p.add(1,"y"),m.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",t[u].repeat);return}e.hiddenDates.push({start:p.valueOf(),end:m.valueOf()})}}Bu(e);const l=bi(e.range.start,e.hiddenDates),h=bi(e.range.end,e.hiddenDates);let d=e.range.start,c=e.range.end;l.hidden==!0&&(d=e.range.startToFront==!0?l.startDate-1:l.endDate+1),h.hidden==!0&&(c=e.range.endToFront==!0?h.startDate-1:h.endDate+1),(l.hidden==!0||h.hidden==!0)&&e.range._applyRange(d,c)}}function Bu(s){const e=s.hiddenDates,t=[];for(var r=0;r<e.length;r++)for(let n=0;n<e.length;n++)r!=n&&e[n].remove!=!0&&e[r].remove!=!0&&(e[n].start>=e[r].start&&e[n].end<=e[r].end?e[n].remove=!0:e[n].start>=e[r].start&&e[n].start<=e[r].end?(e[r].end=e[n].end,e[n].remove=!0):e[n].end>=e[r].start&&e[n].end<=e[r].end&&(e[r].start=e[n].start,e[n].remove=!0));for(r=0;r<e.length;r++)e[r].remove!==!0&&t.push(e[r]);s.hiddenDates=t,s.hiddenDates.sort((n,o)=>n.start-o.start)}function pv(s){for(let e=0;e<s.length;e++)console.log(e,new Date(s[e].start),new Date(s[e].end),s[e].start,s[e].end,s[e].remove)}function zu(s,e,t){let r=!1;const n=e.current.valueOf();for(let a=0;a<e.hiddenDates.length;a++){const l=e.hiddenDates[a].start;var o=e.hiddenDates[a].end;if(n>=l&&n<o){r=!0;break}}if(r==!0&&n<e._end.valueOf()&&n!=t){const a=s(t),l=s(o);a.year()!=l.year()?e.switchedYear=!0:a.month()!=l.month()?e.switchedMonth=!0:a.dayOfYear()!=l.dayOfYear()&&(e.switchedDay=!0),e.current=l}}function ra(s,e,t){let r;if(s.body.hiddenDates.length==0)return r=s.range.conversion(t),(e.valueOf()-r.offset)*r.scale;{const n=bi(e,s.body.hiddenDates);n.hidden==!0&&(e=n.startDate);const o=It(s.body.hiddenDates,s.range.start,s.range.end);if(e<s.range.start){r=s.range.conversion(t,o);const a=$u(s.body.hiddenDates,e,r.offset);return e=s.options.moment(e).toDate().valueOf(),e=e+a,-(r.offset-e.valueOf())*r.scale}else if(e>s.range.end){const a={start:s.range.start,end:e};return e=oa(s.options.moment,s.body.hiddenDates,a,e),r=s.range.conversion(t,o),(e.valueOf()-r.offset)*r.scale}else return e=oa(s.options.moment,s.body.hiddenDates,s.range,e),r=s.range.conversion(t,o),(e.valueOf()-r.offset)*r.scale}}function na(s,e,t){if(s.body.hiddenDates.length==0){const r=s.range.conversion(t);return new Date(e/r.scale+r.offset)}else{const r=It(s.body.hiddenDates,s.range.start,s.range.end),o=(s.range.end-s.range.start-r)*e/t,a=Uu(s.body.hiddenDates,s.range,o);return new Date(a+o+s.range.start)}}function It(s,e,t){let r=0;for(let n=0;n<s.length;n++){const o=s[n].start,a=s[n].end;o>=e&&a<t&&(r+=a-o)}return r}function $u(s,e,t){let r=0;for(let n=0;n<s.length;n++){const o=s[n].start,a=s[n].end;o>=e&&a<=t&&(r+=a-o)}return r}function oa(s,e,t,r){return r=s(r).toDate().valueOf(),r-=vi(s,e,t,r),r}function vi(s,e,t,r){let n=0;r=s(r).toDate().valueOf();for(let o=0;o<e.length;o++){const a=e[o].start,l=e[o].end;a>=t.start&&l<t.end&&r>=l&&(n+=l-a)}return n}function Uu(s,e,t){let r=0,n=0,o=e.start;for(let a=0;a<s.length;a++){const l=s[a].start,h=s[a].end;if(l>=e.start&&h<e.end){if(n+=l-o,o=h,n>=t)break;r+=h-l}}return r}function $e(s,e,t,r){const n=bi(e,s);return n.hidden==!0?t<0?r==!0?n.startDate-(n.endDate-e)-1:n.startDate-1:r==!0?n.endDate+(e-n.startDate)+1:n.endDate+1:e}function bi(s,e){for(let n=0;n<e.length;n++){var t=e[n].start,r=e[n].end;if(s>=t&&s<r)return{hidden:!0,startDate:t,endDate:r}}return{hidden:!1,startDate:t,endDate:r}}var mv=Object.freeze({__proto__:null,convertHiddenOptions:ms,correctTimeForHidden:oa,getAccumulatedHiddenDuration:Uu,getHiddenDurationBefore:vi,getHiddenDurationBeforeStart:$u,getHiddenDurationBetween:It,getIsHidden:bi,printDates:pv,removeDuplicates:Bu,snapAwayFromHidden:$e,stepOverHiddenDates:zu,toScreen:ra,toTime:na,updateHiddenDates:gi});class Si extends Re{constructor(e,t){super();const r=ne().hours(0).minutes(0).seconds(0).milliseconds(0),n=r.clone().add(-3,"days").valueOf(),o=r.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,t===void 0?(this.start=n,this.end=o):(this.start=t.start||n,this.end=t.end||o),this.rolling=!1,this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:ne,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},this.options=v.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.body.dom.rollingModeBtn.addEventListener("click",this.startRolling.bind(this)),this.setOptions(t)}setOptions(e){if(e){const t=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll"];v.selectiveExtend(t,this.options,e),e.rollingMode&&e.rollingMode.follow&&this.startRolling(),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}}startRolling(){const e=this;function t(){e.stopRolling(),e.rolling=!0;let r=e.end-e.start;const n=v.convert(new Date,"Date").valueOf(),o=e.options.rollingMode&&e.options.rollingMode.offset||.5,a=n-r*o,l=n+r*(1-o),h={animation:!1};e.setRange(a,l,h),r=1/e.conversion(e.body.domProps.center.width).scale/10,r<30&&(r=30),r>1e3&&(r=1e3),e.body.dom.rollingModeBtn.style.visibility="hidden",e.currentTimeTimer=setTimeout(t,r)}t()}stopRolling(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}setRange(e,t,r,n,o){r||(r={}),r.byUser!==!0&&(r.byUser=!1);const a=this,l=e!=null?v.convert(e,"Date").valueOf():null,h=t!=null?v.convert(t,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,r.animation){const c=this.start,u=this.end,p=typeof r.animation=="object"&&"duration"in r.animation?r.animation.duration:500,m=typeof r.animation=="object"&&"easingFunction"in r.animation?r.animation.easingFunction:"easeInOutQuad",g=v.easingFunctions[m];if(!g)throw new Error(`Unknown easing function ${JSON.stringify(m)}. Choose from: ${Object.keys(v.easingFunctions).join(", ")}`);const b=Date.now();let y=!1;const _=()=>{if(!a.props.touch.dragging){const w=Date.now()-b,D=g(w/p),T=w>p,S=T||l===null?l:c+(l-c)*D,k=T||h===null?h:u+(h-u)*D;d=a._applyRange(S,k),gi(a.options.moment,a.body,a.options.hiddenDates),y=y||d;const P={start:new Date(a.start),end:new Date(a.end),byUser:r.byUser,event:r.event};if(o&&o(D,d,T),d&&a.body.emitter.emit("rangechange",P),T){if(y&&(a.body.emitter.emit("rangechanged",P),n))return n()}else a.animationTimer=setTimeout(_,20)}};return _()}else{var d=this._applyRange(l,h);if(gi(this.options.moment,this.body,this.options.hiddenDates),d){const c={start:new Date(this.start),end:new Date(this.end),byUser:r.byUser,event:r.event};if(this.body.emitter.emit("rangechange",c),clearTimeout(a.timeoutID),a.timeoutID=setTimeout(()=>{a.body.emitter.emit("rangechanged",c)},200),n)return n()}}}getMillisecondsPerPixel(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}_cancelAnimation(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}_applyRange(e,t){let r=e!=null?v.convert(e,"Date").valueOf():this.start,n=t!=null?v.convert(t,"Date").valueOf():this.end;const o=this.options.max!=null?v.convert(this.options.max,"Date").valueOf():null,a=this.options.min!=null?v.convert(this.options.min,"Date").valueOf():null;let l;if(isNaN(r)||r===null)throw new Error(`Invalid start "${e}"`);if(isNaN(n)||n===null)throw new Error(`Invalid end "${t}"`);if(n<r&&(n=r),a!==null&&r<a&&(l=a-r,r+=l,n+=l,o!=null&&n>o&&(n=o)),o!==null&&n>o&&(l=n-o,r-=l,n-=l,a!=null&&r<a&&(r=a)),this.options.zoomMin!==null){let d=parseFloat(this.options.zoomMin);d<0&&(d=0),n-r<d&&(this.end-this.start===d&&r>=this.start-.5&&n<=this.end?(r=this.start,n=this.end):(l=d-(n-r),r-=l/2,n+=l/2))}if(this.options.zoomMax!==null){let d=parseFloat(this.options.zoomMax);d<0&&(d=0),n-r>d&&(this.end-this.start===d&&r<this.start&&n>this.end?(r=this.start,n=this.end):(l=n-r-d,r+=l/2,n-=l/2))}const h=this.start!=r||this.end!=n;return!(r>=this.start&&r<=this.end||n>=this.start&&n<=this.end)&&!(this.start>=r&&this.start<=n||this.end>=r&&this.end<=n)&&this.body.emitter.emit("checkRangedItems"),this.start=r,this.end=n,h}getRange(){return{start:this.start,end:this.end}}conversion(e,t){return Si.conversion(this.start,this.end,e,t)}static conversion(e,t,r,n){return n===void 0&&(n=0),r!=0&&t-e!=0?{offset:e,scale:r/(t-e-n)}:{offset:0,scale:1}}_onDragStart(e){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(e)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}_onDrag(e){if(!e||!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging)return;const t=this.options.direction;wl(t);let r=t=="horizontal"?e.deltaX:e.deltaY;r-=this.deltaDifference;let n=this.props.touch.end-this.props.touch.start;const o=It(this.body.hiddenDates,this.start,this.end);n-=o;const a=t=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height;let l;this.options.rtl?l=r/a*n:l=-r/a*n;const h=this.props.touch.start+l,d=this.props.touch.end+l,c=$e(this.body.hiddenDates,h,this.previousDelta-r,!0),u=$e(this.body.hiddenDates,d,this.previousDelta-r,!0);if(c!=h||u!=d){this.deltaDifference+=r,this.props.touch.start=c,this.props.touch.end=u,this._onDrag(e);return}this.previousDelta=r,this._applyRange(h,d);const p=new Date(this.start),m=new Date(this.end);this.body.emitter.emit("rangechange",{start:p,end:m,byUser:!0,event:e}),this.body.emitter.emit("panmove")}_onDragEnd(e){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:e}))}_onMouseWheel(e){let t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail?t=-e.detail/3:e.deltaY&&(t=-e.deltaY/3),!(this.options.zoomKey&&!e[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(e)&&t){const r=this.options.zoomFriction||5;let n;t<0?n=1-t/r:n=1/(1+t/r);let o;if(this.rolling){const a=this.options.rollingMode&&this.options.rollingMode.offset||.5;o=this.start+(this.end-this.start)*a}else{const a=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center);o=this._pointerToDate(a)}this.zoom(n,o,t,e),e.preventDefault()}}_onTouch(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,v.preventDefault(e)}_onPinch(e){if(!(this.options.zoomable&&this.options.moveable))return;v.preventDefault(e),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(e.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();const t=1/(e.scale+this.scaleOffset),r=this.props.touch.centerDate,n=It(this.body.hiddenDates,this.start,this.end),o=vi(this.options.moment,this.body.hiddenDates,this,r),a=n-o;let l=r-o+(this.props.touch.start-(r-o))*t,h=r+a+(this.props.touch.end-(r+a))*t;this.startToFront=1-t<=0,this.endToFront=t-1<=0;const d=$e(this.body.hiddenDates,l,1-t,!0),c=$e(this.body.hiddenDates,h,t-1,!0);(d!=l||c!=h)&&(this.props.touch.start=d,this.props.touch.end=c,this.scaleOffset=1-e.scale,l=d,h=c);const u={animation:!1,byUser:!0,event:e};this.setRange(l,h,u),this.startToFront=!1,this.endToFront=!0}_isInsideRange(e){const t=e.center?e.center.x:e.clientX,r=this.body.dom.centerContainer.getBoundingClientRect(),n=this.options.rtl?t-r.left:r.right-t,o=this.body.util.toTime(n);return o>=this.start&&o<=this.end}_pointerToDate(e){let t;const r=this.options.direction;if(wl(r),r=="horizontal")return this.body.util.toTime(e.x).valueOf();{const n=this.body.domProps.center.height;return t=this.conversion(n),e.y/t.scale+t.offset}}getPointer(e,t){const r=t.getBoundingClientRect();return this.options.rtl?{x:r.right-e.x,y:e.y-r.top}:{x:e.x-r.left,y:e.y-r.top}}zoom(e,t,r,n){t==null&&(t=(this.start+this.end)/2);const o=It(this.body.hiddenDates,this.start,this.end),a=vi(this.options.moment,this.body.hiddenDates,this,t),l=o-a;let h=t-a+(this.start-(t-a))*e,d=t+l+(this.end-(t+l))*e;this.startToFront=!(r>0),this.endToFront=!(-r>0);const c=$e(this.body.hiddenDates,h,r,!0),u=$e(this.body.hiddenDates,d,-r,!0);(c!=h||u!=d)&&(h=c,d=u);const p={animation:!1,byUser:!0,event:n};this.setRange(h,d,p),this.startToFront=!1,this.endToFront=!0}move(e){const t=this.end-this.start,r=this.start+t*e,n=this.end+t*e;this.start=r,this.end=n}moveTo(e){const r=(this.start+this.end)/2-e,n=this.start-r,o=this.end-r,a={animation:!1,byUser:!0,event:null};this.setRange(n,o,a)}destroy(){this.stopRolling()}}function wl(s){if(s!="horizontal"&&s!="vertical")throw new TypeError(`Unknown direction "${s}". Choose "horizontal" or "vertical".`)}function gv(){const s=()=>{};return{on:s,off:s,destroy:s,emit:s,get(e){return{set:s}}}}let aa;if(typeof window<"u"){const s=window.Hammer||uu;aa=ia(s,{preventDefault:"mouse"})}else aa=()=>gv();var te=aa;function Vu(s,e){e.inputHandler=function(t){t.isFirst&&e(t)},s.on("hammer.input",e.inputHandler)}function vv(s,e){return e.inputHandler=function(t){t.isFinal&&e(t)},s.on("hammer.input",e.inputHandler)}function bv(s){const e="pan-y";return s.getTouchAction=function(){return[e]},s}class Ye{constructor(e,t,r,n,o){this.moment=o&&o.moment||ne,this.options=o||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(e,t,r),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(n)?this.hiddenDates=n:n!=null?this.hiddenDates=[n]:this.hiddenDates=[],this.format=Ye.FORMAT}setMoment(e){this.moment=e,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}setFormat(e){const t=v.deepExtend({},Ye.FORMAT);this.format=v.deepExtend(t,e)}setRange(e,t,r){if(!(e instanceof Date)||!(t instanceof Date))throw"No legal start or end date in method setRange";this._start=e!=null?this.moment(e.valueOf()):Date.now(),this._end=t!=null?this.moment(t.valueOf()):Date.now(),this.autoScale&&this.setMinimumStep(r)}start(){this.current=this._start.clone(),this.roundToMinor()}roundToMinor(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"week":case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(this.step!=1){let e=this.current.clone();switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year");break}e.isSame(this.current)||(this.current=this.moment($e(this.hiddenDates,this.current.valueOf(),-1,!0)))}}hasNext(){return this.current.valueOf()<=this._end.valueOf()}next(){const e=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.month()<6?this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!==0&&this.current.add(this.step-this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current.weekday(0),this.current.add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current.add(this.step,"week");else{const t=this.current.clone();t.add(1,"week"),t.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"week":this.current.week()<this.step&&this.current.week(1);break;case"month":this.current.month()<this.step&&this.current.month(0);break}this.current.valueOf()==e&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,zu(this.moment,this,e)}getCurrent(){return this.current.clone()}setScale(e){e&&typeof e.scale=="string"&&(this.scale=e.scale,this.step=e.step>0?e.step:1,this.autoScale=!1)}setAutoScale(e){this.autoScale=e}setMinimumStep(e){if(e==null)return;const t=1e3*60*60*24*30*12,r=1e3*60*60*24*30,n=1e3*60*60*24,o=1e3*60*60,a=1e3*60,l=1e3,h=1;t*1e3>e&&(this.scale="year",this.step=1e3),t*500>e&&(this.scale="year",this.step=500),t*100>e&&(this.scale="year",this.step=100),t*50>e&&(this.scale="year",this.step=50),t*10>e&&(this.scale="year",this.step=10),t*5>e&&(this.scale="year",this.step=5),t>e&&(this.scale="year",this.step=1),r*3>e&&(this.scale="month",this.step=3),r>e&&(this.scale="month",this.step=1),n*7>e&&this.options.showWeekScale&&(this.scale="week",this.step=1),n*2>e&&(this.scale="day",this.step=2),n>e&&(this.scale="day",this.step=1),n/2>e&&(this.scale="weekday",this.step=1),o*4>e&&(this.scale="hour",this.step=4),o>e&&(this.scale="hour",this.step=1),a*15>e&&(this.scale="minute",this.step=15),a*10>e&&(this.scale="minute",this.step=10),a*5>e&&(this.scale="minute",this.step=5),a>e&&(this.scale="minute",this.step=1),l*15>e&&(this.scale="second",this.step=15),l*10>e&&(this.scale="second",this.step=10),l*5>e&&(this.scale="second",this.step=5),l>e&&(this.scale="second",this.step=1),h*200>e&&(this.scale="millisecond",this.step=200),h*100>e&&(this.scale="millisecond",this.step=100),h*50>e&&(this.scale="millisecond",this.step=50),h*10>e&&(this.scale="millisecond",this.step=10),h*5>e&&(this.scale="millisecond",this.step=5),h>e&&(this.scale="millisecond",this.step=1)}static snap(e,t,r){const n=ne(e);if(t=="year"){const o=n.year()+Math.round(n.month()/12);n.year(Math.round(o/r)*r),n.month(0),n.date(0),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0)}else if(t=="month")n.date()>15?(n.date(1),n.add(1,"month")):n.date(1),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0);else if(t=="week")n.weekday()>2?(n.weekday(0),n.add(1,"week")):n.weekday(0),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0);else if(t=="day"){switch(r){case 5:case 2:n.hours(Math.round(n.hours()/24)*24);break;default:n.hours(Math.round(n.hours()/12)*12);break}n.minutes(0),n.seconds(0),n.milliseconds(0)}else if(t=="weekday"){switch(r){case 5:case 2:n.hours(Math.round(n.hours()/12)*12);break;default:n.hours(Math.round(n.hours()/6)*6);break}n.minutes(0),n.seconds(0),n.milliseconds(0)}else if(t=="hour"){switch(r){case 4:n.minutes(Math.round(n.minutes()/60)*60);break;default:n.minutes(Math.round(n.minutes()/30)*30);break}n.seconds(0),n.milliseconds(0)}else if(t=="minute"){switch(r){case 15:case 10:n.minutes(Math.round(n.minutes()/5)*5),n.seconds(0);break;case 5:n.seconds(Math.round(n.seconds()/60)*60);break;default:n.seconds(Math.round(n.seconds()/30)*30);break}n.milliseconds(0)}else if(t=="second")switch(r){case 15:case 10:n.seconds(Math.round(n.seconds()/5)*5),n.milliseconds(0);break;case 5:n.milliseconds(Math.round(n.milliseconds()/1e3)*1e3);break;default:n.milliseconds(Math.round(n.milliseconds()/500)*500);break}else if(t=="millisecond"){const o=r>5?r/2:1;n.milliseconds(Math.round(n.milliseconds()/o)*o)}return n}isMajor(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}const e=this.moment(this.current);switch(this.scale){case"millisecond":return e.milliseconds()==0;case"second":return e.seconds()==0;case"minute":return e.hours()==0&&e.minutes()==0;case"hour":return e.hours()==0;case"weekday":case"day":return this.options.showWeekScale?e.isoWeekday()==1:e.date()==1;case"week":return e.date()==1;case"month":return e.month()==0;case"year":return!1;default:return!1}}getLabelMinor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.minorLabels=="function")return this.format.minorLabels(e,this.scale,this.step);const t=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(e.date()===1&&e.weekday()!==0)return"";default:return t&&t.length>0?this.moment(e).format(t):""}}getLabelMajor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.majorLabels=="function")return this.format.majorLabels(e,this.scale,this.step);const t=this.format.majorLabels[this.scale];return t&&t.length>0?this.moment(e).format(t):""}getClassName(){const e=this.moment,t=this.moment(this.current),r=t.locale?t.locale("en"):t.lang("en"),n=this.step,o=[];function a(u){return u/n%2==0?" vis-even":" vis-odd"}function l(u){return u.isSame(Date.now(),"day")?" vis-today":u.isSame(e().add(1,"day"),"day")?" vis-tomorrow":u.isSame(e().add(-1,"day"),"day")?" vis-yesterday":""}function h(u){return u.isSame(Date.now(),"week")?" vis-current-week":""}function d(u){return u.isSame(Date.now(),"month")?" vis-current-month":""}function c(u){return u.isSame(Date.now(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":o.push(l(r)),o.push(a(r.milliseconds()));break;case"second":o.push(l(r)),o.push(a(r.seconds()));break;case"minute":o.push(l(r)),o.push(a(r.minutes()));break;case"hour":o.push(`vis-h${r.hours()}${this.step==4?"-h"+(r.hours()+4):""}`),o.push(l(r)),o.push(a(r.hours()));break;case"weekday":o.push(`vis-${r.format("dddd").toLowerCase()}`),o.push(l(r)),o.push(h(r)),o.push(a(r.date()));break;case"day":o.push(`vis-day${r.date()}`),o.push(`vis-${r.format("MMMM").toLowerCase()}`),o.push(l(r)),o.push(d(r)),o.push(this.step<=2?l(r):""),o.push(this.step<=2?`vis-${r.format("dddd").toLowerCase()}`:""),o.push(a(r.date()-1));break;case"week":o.push(`vis-week${r.format("w")}`),o.push(h(r)),o.push(a(r.week()));break;case"month":o.push(`vis-${r.format("MMMM").toLowerCase()}`),o.push(d(r)),o.push(a(r.month()));break;case"year":o.push(`vis-year${r.year()}`),o.push(c(r)),o.push(a(r.year()));break}return o.filter(String).join(" ")}}Ye.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};class yi extends Re{constructor(e,t){super(),this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:v.extend({},Ye.FORMAT),moment:ne,timeAxis:null},this.options=v.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(t)}setOptions(e){e&&(v.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e),v.selectiveDeepExtend(["format"],this.options,e),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.axis=e.orientation:typeof e.orientation=="object"&&"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis)),"locale"in e&&(typeof ne.locale=="function"?ne.locale(e.locale):ne.lang(e.locale)))}_create(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}destroy(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}redraw(){const e=this.props,t=this.dom.foreground,r=this.dom.background,n=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,o=t.parentNode!==n;this._calculateCharSize();const a=this.options.showMinorLabels&&this.options.orientation.axis!=="none",l=this.options.showMajorLabels&&this.options.orientation.axis!=="none";e.minorLabelHeight=a?e.minorCharHeight:0,e.majorLabelHeight=l?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=t.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;const h=t.nextSibling,d=r.nextSibling;return t.parentNode&&t.parentNode.removeChild(t),r.parentNode&&r.parentNode.removeChild(r),t.style.height=`${this.props.height}px`,this._repaintLabels(),h?n.insertBefore(t,h):n.appendChild(t),d?this.body.dom.backgroundVertical.insertBefore(r,d):this.body.dom.backgroundVertical.appendChild(r),this._isResized()||o}_repaintLabels(){const e=this.options.orientation.axis,t=v.convert(this.body.range.start,"Number"),r=v.convert(this.body.range.end,"Number"),n=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf();let o=n-vi(this.options.moment,this.body.hiddenDates,this.body.range,n);o-=this.body.util.toTime(0).valueOf();const a=new Ye(new Date(t),new Date(r),o,this.body.hiddenDates,this.options);a.setMoment(this.options.moment),this.options.format&&a.setFormat(this.options.format),this.options.timeAxis&&a.setScale(this.options.timeAxis),this.step=a;const l=this.dom;l.redundant.lines=l.lines,l.redundant.majorTexts=l.majorTexts,l.redundant.minorTexts=l.minorTexts,l.lines=[],l.majorTexts=[],l.minorTexts=[];let h,d,c,u,p,m,g=0,b,y,_,x=0;const w=1e3;let D;for(a.start(),d=a.getCurrent(),u=this.body.util.toScreen(d);a.hasNext()&&x<w;){switch(x++,p=a.isMajor(),D=a.getClassName(),h=d,c=u,a.next(),d=a.getCurrent(),u=this.body.util.toScreen(d),b=g,g=u-c,a.scale){case"week":m=!0;break;default:m=g>=b*.4;break}if(this.options.showMinorLabels&&m){var T=this._repaintMinorText(c,a.getLabelMinor(h),e,D);T.style.width=`${g}px`}p&&this.options.showMajorLabels?(c>0&&(_==null&&(_=c),T=this._repaintMajorText(c,a.getLabelMajor(h),e,D)),y=this._repaintMajorLine(c,g,e,D)):m?y=this._repaintMinorLine(c,g,e,D):y&&(y.style.width=`${parseInt(y.style.width)+g}px`)}if(x===w&&!Cl&&(console.warn(`Something is wrong with the Timeline scale. Limited drawing of grid lines to ${w} lines.`),Cl=!0),this.options.showMajorLabels){const S=this.body.util.toTime(0),k=a.getLabelMajor(S),P=k.length*(this.props.majorCharWidth||10)+10;(_==null||P<_)&&this._repaintMajorText(0,k,e,D)}v.forEach(this.dom.redundant,S=>{for(;S.length;){const k=S.pop();k&&k.parentNode&&k.parentNode.removeChild(k)}})}_repaintMinorText(e,t,r,n){let o=this.dom.redundant.minorTexts.shift();if(!o){const l=document.createTextNode("");o=document.createElement("div"),o.appendChild(l),this.dom.foreground.appendChild(o)}this.dom.minorTexts.push(o),o.innerHTML=v.xss(t);let a=r=="top"?this.props.majorLabelHeight:0;return this._setXY(o,e,a),o.className=`vis-text vis-minor ${n}`,o}_repaintMajorText(e,t,r,n){let o=this.dom.redundant.majorTexts.shift();if(!o){const l=document.createElement("div");o=document.createElement("div"),o.appendChild(l),this.dom.foreground.appendChild(o)}o.childNodes[0].innerHTML=v.xss(t),o.className=`vis-text vis-major ${n}`;let a=r=="top"?0:this.props.minorLabelHeight;return this._setXY(o,e,a),this.dom.majorTexts.push(o),o}_setXY(e,t,r){const n=this.options.rtl?t*-1:t;e.style.transform=`translate(${n}px, ${r}px)`}_repaintMinorLine(e,t,r,n){let o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);const a=this.props;o.style.width=`${t}px`,o.style.height=`${a.minorLineHeight}px`;let l=r=="top"?a.majorLabelHeight:this.body.domProps.top.height,h=e-a.minorLineWidth/2;return this._setXY(o,h,l),o.className=`vis-grid ${this.options.rtl?"vis-vertical-rtl":"vis-vertical"} vis-minor ${n}`,o}_repaintMajorLine(e,t,r,n){let o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);const a=this.props;o.style.width=`${t}px`,o.style.height=`${a.majorLineHeight}px`;let l=r=="top"?0:this.body.domProps.top.height,h=e-a.majorLineWidth/2;return this._setXY(o,h,l),o.className=`vis-grid ${this.options.rtl?"vis-vertical-rtl":"vis-vertical"} vis-major ${n}`,o}_calculateCharSize(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}var Cl=!1;function me(s){this.active=!1,this.dom={container:s},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=te(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var e=this,t=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];t.forEach(function(r){e.hammer.on(r,function(n){n.stopPropagation()})}),document&&document.body&&(this.onClick=function(r){yv(r.target,s)||e.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=lv(),this.escListener=this.deactivate.bind(this)}fa(me.prototype);me.current=null;me.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null};me.prototype.activate=function(){me.current&&me.current.deactivate(),me.current=this,this.active=!0,this.dom.overlay.style.display="none",v.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)};me.prototype.deactivate=function(){me.current===this&&(me.current=null),this.active=!1,this.dom.overlay.style.display="",v.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")};me.prototype._onTapOverlay=function(s){this.activate(),s.stopPropagation()};function yv(s,e){for(;s;){if(s===e)return!0;s=s.parentNode}return!1}const Oa={current:"current",time:"time",deleteSelected:"Delete selected"},_v=Oa,xv=Oa,Aa={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},wv=Aa,Cv=Aa,Pa={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},Tv=Pa,Sv=Pa,Wu={current:"Aktuelle",time:"Zeit",deleteSelected:"Lsche Auswahl"},Dv=Wu,gs={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},kv=gs,Ev=gs,Nv=gs,Yu={current:"corriente",time:"hora",deleteSelected:"Eliminar seleccin"},Ov=Yu,Xu={current:"",time:"",deleteSelected:" "},Av=Xu,Ku={current:"",time:"",deleteSelected:" "},Pv=Ku,Qu={current:"aktualny",time:"czas",deleteSelected:"Usu wybrane"},Iv=Qu,Ia={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},jv=Ia,Rv=Ia,Zu={current:"",time:"",deleteSelected:""},Mv=Zu,Ju={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},Fv=Ju,vs={current:"nvrende",time:"tid",deleteSelected:"Slett valgte"},Lv=vs,qv=vs,Gv=vs,ef={current:"einamas",time:"laikas",deleteSelected:"Paalinti pasirinkt"},Hv=ef,Lt={en:Oa,en_EN:_v,en_US:xv,it:Aa,it_IT:wv,it_CH:Cv,nl:Pa,nl_NL:Tv,nl_BE:Sv,de:Wu,de_DE:Dv,fr:gs,fr_FR:kv,fr_CA:Ev,fr_BE:Nv,es:Yu,es_ES:Ov,uk:Xu,uk_UA:Av,ru:Ku,ru_RU:Pv,pl:Qu,pl_PL:Iv,pt:Ia,pt_BR:jv,pt_PT:Rv,ja:Zu,ja_JP:Mv,lt:ef,lt_LT:Hv,sv:Ju,sv_SE:Fv,nb:vs,nn:qv,nb_NO:Lv,nn_NO:Gv};class bs extends Re{constructor(e,t){super(),this.body=e,this.defaultOptions={moment:ne,locales:Lt,locale:"en",id:void 0,title:void 0},this.options=v.extend({},this.defaultOptions),this.setOptions(t),this.options.locales=v.extend({},Lt,this.options.locales);const r=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(n=>{this.options.locales[n]=v.extend({},r,this.options.locales[n])}),t&&t.time!=null?this.customTime=t.time:this.customTime=new Date,this.eventParams={},this._create()}setOptions(e){e&&v.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,e)}_create(){const e=document.createElement("div");e["custom-time"]=this,e.className=`vis-custom-time ${this.options.id||""}`,e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e;const t=document.createElement("div");t.style.position="relative",t.style.top="0px",this.options.rtl?t.style.right="-10px":t.style.left="-10px",t.style.height="100%",t.style.width="20px";function r(n){this.body.range._onMouseWheel(n)}t.addEventListener?(t.addEventListener("mousewheel",r.bind(this),!1),t.addEventListener("DOMMouseScroll",r.bind(this),!1)):t.attachEvent("onmousewheel",r.bind(this)),e.appendChild(t),this.hammer=new te(t),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:te.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}destroy(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}redraw(){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));const t=this.body.util.toScreen(this.customTime);let r=this.options.locales[this.options.locale];r||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),r=this.options.locales.en);let n=this.options.title;return n===void 0?(n=`${r.time}: ${this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")}`,n=n.charAt(0).toUpperCase()+n.substring(1)):typeof n=="function"&&(n=n.call(this,this.customTime)),this.options.rtl?this.bar.style.right=`${t}px`:this.bar.style.left=`${t}px`,this.bar.title=n,!1}hide(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}setCustomTime(e){this.customTime=v.convert(e,"Date"),this.redraw()}getCustomTime(){return new Date(this.customTime.valueOf())}setCustomMarker(e,t){this.marker&&this.bar.removeChild(this.marker),this.marker=document.createElement("div"),this.marker.className="vis-custom-time-marker",this.marker.innerHTML=v.xss(e),this.marker.style.position="absolute",t&&(this.marker.setAttribute("contenteditable","true"),this.marker.addEventListener("pointerdown",function(){this.marker.focus()}),this.marker.addEventListener("input",this._onMarkerChange.bind(this)),this.marker.title=e,this.marker.addEventListener("blur",(function(r){this.title!=r.target.innerHTML&&(this._onMarkerChanged(r),this.title=r.target.innerHTML)}).bind(this))),this.bar.appendChild(this.marker)}setCustomTitle(e){this.options.title=e}_onDragStart(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation()}_onDrag(e){if(!this.eventParams.dragging)return;let t=this.options.rtl?-1*e.deltaX:e.deltaX;const r=this.body.util.toScreen(this.eventParams.customTime)+t,n=this.body.util.toTime(r),o=this.body.util.getScale(),a=this.body.util.getStep(),l=this.options.snap,h=l?l(n,o,a):n;this.setCustomTime(h),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation()}_onDragEnd(e){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation())}_onMarkerChange(e){this.body.emitter.emit("markerchange",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}_onMarkerChanged(e){this.body.emitter.emit("markerchanged",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}static customTimeFromTarget(e){let t=e.target;for(;t;){if(t.hasOwnProperty("custom-time"))return t["custom-time"];t=t.parentNode}return null}}class ot{_create(e){this.dom={},this.dom.container=e,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",()=>{this.initialDrawDone===!0&&this._redraw()}),this.on("rangechanged",()=>{this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}),this.on("touch",this._onTouch.bind(this)),this.on("panmove",this._onDrag.bind(this));const t=this;this._origRedraw=this._redraw.bind(this),this._redraw=v.throttle(this._origRedraw),this.on("_change",u=>{t.itemSet&&t.itemSet.initialItemSetDrawn&&u&&u.queue==!0?t._redraw():t._origRedraw()}),this.hammer=new te(this.dom.root);const r=this.hammer.get("pinch").set({enable:!0});r&&bv(r),this.hammer.get("pan").set({threshold:5,direction:te.DIRECTION_ALL}),this.timelineListeners={},["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(u=>{const p=m=>{t.isActive()&&t.emit(u,m)};t.hammer.on(u,p),t.timelineListeners[u]=p}),Vu(this.hammer,u=>{t.emit("touch",u)}),vv(this.hammer,u=>{t.emit("release",u)});function o(u){this.isActive()&&this.emit("mousewheel",u);let g=0,b=0;if("detail"in u&&(b=u.detail*-1),"wheelDelta"in u&&(b=u.wheelDelta),"wheelDeltaY"in u&&(b=u.wheelDeltaY),"wheelDeltaX"in u&&(g=u.wheelDeltaX*-1),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(g=b*-1,b=0),"deltaY"in u&&(b=u.deltaY*-1),"deltaX"in u&&(g=u.deltaX),u.deltaMode&&(u.deltaMode===1?(g*=40,b*=40):(g*=40,b*=800)),this.options.preferZoom){if(!this.options.zoomKey||u[this.options.zoomKey])return}else if(this.options.zoomKey&&u[this.options.zoomKey])return;if(!(!this.options.verticalScroll&&!this.options.horizontalScroll)){if(this.options.verticalScroll&&Math.abs(b)>=Math.abs(g)){const y=this.props.scrollTop,_=y+b;this.isActive()&&this._setScrollTop(_)!==y&&(this._redraw(),this.emit("scroll",u),u.preventDefault())}else if(this.options.horizontalScroll){const _=(Math.abs(g)>=Math.abs(b)?g:b)/120*(this.range.end-this.range.start)/20,x=this.range.start+_,w=this.range.end+_,D={animation:!1,byUser:!0,event:u};this.range.setRange(x,w,D),u.preventDefault()}}}const a="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(a,o.bind(this),!1),this.dom.top.addEventListener(a,o.bind(this),!1),this.dom.bottom.addEventListener(a,o.bind(this),!1);function l(u){if(t.options.verticalScroll&&(u.preventDefault(),t.isActive())){const p=-u.target.scrollTop;t._setScrollTop(p),t._redraw(),t.emit("scrollSide",u)}}this.dom.left.parentNode.addEventListener("scroll",l.bind(this)),this.dom.right.parentNode.addEventListener("scroll",l.bind(this));let h=!1;function d(u){if(u.preventDefault&&(t.emit("dragover",t.getEventProperties(u)),u.preventDefault()),u.target.className.indexOf("timeline")>-1&&!h)return u.dataTransfer.dropEffect="move",h=!0,!1}function c(u){u.preventDefault&&u.preventDefault(),u.stopPropagation&&u.stopPropagation();try{var p=JSON.parse(u.dataTransfer.getData("text"));if(!p||!p.content)return}catch{return!1}return h=!1,u.center={x:u.clientX,y:u.clientY},p.target!=="item"?t.itemSet._onAddItem(u):t.itemSet._onDropObjectOnItem(u),t.emit("drop",t.getEventProperties(u)),!1}if(this.dom.center.addEventListener("dragover",d.bind(this),!1),this.dom.center.addEventListener("drop",c.bind(this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root),e.appendChild(this.dom.loadingScreen)}setOptions(e){if(e){const t=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","verticalScroll","longSelectPressTime","snap"];if(v.selectiveExtend(t,this.options,e),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),typeof this.options.orientation!="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation={item:e.orientation,axis:e.orientation}:typeof e.orientation=="object"&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){const r=this.timeAxis2=new yi(this.body,this.options);r.setOptions=n=>{const o=n?v.extend({},n):{};o.orientation="top",yi.prototype.setOptions.call(r,o)},this.components.push(r)}}else if(this.timeAxis2){const r=this.components.indexOf(this.timeAxis2);r!==-1&&this.components.splice(r,1),this.timeAxis2.destroy(),this.timeAxis2=null}typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&ms(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new me(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(this.components.forEach(t=>t.setOptions(e)),"configure"in e){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);const t=v.deepExtend({},this.options);this.components.forEach(r=>{v.deepExtend(t,r.options)}),this.configurator.setModuleOptions({global:t})}this._redraw()}isActive(){return!this.activator||this.activator.active}destroy(){this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(const e in this.timelineListeners)this.timelineListeners.hasOwnProperty(e)&&delete this.timelineListeners[e];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,this.components.forEach(e=>e.destroy()),this.body=null}setCustomTime(e,t){const r=this.customTimes.filter(n=>t===n.options.id);if(r.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(t)}`);r.length>0&&r[0].setCustomTime(e)}getCustomTime(e){const t=this.customTimes.filter(r=>r.options.id===e);if(t.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(e)}`);return t[0].getCustomTime()}setCustomTimeMarker(e,t,r){const n=this.customTimes.filter(o=>o.options.id===t);if(n.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(t)}`);n.length>0&&n[0].setCustomMarker(e,r)}setCustomTimeTitle(e,t){const r=this.customTimes.filter(n=>n.options.id===t);if(r.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(t)}`);if(r.length>0)return r[0].setCustomTitle(e)}getEventProperties(e){return{event:e}}addCustomTime(e,t){const r=e!==void 0?v.convert(e,"Date"):new Date;if(this.customTimes.some(a=>a.options.id===t))throw new Error(`A custom time with id ${JSON.stringify(t)} already exists`);const o=new bs(this.body,v.extend({},this.options,{time:r,id:t,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(o),this.components.push(o),this._redraw(),t}removeCustomTime(e){const t=this.customTimes.filter(r=>r.options.id===e);if(t.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(e)}`);t.forEach(r=>{this.customTimes.splice(this.customTimes.indexOf(r),1),this.components.splice(this.components.indexOf(r),1),r.destroy()})}getVisibleItems(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}getItemsAtCurrentTime(e){return this.time=e,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}getVisibleGroups(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}fit(e,t){const r=this.getDataRange();if(r.min===null&&r.max===null)return;const n=r.max-r.min,o=new Date(r.min.valueOf()-n*.01),a=new Date(r.max.valueOf()+n*.01),l=e&&e.animation!==void 0?e.animation:!0;this.range.setRange(o,a,{animation:l},t)}getDataRange(){throw new Error("Cannot invoke abstract method getDataRange")}setWindow(e,t,r,n){typeof arguments[2]=="function"&&(n=arguments[2],r={});let o,a;arguments.length==1?(a=arguments[0],o=a.animation!==void 0?a.animation:!0,this.range.setRange(a.start,a.end,{animation:o})):arguments.length==2&&typeof arguments[1]=="function"?(a=arguments[0],n=arguments[1],o=a.animation!==void 0?a.animation:!0,this.range.setRange(a.start,a.end,{animation:o},n)):(o=r&&r.animation!==void 0?r.animation:!0,this.range.setRange(e,t,{animation:o},n))}moveTo(e,t,r){typeof arguments[1]=="function"&&(r=arguments[1],t={});const n=this.range.end-this.range.start,o=v.convert(e,"Date").valueOf(),a=o-n/2,l=o+n/2,h=t&&t.animation!==void 0?t.animation:!0;this.range.setRange(a,l,{animation:h},r)}getWindow(){const e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}}zoomIn(e,t,r){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(r=arguments[1],t={});const n=this.getWindow(),o=n.start.valueOf(),a=n.end.valueOf(),l=a-o,h=l/(1+e),d=(l-h)/2,c=o+d,u=a-d;this.setWindow(c,u,t,r)}zoomOut(e,t,r){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(r=arguments[1],t={});const n=this.getWindow(),o=n.start.valueOf(),a=n.end.valueOf(),l=a-o,h=o-l*e/2,d=a+l*e/2;this.setWindow(h,d,t,r)}redraw(){this._redraw()}_redraw(){this.redrawCount++;const e=this.dom;if(!e||!e.container||e.root.offsetWidth==0)return;let t=!1;const r=this.options,n=this.props;gi(this.options.moment,this.body,this.options.hiddenDates),r.orientation=="top"?(v.addClassName(e.root,"vis-top"),v.removeClassName(e.root,"vis-bottom")):(v.removeClassName(e.root,"vis-top"),v.addClassName(e.root,"vis-bottom")),r.rtl?(v.addClassName(e.root,"vis-rtl"),v.removeClassName(e.root,"vis-ltr")):(v.addClassName(e.root,"vis-ltr"),v.removeClassName(e.root,"vis-rtl")),e.root.style.maxHeight=v.option.asSize(r.maxHeight,""),e.root.style.minHeight=v.option.asSize(r.minHeight,""),e.root.style.width=v.option.asSize(r.width,"");const o=e.root.offsetWidth;n.border.left=1,n.border.right=1,n.border.top=1,n.border.bottom=1,n.center.height=e.center.offsetHeight,n.left.height=e.left.offsetHeight,n.right.height=e.right.offsetHeight,n.top.height=e.top.clientHeight||-n.border.top,n.bottom.height=Math.round(e.bottom.getBoundingClientRect().height)||e.bottom.clientHeight||-n.border.bottom;const a=Math.max(n.left.height,n.center.height,n.right.height),l=n.top.height+a+n.bottom.height+n.border.top+n.border.bottom;e.root.style.height=v.option.asSize(r.height,`${l}px`),n.root.height=e.root.offsetHeight,n.background.height=n.root.height;const h=n.root.height-n.top.height-n.bottom.height;n.centerContainer.height=h,n.leftContainer.height=h,n.rightContainer.height=n.leftContainer.height,n.root.width=o,n.background.width=n.root.width,this.initialDrawDone||(n.scrollbarWidth=v.getScrollBarWidth());const d=e.leftContainer.clientWidth,c=e.rightContainer.clientWidth;r.verticalScroll?r.rtl?(n.left.width=d||-n.border.left,n.right.width=c+n.scrollbarWidth||-n.border.right):(n.left.width=d+n.scrollbarWidth||-n.border.left,n.right.width=c||-n.border.right):(n.left.width=d||-n.border.left,n.right.width=c||-n.border.right),this._setDOM();let u=this._updateScrollTop();r.orientation.item!="top"&&(u+=Math.max(n.centerContainer.height-n.center.height-n.border.top-n.border.bottom,0)),e.center.style.transform=`translateY(${u}px)`;const p=n.scrollTop==0?"hidden":"",m=n.scrollTop==n.scrollTopMin?"hidden":"";e.shadowTop.style.visibility=p,e.shadowBottom.style.visibility=m,e.shadowTopLeft.style.visibility=p,e.shadowBottomLeft.style.visibility=m,e.shadowTopRight.style.visibility=p,e.shadowBottomRight.style.visibility=m,r.verticalScroll&&(e.rightContainer.className="vis-panel vis-right vis-vertical-scroll",e.leftContainer.className="vis-panel vis-left vis-vertical-scroll",e.shadowTopRight.style.visibility="hidden",e.shadowBottomRight.style.visibility="hidden",e.shadowTopLeft.style.visibility="hidden",e.shadowBottomLeft.style.visibility="hidden",e.left.style.top="0px",e.right.style.top="0px"),(!r.verticalScroll||n.center.height<n.centerContainer.height)&&(e.left.style.top=`${u}px`,e.right.style.top=`${u}px`,e.rightContainer.className=e.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),e.leftContainer.className=e.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),n.left.width=d||-n.border.left,n.right.width=c||-n.border.right,this._setDOM());const g=n.center.height>n.centerContainer.height;this.hammer.get("pan").set({direction:g?te.DIRECTION_ALL:te.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.components.forEach(y=>{t=y.redraw()||t});const b=5;if(t)if(this.redrawCount<b){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}_setDOM(){const e=this.props,t=this.dom;e.leftContainer.width=e.left.width,e.rightContainer.width=e.right.width;const r=e.root.width-e.left.width-e.right.width;e.center.width=r,e.centerContainer.width=r,e.top.width=r,e.bottom.width=r,t.background.style.height=`${e.background.height}px`,t.backgroundVertical.style.height=`${e.background.height}px`,t.backgroundHorizontal.style.height=`${e.centerContainer.height}px`,t.centerContainer.style.height=`${e.centerContainer.height}px`,t.leftContainer.style.height=`${e.leftContainer.height}px`,t.rightContainer.style.height=`${e.rightContainer.height}px`,t.background.style.width=`${e.background.width}px`,t.backgroundVertical.style.width=`${e.centerContainer.width}px`,t.backgroundHorizontal.style.width=`${e.background.width}px`,t.centerContainer.style.width=`${e.center.width}px`,t.top.style.width=`${e.top.width}px`,t.bottom.style.width=`${e.bottom.width}px`,t.background.style.left="0",t.background.style.top="0",t.backgroundVertical.style.left=`${e.left.width+e.border.left}px`,t.backgroundVertical.style.top="0",t.backgroundHorizontal.style.left="0",t.backgroundHorizontal.style.top=`${e.top.height}px`,t.centerContainer.style.left=`${e.left.width}px`,t.centerContainer.style.top=`${e.top.height}px`,t.leftContainer.style.left="0",t.leftContainer.style.top=`${e.top.height}px`,t.rightContainer.style.left=`${e.left.width+e.center.width}px`,t.rightContainer.style.top=`${e.top.height}px`,t.top.style.left=`${e.left.width}px`,t.top.style.top="0",t.bottom.style.left=`${e.left.width}px`,t.bottom.style.top=`${e.top.height+e.centerContainer.height}px`,t.center.style.left="0",t.left.style.left="0",t.right.style.left="0"}setCurrentTime(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)}getCurrentTime(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}_toTime(e){return na(this,e,this.props.center.width)}_toGlobalTime(e){return na(this,e,this.props.root.width)}_toScreen(e){return ra(this,e,this.props.center.width)}_toGlobalScreen(e){return ra(this,e,this.props.root.width)}_initAutoResize(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}_startAutoResize(){const e=this;this._stopAutoResize(),this._onResize=()=>{if(e.options.autoResize!=!0){e._stopAutoResize();return}if(e.dom.root){const t=e.dom.root.offsetHeight,r=e.dom.root.offsetWidth;(r!=e.props.lastWidth||t!=e.props.lastHeight)&&(e.props.lastWidth=r,e.props.lastHeight=t,e.props.scrollbarWidth=v.getScrollBarWidth(),e.body.emitter.emit("_change"))}},window.addEventListener("resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)}_stopAutoResize(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(window.removeEventListener("resize",this._onResize),this._onResize=null)}_onTouch(e){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}_onPinch(e){this.touch.allowDragging=!1}_onDrag(e){if(!e||!this.touch.allowDragging)return;const t=e.deltaY,r=this._getScrollTop(),n=this._setScrollTop(this.touch.initialScrollTop+t);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),n!=r&&this.emit("verticalDrag")}_setScrollTop(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop}_updateScrollTop(){const e=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return e!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}_getScrollTop(){return this.props.scrollTop}_createConfigurator(){throw new Error("Cannot invoke abstract method _createConfigurator")}}fa(ot.prototype);class ja extends Re{constructor(e,t){super(),this.body=e,this.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:ne,locales:Lt,locale:"en"},this.options=v.extend({},this.defaultOptions),this.setOptions(t),this.options.locales=v.extend({},Lt,this.options.locales);const r=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(n=>{this.options.locales[n]=v.extend({},r,this.options.locales[n])}),this.offset=0,this._create()}_create(){const e=document.createElement("div");e.className="vis-current-time",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e}destroy(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}setOptions(e){e&&v.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,e)}redraw(){if(this.options.showCurrentTime){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar),this.start());let t=this.options.moment(Date.now()+this.offset);this.options.alignCurrentTime&&(t=t.startOf(this.options.alignCurrentTime));const r=this.body.util.toScreen(t);let n=this.options.locales[this.options.locale];n||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),n=this.options.locales.en);let o=`${n.current} ${n.time}: ${t.format("dddd, MMMM Do YYYY, H:mm:ss")}`;o=o.charAt(0).toUpperCase()+o.substring(1),this.options.rtl?this.bar.style.transform=`translateX(${r*-1}px)`:this.bar.style.transform=`translateX(${r}px)`,this.bar.title=o}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}start(){const e=this;function t(){e.stop();let n=1/e.body.range.conversion(e.body.domProps.center.width).scale/10;n<30&&(n=30),n>1e3&&(n=1e3),e.redraw(),e.body.emitter.emit("currentTimeTick"),e.currentTimeTimer=setTimeout(t,n)}t()}stop(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}setCurrentTime(e){const t=v.convert(e,"Date").valueOf(),r=Date.now();this.offset=t-r,this.redraw()}getCurrentTime(){return new Date(Date.now()+this.offset)}}const he=.001;function tf(s){s.sort((e,t)=>e.data.start-t.data.start)}function sf(s){s.sort((e,t)=>{const r="end"in e.data?e.data.end:e.data.start,n="end"in t.data?t.data.end:t.data.start;return r-n})}function la(s,e,t,r){return Ra(s,e.item,!1,o=>o.stack&&(t||o.top===null),o=>o.stack,o=>e.axis,r)===null}function rf(s,e,t){const r=Ra(s,e.item,!1,n=>n.stack,n=>!0,n=>n.baseTop);t.height=r-t.top+.5*e.item.vertical}function nf(s,e,t,r){for(let n=0;n<s.length;n++)if(s[n].data.subgroup==null)s[n].top=e.item.vertical;else if(s[n].data.subgroup!==void 0&&r){let o=0;for(const a in t)t.hasOwnProperty(a)&&t[a].visible==!0&&t[a].index<t[s[n].data.subgroup].index&&(o+=t[a].height,t[s[n].data.subgroup].top=o);s[n].top=o+.5*e.item.vertical}r||of(s,e,t)}function of(s,e,t){Ra(Object.values(t).sort((r,n)=>r.index>n.index?1:r.index<n.index?-1:0),{vertical:0},!0,r=>!0,r=>!0,r=>0);for(let r=0;r<s.length;r++)s[r].data.subgroup!==void 0&&(s[r].top=t[s[r].data.subgroup].top+.5*e.item.vertical)}function ha(s,e,t){let r=!1;const n=[];for(var o in t)t[o].hasOwnProperty("index")?n[t[o].index]=o:n.push(o);for(let a=0;a<n.length;a++)if(o=n[a],t.hasOwnProperty(o)){r=r||t[o].stack,t[o].top=0;for(const h in t)t[h].visible&&t[o].index>t[h].index&&(t[o].top+=t[h].height);const l=s[o];for(let h=0;h<l.length;h++)l[h].data.subgroup!==void 0&&(l[h].top=t[l[h].data.subgroup].top+.5*e.item.vertical,t[o].stack&&(l[h].baseTop=l[h].top));r&&t[o].stack&&rf(s[o],e,t[o])}}function Ra(s,e,t,r,n,o,a){let l=_=>_.start,h=_=>_.end;t||(!!(s[0]&&s[0].options.rtl)?l=x=>x.right:l=x=>x.left,h=x=>l(x)+x.width+e.horizontal);const d=[],c=[];let u=null,p=0;for(const _ of s)if(r(_))d.push(_);else if(n(_)){const x=l(_);u!==null&&x<u-he&&(p=0),u=x,p=Vi(c,w=>l(w)-he>x,p),c.splice(p,0,_),p++}u=null;let m=null;p=0;let g=0,b=0,y=0;for(;d.length>0;){const _=d.shift();_.top=o(_);const x=l(_),w=h(_);u!==null&&x<u-he&&(g=0,b=0,p=0,m=null),u=x,g=Vi(c,S=>x<h(S)-he,g),(m===null||m<w-he)&&(b=Vi(c,S=>w<l(S)-he,Math.max(g,b))),m!==null&&m-he>w&&(b=zv(c,S=>w+he>=l(S),g,b)+1);const D=c.slice(g,b).filter(S=>x<h(S)-he&&w-he>l(S)).sort((S,k)=>S.top-k.top);for(let S=0;S<D.length;S++){const k=D[S];Bv(_,k,e)&&(_.top=k.top+k.height+e.vertical)}n(_)&&(p=Vi(c,S=>l(S)-he>x,p),c.splice(p,0,_),p++);const T=_.top+_.height;if(T>y&&(y=T),a&&a())return null}return y}function Bv(s,e,t){return s.top-t.vertical+he<e.top+e.height&&s.top+s.height+t.vertical-he>e.top}function Vi(s,e,t){t||(t=0);const r=s.slice(t).findIndex(e);return r===-1?s.length:r+t}function zv(s,e,t,r){for(t||(t=0),r||(r=s.length),i=r-1;i>=t;i--)if(e(s[i]))return i;return t-1}var $v=Object.freeze({__proto__:null,nostack:nf,orderByEnd:sf,orderByStart:tf,stack:la,stackSubgroups:of,stackSubgroupsWithInnerStack:ha,substack:rf});const Uv="__ungrouped__",Vv="__background__",Tl={UNGROUPED:Uv,BACKGROUND:Vv};class is{constructor(e,t,r){if(this.groupId=e,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=r,this.isVisible=null,this.stackDirty=!0,this._disposeCallbacks=[],t&&t.nestedGroups&&(this.nestedGroups=t.nestedGroups,t.showNested==!1?this.showNested=!1:this.showNested=!0),t&&t.subgroupStack)if(typeof t.subgroupStack=="boolean")this.doInnerStack=t.subgroupStack,this.subgroupStackAll=t.subgroupStack;else for(const o in t.subgroupStack)this.subgroupStack[o]=t.subgroupStack[o],this.doInnerStack=this.doInnerStack||t.subgroupStack[o];t&&t.heightMode?this.heightMode=t.heightMode:this.heightMode=r.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;const n=()=>{this.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",n),this._disposeCallbacks.push(()=>{this.itemSet.body.emitter.off("checkRangedItems",n)}),this._create(),this.setData(t)}_create(){const e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;const t=document.createElement("div");t.className="vis-inner",e.appendChild(t),this.dom.inner=t;const r=document.createElement("div");r.className="vis-group",r["vis-group"]=this,this.dom.foreground=r,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}setData(e){if(this.itemSet.groupTouchParams.isDragging)return;let t,r;if(e&&e.subgroupVisibility)for(const o in e.subgroupVisibility)this.subgroupVisibility[o]=e.subgroupVisibility[o];if(this.itemSet.options&&this.itemSet.options.groupTemplate?(r=this.itemSet.options.groupTemplate.bind(this),t=r(e,this.dom.inner)):t=e&&e.content,t instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(t)}else t instanceof Object&&t.isReactComponent||(t instanceof Object?r(e,this.dom.inner):t!=null?this.dom.inner.innerHTML=v.xss(t):this.dom.inner.innerHTML=v.xss(this.groupId||""));this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?v.removeClassName(this.dom.inner,"vis-hidden"):v.addClassName(this.dom.inner,"vis-hidden"),e&&e.nestedGroups?((!this.nestedGroups||this.nestedGroups!=e.nestedGroups)&&(this.nestedGroups=e.nestedGroups),(e.showNested!==void 0||this.showNested===void 0)&&(e.showNested==!1?this.showNested=!1:this.showNested=!0),v.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(v.removeClassName(this.dom.label,"collapsed"),v.addClassName(this.dom.label,"expanded")):(v.removeClassName(this.dom.label,"expanded"),v.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,v.removeClassName(this.dom.label,"collapsed"),v.removeClassName(this.dom.label,"expanded"),v.removeClassName(this.dom.label,"vis-nesting-group")),e&&(e.treeLevel||e.nestedInGroup)?(v.addClassName(this.dom.label,"vis-nested-group"),e.treeLevel?v.addClassName(this.dom.label,"vis-group-level-"+e.treeLevel):v.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):v.addClassName(this.dom.label,"vis-group-level-0");const n=e&&e.className||null;n!=this.className&&(this.className&&(v.removeClassName(this.dom.label,this.className),v.removeClassName(this.dom.foreground,this.className),v.removeClassName(this.dom.background,this.className),v.removeClassName(this.dom.axis,this.className)),v.addClassName(this.dom.label,n),v.addClassName(this.dom.foreground,n),v.addClassName(this.dom.background,n),v.addClassName(this.dom.axis,n),this.className=n),this.style&&(v.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(v.addCssText(this.dom.label,e.style),this.style=e.style)}getLabelWidth(){return this.props.label.width}_didMarkerHeightChange(){const e=this.dom.marker.clientHeight;if(e!=this.lastMarkerHeight){this.lastMarkerHeight=e;const t={};let r=0;if(v.forEach(this.items,(o,a)=>{o.dirty=!0,o.displayed&&(t[a]=o.redraw(!0),r=t[a].length)}),r>0)for(let o=0;o<r;o++)v.forEach(t,a=>{a[o]()});return!0}else return!1}_calculateGroupSizeAndPosition(){const{offsetTop:e,offsetLeft:t,offsetWidth:r}=this.dom.foreground;this.top=e,this.right=t,this.width=r}_shouldBailItemsRedraw(){const e=this,t=this.itemSet.options.onTimeout,r={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:t&&t.timeoutMs,userBailFunction:t&&t.callback,shouldBailStackItems:this.shouldBailStackItems};let n=null;if(!this.itemSet.initialDrawDone){if(r.shouldBailStackItems)return!0;Math.abs(Date.now()-new Date(r.relativeBailingTime))>r.bailTimeMs&&(r.userBailFunction&&this.itemSet.userContinueNotBail==null?r.userBailFunction(o=>{e.itemSet.userContinueNotBail=o,n=!o}):e.itemSet.userContinueNotBail==!1?n=!0:n=!1)}return n}_redrawItems(e,t,r,n){if(e||this.stackDirty||this.isVisible&&!t){const a={byEnd:this.orderedItems.byEnd.filter(c=>!c.isCluster),byStart:this.orderedItems.byStart.filter(c=>!c.isCluster)},l={byEnd:[...new Set(this.orderedItems.byEnd.map(c=>c.cluster).filter(c=>!!c))],byStart:[...new Set(this.orderedItems.byStart.map(c=>c.cluster).filter(c=>!!c))]},h=()=>{const c=this._updateItemsInRange(a,this.visibleItems.filter(p=>!p.isCluster),n),u=this._updateClustersInRange(l,this.visibleItems.filter(p=>p.isCluster),n);return[...c,...u]},d=c=>{let u={};for(const p in this.subgroups){const m=this.visibleItems.filter(g=>g.data.subgroup===p);u[p]=c?m.sort((g,b)=>c(g.data,b.data)):m}return u};if(typeof this.itemSet.options.order=="function"){const c=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const u=d(this.itemSet.options.order);ha(u,r,this.subgroups),this.visibleItems=h(),this._updateSubGroupHeights(r)}else{this.visibleItems=h(),this._updateSubGroupHeights(r);const u=this.visibleItems.slice().filter(p=>p.isCluster||!p.isCluster&&!p.cluster).sort((p,m)=>c.itemSet.options.order(p.data,m.data));this.shouldBailStackItems=la(u,r,!0,this._shouldBailItemsRedraw.bind(this))}}else if(this.visibleItems=h(),this._updateSubGroupHeights(r),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const c=d();ha(c,r,this.subgroups)}else this.shouldBailStackItems=la(this.visibleItems,r,!0,this._shouldBailItemsRedraw.bind(this));else nf(this.visibleItems,r,this.subgroups,this.itemSet.options.stackSubgroups);for(let c=0;c<this.visibleItems.length;c++)this.visibleItems[c].repositionX(),this.subgroupVisibility[this.visibleItems[c].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[c].data.subgroup]||this.visibleItems[c].hide());this.itemSet.options.cluster&&v.forEach(this.items,c=>{c.cluster&&c.displayed&&c.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}_didResize(e,t){e=v.updateProperty(this,"height",t)||e;const r=this.dom.inner.clientWidth,n=this.dom.inner.clientHeight;return e=v.updateProperty(this.props.label,"width",r)||e,e=v.updateProperty(this.props.label,"height",n)||e,e}_applyGroupHeight(e){this.dom.background.style.height=`${e}px`,this.dom.foreground.style.height=`${e}px`,this.dom.label.style.height=`${e}px`}_updateItemsVerticalPosition(e){for(let t=0,r=this.visibleItems.length;t<r;t++){const n=this.visibleItems[t];n.repositionY(e),!this.isVisible&&this.groupId!=Tl.BACKGROUND&&n.displayed&&n.hide()}}redraw(e,t,r,n){let o=!1;const a=this.isVisible;let l;const h=[()=>{r=this._didMarkerHeightChange.call(this)||r},this._updateSubGroupHeights.bind(this,t),this._calculateGroupSizeAndPosition.bind(this),()=>{this.isVisible=this._isGroupVisible.bind(this)(e,t)},()=>{this._redrawItems.bind(this)(r,a,t,e)},this._updateSubgroupsSizes.bind(this),()=>{l=this._calculateHeight.bind(this)(t)},this._calculateGroupSizeAndPosition.bind(this),()=>{o=this._didResize.bind(this)(o,l)},()=>{this._applyGroupHeight.bind(this)(l)},()=>{this._updateItemsVerticalPosition.bind(this)(t)},(()=>(!this.isVisible&&this.height&&(o=!1),o)).bind(this)];if(n)return h;{let d;return h.forEach(c=>{d=c()}),d}}_updateSubGroupHeights(e){if(Object.keys(this.subgroups).length>0){const t=this;this._resetSubgroups(),v.forEach(this.visibleItems,r=>{r.data.subgroup!==void 0&&(t.subgroups[r.data.subgroup].height=Math.max(t.subgroups[r.data.subgroup].height,r.height+e.item.vertical),t.subgroups[r.data.subgroup].visible=typeof this.subgroupVisibility[r.data.subgroup]>"u"?!0:!!this.subgroupVisibility[r.data.subgroup])})}}_isGroupVisible(e,t){return this.top<=e.body.domProps.centerContainer.height-e.body.domProps.scrollTop+t.axis&&this.top+this.height+t.axis>=-e.body.domProps.scrollTop}_calculateHeight(e){let t,r;if(this.heightMode==="fixed"?r=v.toArray(this.items):r=this.visibleItems,r.length>0){let n=r[0].top,o=r[0].top+r[0].height;if(v.forEach(r,a=>{n=Math.min(n,a.top),o=Math.max(o,a.top+a.height)}),n>e.axis){const a=n-e.axis;o-=a,v.forEach(r,l=>{l.top-=a})}t=Math.ceil(o+e.item.vertical/2),this.heightMode!=="fitItems"&&(t=Math.max(t,this.props.label.height))}else t=this.props.label.height;return t}show(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}hide(){const e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);const t=this.dom.foreground;t.parentNode&&t.parentNode.removeChild(t);const r=this.dom.background;r.parentNode&&r.parentNode.removeChild(r);const n=this.dom.axis;n.parentNode&&n.parentNode.removeChild(n)}add(e){if(this.items[e.id]=e,e.setParent(this),this.stackDirty=!0,e.data.subgroup!==void 0&&(this._addToSubgroup(e),this.orderSubgroups()),!this.visibleItems.includes(e)){const t=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,t)}}_addToSubgroup(e,t=e.data.subgroup){t!=null&&this.subgroups[t]===void 0&&(this.subgroups[t]={height:0,top:0,start:e.data.start,end:e.data.end||e.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[t]||!1},this.subgroupIndex++),new Date(e.data.start)<new Date(this.subgroups[t].start)&&(this.subgroups[t].start=e.data.start);const r=e.data.end||e.data.start;new Date(r)>new Date(this.subgroups[t].end)&&(this.subgroups[t].end=r),this.subgroups[t].items.push(e)}_updateSubgroupsSizes(){const e=this;if(e.subgroups)for(const t in e.subgroups){const r=e.subgroups[t].items[0].data.end||e.subgroups[t].items[0].data.start;let n=e.subgroups[t].items[0].data.start,o=r-1;e.subgroups[t].items.forEach(a=>{new Date(a.data.start)<new Date(n)&&(n=a.data.start);const l=a.data.end||a.data.start;new Date(l)>new Date(o)&&(o=l)}),e.subgroups[t].start=n,e.subgroups[t].end=new Date(o-1)}}orderSubgroups(){if(this.subgroupOrderer!==void 0){const e=[];if(typeof this.subgroupOrderer=="string"){for(const t in this.subgroups)e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});e.sort((t,r)=>t.sortField-r.sortField)}else if(typeof this.subgroupOrderer=="function"){for(const t in this.subgroups)e.push(this.subgroups[t].items[0].data);e.sort(this.subgroupOrderer)}if(e.length>0)for(let t=0;t<e.length;t++)this.subgroups[e[t].subgroup].index=t}}_resetSubgroups(){for(const e in this.subgroups)this.subgroups.hasOwnProperty(e)&&(this.subgroups[e].visible=!1,this.subgroups[e].height=0)}remove(e){delete this.items[e.id],e.setParent(null),this.stackDirty=!0;const t=this.visibleItems.indexOf(e);t!=-1&&this.visibleItems.splice(t,1),e.data.subgroup!==void 0&&(this._removeFromSubgroup(e),this.orderSubgroups())}_removeFromSubgroup(e,t=e.data.subgroup){if(t!=null){const r=this.subgroups[t];if(r){const n=r.items.indexOf(e);n>=0&&(r.items.splice(n,1),r.items.length?this._updateSubgroupsSizes():delete this.subgroups[t])}}}removeFromDataSet(e){this.itemSet.removeItem(e.id)}order(){const e=v.toArray(this.items),t=[],r=[];for(let n=0;n<e.length;n++)e[n].data.end!==void 0&&r.push(e[n]),t.push(e[n]);this.orderedItems={byStart:t,byEnd:r},tf(this.orderedItems.byStart),sf(this.orderedItems.byEnd)}_updateItemsInRange(e,t,r){const n=[],o={};if(!this.isVisible&&this.height!==void 0&&this.groupId!=Tl.BACKGROUND){for(let y=0;y<t.length;y++){var a=t[y];a.displayed&&a.hide()}return n}const l=(r.end-r.start)/4,h=r.start-l,d=r.end+l,c=y=>y<h?-1:y<=d?0:1,u=y=>{const{start:_,end:x}=y;return x<h?-1:_<=d?0:1};if(t.length>0)for(let y=0;y<t.length;y++)this._checkIfVisibleWithReference(t[y],n,o,r);const p=v.binarySearchCustom(e.byStart,c,"data","start");if(this._traceVisible(p,e.byStart,n,o,y=>y.data.start<h||y.data.start>d),this.checkRangedItems==!0){this.checkRangedItems=!1;for(let y=0;y<e.byEnd.length;y++)this._checkIfVisibleWithReference(e.byEnd[y],n,o,r)}else{const y=v.binarySearchCustom(e.byEnd,u,"data");this._traceVisible(y,e.byEnd,n,o,_=>_.data.end<h||_.data.start>d)}const m={};let g=0;for(let y=0;y<n.length;y++){const _=n[y];_.displayed||(m[y]=_.redraw(!0),g=m[y].length)}if(g>0)for(let y=0;y<g;y++)v.forEach(m,_=>{_[y]()});for(let y=0;y<n.length;y++)n[y].repositionX();return n}_traceVisible(e,t,r,n,o){if(e!=-1){for(let a=e;a>=0;a--){let l=t[a];if(o(l))break;!(l.isCluster&&!l.hasItems())&&!l.cluster&&n[l.id]===void 0&&(n[l.id]=!0,r.push(l))}for(let a=e+1;a<t.length;a++){let l=t[a];if(o(l))break;!(l.isCluster&&!l.hasItems())&&!l.cluster&&n[l.id]===void 0&&(n[l.id]=!0,r.push(l))}}}_checkIfVisible(e,t,r){e.isVisible(r)?(e.displayed||e.show(),e.repositionX(),t.push(e)):e.displayed&&e.hide()}_checkIfVisibleWithReference(e,t,r,n){e.isVisible(n)?r[e.id]===void 0&&(r[e.id]=!0,t.push(e)):e.displayed&&e.hide()}_updateClustersInRange(e,t,r){const n=[],o={};if(t.length>0)for(let c=0;c<t.length;c++)this._checkIfVisibleWithReference(t[c],n,o,r);for(let c=0;c<e.byStart.length;c++)this._checkIfVisibleWithReference(e.byStart[c],n,o,r);for(let c=0;c<e.byEnd.length;c++)this._checkIfVisibleWithReference(e.byEnd[c],n,o,r);const a={};let l=0;for(let c=0;c<n.length;c++){const u=n[c];u.displayed||(a[c]=u.redraw(!0),l=a[c].length)}if(l>0)for(var d=0;d<l;d++)v.forEach(a,function(c){c[d]()});for(let c=0;c<n.length;c++)n[c].repositionX();return n}changeSubgroup(e,t,r){this._removeFromSubgroup(e,t),this._addToSubgroup(e,r),this.orderSubgroups()}dispose(){this.hide();let e;for(;e=this._disposeCallbacks.pop();)e()}}class Ma extends is{constructor(e,t,r){super(e,t,r),this.width=0,this.height=0,this.top=0,this.left=0}redraw(e,t,r){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,e),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(let o=0,a=this.visibleItems.length;o<a;o++)this.visibleItems[o].repositionY(t);return!1}show(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}class mt{constructor(e,t,r){this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=t||{},this.defaultOptions={locales:Lt,locale:"en"},this.options=v.extend({},this.defaultOptions,r),this.options.locales=v.extend({},Lt,this.options.locales);const n=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(o=>{this.options.locales[o]=v.extend({},n,this.options.locales[o])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=r&&r.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(e),this.editable=null,this._updateEditStatus()}select(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}unselect(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}setData(e){e.group!=null&&this.data.group!=e.group&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,e.group),this.setSelectability(e),this.parent&&(this.parent.stackDirty=!0),e.subgroup!=null&&this.data.subgroup!=e.subgroup&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,e.subgroup),this.data=e,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}setSelectability(e){e&&(this.selectable=typeof e.selectable>"u"?!0:!!e.selectable)}setParent(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e}isVisible(e){return!1}show(){return!1}hide(){return!1}redraw(){}repositionX(){}repositionY(){}_repaintDragCenter(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){const e=this,t=document.createElement("div");t.className="vis-drag-center",t.dragCenterItem=this,this.hammerDragCenter=new te(t),this.hammerDragCenter.on("tap",r=>{e.parent.itemSet.body.emitter.emit("click",{event:r,item:e.id})}),this.hammerDragCenter.on("doubletap",r=>{r.stopPropagation(),e.parent.itemSet._onUpdateItem(e),e.parent.itemSet.body.emitter.emit("doubleClick",{event:r,item:e.id})}),this.hammerDragCenter.on("panstart",r=>{r.stopPropagation(),e.parent.itemSet._onDragStart(r)}),this.hammerDragCenter.on("panmove",e.parent.itemSet._onDrag.bind(e.parent.itemSet)),this.hammerDragCenter.on("panend",e.parent.itemSet._onDragEnd.bind(e.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(t,this.dom.dragLeft):this.dom.box.appendChild(t):this.dom.point&&this.dom.point.appendChild(t),this.dom.dragCenter=t}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}_repaintDeleteButton(e){const t=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&t&&!this.dom.deleteButton){const r=this,n=document.createElement("div");this.options.rtl?n.className="vis-delete-rtl":n.className="vis-delete";let o=this.options.locales[this.options.locale];o||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),o=this.options.locales.en),n.title=o.deleteSelected,this.hammerDeleteButton=new te(n).on("tap",a=>{a.stopPropagation(),r.parent.removeFromDataSet(r)}),e.appendChild(n),this.dom.deleteButton=n}else(!this.selected||!t)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}_repaintOnItemUpdateTimeTooltip(e){if(!this.options.tooltipOnItemUpdateTime)return;const t=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&t&&!this.dom.onItemUpdateTimeTooltip){const r=document.createElement("div");r.className="vis-onUpdateTime-tooltip",e.appendChild(r),this.dom.onItemUpdateTimeTooltip=r}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";const r=50,n=this.parent.itemSet.body.domProps.scrollTop;let o;this.options.orientation.item=="top"?o=this.top:o=this.parent.height-this.top-this.height,o+this.parent.top-r<-n?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top=`${this.height+2}px`):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom=`${this.height+2}px`);let l,h;this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template?(h=this.options.tooltipOnItemUpdateTime.template.bind(this),l=h(this.data)):(l=`start: ${ne(this.data.start).format("MM/DD/YYYY hh:mm")}`,this.data.end&&(l+=`<br> end: ${ne(this.data.end).format("MM/DD/YYYY hh:mm")}`)),this.dom.onItemUpdateTimeTooltip.innerHTML=v.xss(l)}}_getItemData(){return this.parent.itemSet.itemsData.get(this.id)}_updateContents(e){let t,r,n,o,a;const l=this._getItemData(),d=(this.dom.box||this.dom.point).getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate?(a=this.options.visibleFrameTemplate.bind(this),o=v.xss(a(l,d))):o="",d){if(o instanceof Object&&!(o instanceof Element))a(l,d);else if(r=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(o),r){if(o instanceof Element)d.innerHTML="",d.appendChild(o);else if(o!=null)d.innerHTML=v.xss(o);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error(`Property "content" missing in item ${this.id}`);this.itemVisibleFrameContent=o}}if(this.options.template?(n=this.options.template.bind(this),t=n(l,e,this.data)):t=this.data.content,t instanceof Object&&!(t instanceof Element))n(l,e);else if(r=this._contentToString(this.content)!==this._contentToString(t),r){if(t instanceof Element)e.innerHTML="",e.appendChild(t);else if(t!=null)e.innerHTML=v.xss(t);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error(`Property "content" missing in item ${this.id}`);this.content=t}}_updateDataAttributes(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){let t=[];if(Array.isArray(this.options.dataAttributes))t=this.options.dataAttributes;else if(this.options.dataAttributes=="all")t=Object.keys(this.data);else return;for(const r of t){const n=this.data[r];n!=null?e.setAttribute(`data-${r}`,n):e.removeAttribute(`data-${r}`)}}}_updateStyle(e){this.style&&(v.removeCssText(e,this.style),this.style=null),this.data.style&&(v.addCssText(e,this.data.style),this.style=this.data.style)}_contentToString(e){return typeof e=="string"?e:e&&"outerHTML"in e?e.outerHTML:e}_updateEditStatus(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:typeof this.options.editable=="object"&&(this.editable={},v.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:typeof this.data.editable=="object"&&(this.editable={},v.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}getWidthLeft(){return 0}getWidthRight(){return 0}getTitle(){return this.options.tooltip&&this.options.tooltip.template?this.options.tooltip.template.bind(this)(this._getItemData(),this.data):this.data.title}}mt.prototype.stack=!0;class af extends mt{constructor(e,t,r){if(super(e,t,r),this.props={dot:{width:0,height:0},line:{width:0,height:0}},e&&e.start==null)throw new Error(`Property "start" missing in item ${e}`)}isVisible(e){if(this.cluster)return!1;let t;const r=this.data.align||this.options.align,n=this.width*e.getMillisecondsPerPixel();return r=="right"?t=this.data.start.getTime()>e.start&&this.data.start.getTime()-n<e.end:r=="left"?t=this.data.start.getTime()+n>e.start&&this.data.start.getTime()<e.end:t=this.data.start.getTime()+n/2>e.start&&this.data.start.getTime()-n/2<e.end,t}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){const t=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");t.appendChild(this.dom.dot)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=`vis-item vis-box${t}`,this.dom.line.className=`vis-item vis-line${t}`,this.dom.dot.className=`vis-item vis-dot${t}`}}_getDomComponentsSizes(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=e.dot.height,this.props.dot.width=e.dot.width,this.props.line.width=e.line.width,this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}redraw(e){let t;const r=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return r;{let n;return r.forEach(o=>{n=o()}),n}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom;e.box.remove?e.box.remove():e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.remove?e.line.remove():e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.remove?e.dot.remove():e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.displayed=!1}}repositionXY(){const e=this.options.rtl,t=(r,n,o,a=!1)=>{if(n===void 0&&o===void 0)return;const l=a?n*-1:n;if(o===void 0){r.style.transform=`translateX(${l}px)`;return}if(n===void 0){r.style.transform=`translateY(${o}px)`;return}r.style.transform=`translate(${l}px, ${o}px)`};t(this.dom.box,this.boxX,this.boxY,e),t(this.dom.dot,this.dotX,this.dotY,e),t(this.dom.line,this.lineX,this.lineY,e)}repositionX(){const e=this.conversion.toScreen(this.data.start),t=this.data.align===void 0?this.options.align:this.data.align,r=this.props.line.width,n=this.props.dot.width;t=="right"?(this.boxX=e-this.width,this.lineX=e-r,this.dotX=e-r/2-n/2):t=="left"?(this.boxX=e,this.lineX=e,this.dotX=e+r/2-n/2):(this.boxX=e-this.width/2,this.lineX=this.options.rtl?e-r:e-r/2,this.dotX=e-n/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}repositionY(){const e=this.options.orientation.item,t=this.dom.line.style;if(e=="top"){const r=this.parent.top+this.top+1;this.boxY=this.top||0,t.height=`${r}px`,t.bottom="",t.top="0"}else{const n=this.parent.itemSet.props.height-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),t.height=`${n}px`,t.top="",t.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}}class lf extends mt{constructor(e,t,r){if(super(e,t,r),this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},e&&e.start==null)throw new Error(`Property "start" missing in item ${e}`)}isVisible(e){if(this.cluster)return!1;const t=this.width*e.getMillisecondsPerPixel();return this.data.start.getTime()+t>e.start&&this.data.start<e.end}_createDomElement(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.point)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.point.className=`vis-item vis-point${t}`,this.dom.dot.className=`vis-item vis-dot${t}`}}_getDomComponentsSizes(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}_updateDomComponentsSizes(e){this.props.dot.width=e.dot.width,this.props.dot.height=e.dot.height,this.props.content.height=e.content.height,this.options.rtl?this.dom.content.style.marginRight=`${this.props.dot.width/2}px`:this.dom.content.style.marginLeft=`${this.props.dot.width/2}px`,this.width=e.point.width,this.height=e.point.height,this.dom.dot.style.top=`${(this.height-this.props.dot.height)/2}px`;const t=this.props.dot.width,r=this.options.rtl?t/2:t/2*-1;this.dom.dot.style.transform=`translateX(${r}px`,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}redraw(e){let t;const r=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return r;{let n;return r.forEach(o=>{n=o()}),n}}repositionXY(){const e=this.options.rtl;((r,n,o,a=!1)=>{if(n===void 0&&o===void 0)return;const l=a?n*-1:n;if(o===void 0){r.style.transform=`translateX(${l}px)`;return}if(n===void 0){r.style.transform=`translateY(${o}px)`;return}r.style.transform=`translate(${l}px, ${o}px)`})(this.dom.point,this.pointX,this.pointY,e)}show(e){if(!this.displayed)return this.redraw(e)}hide(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}repositionX(){const e=this.conversion.toScreen(this.data.start);this.pointX=e,this.options.rtl?this.right=e-this.props.dot.width:this.left=e-this.props.dot.width,this.repositionXY()}repositionY(){this.options.orientation.item=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}getWidthLeft(){return this.props.dot.width}getWidthRight(){return this.props.dot.width}}class Xe extends mt{constructor(e,t,r){if(super(e,t,r),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error(`Property "start" missing in item ${e.id}`);if(e.end==null)throw new Error(`Property "end" missing in item ${e.id}`)}}isVisible(e){return this.cluster?!1:this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+t,this.dom.content.style.maxWidth="none"}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=e.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}redraw(e){let t;const r=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes.bind(this)())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return r;{let n;return r.forEach(o=>{n=o()}),n}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.displayed=!1}}repositionX(e){const t=this.parent.width;let r=this.conversion.toScreen(this.data.start),n=this.conversion.toScreen(this.data.end);const o=this.data.align===void 0?this.options.align:this.data.align;let a,l;this.data.limitSize!==!1&&(e===void 0||e===!0)&&(r<-t&&(r=-t),n>2*t&&(n=2*t));const h=Math.max(Math.round((n-r)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=r:this.left=r,this.width=h+this.props.content.width,l=this.props.content.width):(this.options.rtl?this.right=r:this.left=r,this.width=h,l=Math.min(n-r,this.props.content.width)),this.options.rtl?this.dom.box.style.transform=`translateX(${this.right*-1}px)`:this.dom.box.style.transform=`translateX(${this.left}px)`,this.dom.box.style.width=`${h}px`,this.whiteSpace&&(this.height=this.dom.box.offsetHeight),o){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){const d=Math.max(h-l,0)*-1;this.dom.content.style.transform=`translateX(${d}px)`}else this.dom.content.style.transform=`translateX(${Math.max(h-l,0)}px)`;break;case"center":if(this.options.rtl){const d=Math.max((h-l)/2,0)*-1;this.dom.content.style.transform=`translateX(${d}px)`}else this.dom.content.style.transform=`translateX(${Math.max((h-l)/2,0)}px)`;break;default:if(this.overflow?n>0?a=Math.max(-r,0):a=-l:r<0?a=-r:a=0,this.options.rtl){const d=a*-1;this.dom.content.style.transform=`translateX(${d}px)`}else this.dom.content.style.transform=`translateX(${a}px)`}}repositionY(){const e=this.options.orientation.item,t=this.dom.box;e=="top"?t.style.top=`${this.top}px`:t.style.top=`${this.parent.height-this.top-this.height}px`}_repaintDragLeft(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){const e=document.createElement("div");e.className="vis-drag-left",e.dragLeftItem=this,this.dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}_repaintDragRight(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){const e=document.createElement("div");e.className="vis-drag-right",e.dragRightItem=this,this.dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}Xe.prototype.baseClassName="vis-item vis-range";class Qe extends mt{constructor(e,t,r){if(super(e,t,r),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error(`Property "start" missing in item ${e.id}`);if(e.end==null)throw new Error(`Property "end" missing in item ${e.id}`)}}isVisible(e){return this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);const e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+e}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=0,this.dirty=!1}_repaintDomAdditionals(){}redraw(e){let t;const r=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes.bind(this)())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return r;{let n;return r.forEach(o=>{n=o()}),n}}repositionY(e){let t;const r=this.options.orientation.item;if(this.data.subgroup!==void 0){const n=this.data.subgroup;this.dom.box.style.height=`${this.parent.subgroups[n].height}px`,r=="top"?this.dom.box.style.top=`${this.parent.top+this.parent.subgroups[n].top}px`:this.dom.box.style.top=`${this.parent.top+this.parent.height-this.parent.subgroups[n].top-this.parent.subgroups[n].height}px`,this.dom.box.style.bottom=""}else this.parent instanceof Ma?(t=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=r=="bottom"?"0":"",this.dom.box.style.top=r=="top"?"0":""):(t=this.parent.height,this.dom.box.style.top=`${this.parent.top}px`,this.dom.box.style.bottom="");this.dom.box.style.height=`${t}px`}}Qe.prototype.baseClassName="vis-item vis-background";Qe.prototype.stack=!1;Qe.prototype.show=Xe.prototype.show;Qe.prototype.hide=Xe.prototype.hide;Qe.prototype.repositionX=Xe.prototype.repositionX;class Wv{constructor(e,t){this.container=e,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,t){this.x=parseInt(e),this.y=parseInt(t)}setText(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=v.xss(e)}show(e){if(e===void 0&&(e=!0),e===!0){var t=this.frame.clientHeight,r=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,a=0,l=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){let h=!1,d=!0;this.overflowMethod=="flip"&&(this.y-t<this.padding&&(d=!1),this.x+r>o-this.padding&&(h=!0)),h?a=this.x-r:a=this.x,d?l=this.y-t:l=this.y}else l=this.y-t,l+t+this.padding>n&&(l=n-t-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+r+this.padding>o&&(a=o-r-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}}class Di extends mt{constructor(e,t,r){const n=Object.assign({},{fitOnDoubleClick:!0},r,{editable:!1});if(super(e,t,n),this.props={content:{width:0,height:0}},!e||e.uiItems==null)throw new Error('Property "uiItems" missing in item '+e.id);this.id=nt(),this.group=e.group,this._setupRange(),this.emitter=this.data.eventEmitter,this.range=this.data.range,this.attached=!1,this.isCluster=!0,this.data.isCluster=!0}hasItems(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}setUiItems(e){this.detach(),this.data.uiItems=e,this._setupRange(),this.attach()}isVisible(e){const t=this.data.end?this.data.end-this.data.start:0,r=this.width*e.getMillisecondsPerPixel(),n=Math.max(this.data.start.getTime()+t,this.data.start.getTime()+r);return this.data.start<e.end&&n>e.start&&this.hasItems()}getData(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}redraw(e){var t,r=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),(function(){this.dirty&&(t=this._getDomComponentsSizes())}).bind(this),(function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(t)}).bind(this),this._repaintDomAdditionals.bind(this)];if(e)return r;var n;return r.forEach(function(o){n=o()}),n}show(){this.displayed||this.redraw()}hide(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),this.options.showStipes&&(e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot)),this.displayed=!1}}repositionX(){let e=this.conversion.toScreen(this.data.start),t=this.data.end?this.conversion.toScreen(this.data.end):0;if(t)this.repositionXWithRanges(e,t);else{let r=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(e,r)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(e,t))}repositionStype(e,t){this.dom.line.style.display="block",this.dom.dot.style.display="block";const r=this.dom.line.offsetWidth,n=this.dom.dot.offsetWidth;if(t){const o=r+e+(t-e)/2,a=o-n/2,l=this.options.rtl?o*-1:o,h=this.options.rtl?a*-1:a;this.dom.line.style.transform=`translateX(${l}px)`,this.dom.dot.style.transform=`translateX(${h}px)`}else{const o=this.options.rtl?e*-1:e,a=this.options.rtl?(e-n/2)*-1:e-n/2;this.dom.line.style.transform=`translateX(${o}px)`,this.dom.dot.style.transform=`translateX(${a}px)`}}repositionXWithoutRanges(e,t){t=="right"?this.options.rtl?(this.right=e-this.width,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width,this.dom.box.style.left=this.left+"px"):t=="left"?this.options.rtl?(this.right=e,this.dom.box.style.right=this.right+"px"):(this.left=e,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=e-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width/2,this.dom.box.style.left=this.left+"px")}repositionXWithRanges(e,t){let r=Math.round(Math.max(t-e+.5,1));this.options.rtl?this.right=e:this.left=e,this.width=Math.max(r,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=r+"px"}repositionY(){var e=this.options.orientation.item,t=this.dom.box;if(e=="top"?t.style.top=(this.top||0)+"px":t.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(e=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var r=this.parent.itemSet.props.height,n=r-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=r-n+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}move(){this.repositionX(),this.repositionY()}attach(){for(let e of this.data.uiItems)e.cluster=this;this.data.items=this.data.uiItems.map(e=>e.data),this.attached=!0,this.dirty=!0}detach(e=!1){if(this.hasItems()){for(let t of this.data.uiItems)delete t.cluster;this.attached=!1,e&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}_onDoubleClick(){this._fit()}_setupRange(){const e=this.data.uiItems.map(n=>({start:n.data.start.valueOf(),end:n.data.end?n.data.end.valueOf():n.data.start.valueOf()}));this.data.min=Math.min(...e.map(n=>Math.min(n.start,n.end||n.start))),this.data.max=Math.max(...e.map(n=>Math.max(n.start,n.end||n.start)));const r=this.data.uiItems.map(n=>n.center).reduce((n,o)=>n+o,0)/this.data.uiItems.length;this.data.uiItems.some(n=>n.data.end)?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(r),this.data.end=null)}_getUiItems(){return this.data.uiItems&&this.data.uiItems.length?this.data.uiItems.filter(e=>e.cluster===this):[]}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick&&(this.dom.box.ondblclick=Di.prototype._onDoubleClick.bind(this)),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const r=this.parent.dom.foreground;if(!r)throw new Error("Cannot redraw item: parent has no foreground container element");r.appendChild(this.dom.box)}const e=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var t=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");t.appendChild(this.dom.dot)}}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+e,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}_getDomComponentsSizes(){const e={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(e.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},e.line={width:this.dom.line.offsetWidth}),e}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=e.box.width:this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}_isStipeVisible(){return this.minWidth>=this.width||!this.data.end}_getFitRange(){const e=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-e,fitEnd:this.data.max+e}}_fit(){if(this.emitter){const{fitStart:e,fitEnd:t}=this._getFitRange(),r={start:new Date(e),end:new Date(t),animation:!0};this.emitter.emit("fit",r)}}_getItemData(){return this.data}}Di.prototype.baseClassName="vis-item vis-range vis-cluster";const Yv="__ungrouped__",Xv="__background__",Kv={UNGROUPED:Yv,BACKGROUND:Xv};class Qv{constructor(e){this.itemSet=e,this.groups={},this.cache={},this.cache[-1]=[]}createClusterItem(e,t,r){return new Di(e,t,r)}setItems(e,t){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,t&&t.applyOnChangedLevel&&(this.applyOnChangedLevel=t.applyOnChangedLevel)}updateData(){this.dataChanged=!0,this.applyOnChangedLevel=!1}getClusters(e,t,r){let{maxItems:n,clusterCriteria:o}=typeof r=="boolean"?{}:r;o||(o=()=>!0),n=n||1;let a=-1,l=2,h=0;if(t>0){if(t>=1)return[];a=Math.abs(Math.round(Math.log(100/t)/Math.log(l))),h=Math.abs(Math.pow(l,a))}if(this.dataChanged){const c=a!=this.cacheLevel;(this.applyOnChangedLevel?c:!0)&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=a;let d=this.cache[a];if(!d){d=[];for(let c in this.groups)if(this.groups.hasOwnProperty(c)){const u=this.groups[c],p=u.length;let m=0;for(;m<p;){let g=u[m],b=1,y=m-1;for(;y>=0&&g.center-u[y].center<h/2;)!u[y].cluster&&o(g.data,u[y].data)&&b++,y--;let _=m+1;for(;_<u.length&&u[_].center-g.center<h/2;)o(g.data,u[_].data)&&b++,_++;let x=d.length-1;for(;x>=0&&g.center-d[x].center<h;)g.group==d[x].group&&o(g.data,d[x].data)&&b++,x--;if(b>n){const w=b-n+1,D=[];let T=m;for(;D.length<w&&T<u.length;)o(u[m].data,u[T].data)&&D.push(u[T]),T++;const S=this.itemSet.getGroupId(g.data),k=this.itemSet.groups[S]||this.itemSet.groups[Kv.UNGROUPED];let P=this._getClusterForItems(D,k,e,r);d.push(P),m+=w}else delete g.cluster,m+=1}}this.cache[a]=d}return d}_filterData(){const e={};this.groups=e;for(const t of Object.values(this.items)){const r=t.parent?t.parent.groupId:"";let n=e[r];n||(n=[],e[r]=n),n.push(t),t.data.start&&(t.data.end?t.center=(t.data.start.valueOf()+t.data.end.valueOf())/2:t.center=t.data.start.valueOf())}for(let t in e)e.hasOwnProperty(t)&&e[t].sort((r,n)=>r.center-n.center);this.dataChanged=!1}_getClusterForItems(e,t,r,n){const o=(r||[]).map(m=>({cluster:m,itemsIds:new Set(m.data.uiItems.map(g=>g.id))}));let a;if(o.length){for(let m of o)if(m.itemsIds.size===e.length&&e.every(g=>m.itemsIds.has(g.id))){a=m.cluster;break}}if(a)return a.setUiItems(e),a.group!==t&&(a.group&&a.group.remove(a),t&&(t.add(a),a.group=t)),a;let l=n.titleTemplate||"";const h={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},d=l.replace(/{count}/,e.length),c='<div title="'+d+'">'+e.length+"</div>",u=Object.assign({},n,this.itemSet.options),p={content:c,title:d,group:t,uiItems:e,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return a=this.createClusterItem(p,h,u),t&&(t.add(a),a.group=t),a.attach(),a}_dropLevelsCache(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}const Ct="__ungrouped__",Be="__background__";class Ke extends Re{constructor(e,t){super(),this.body=e,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap(n,o,a){const l=o.order;o.order=n.order,n.order=l},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:Ye.snap,onDropObjectOnItem(n,o,a){a(o)},onAdd(n,o){o(n)},onUpdate(n,o){o(n)},onMove(n,o){o(n)},onRemove(n,o){o(n)},onMoving(n,o){o(n)},onAddGroup(n,o){o(n)},onMoveGroup(n,o){o(n)},onRemoveGroup(n,o){o(n)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},this.options=v.extend({},this.defaultOptions),this.options.rtl=t.rtl,this.options.onTimeout=t.onTimeout,this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;const r=this;this.itemsData=null,this.groupsData=null,this.itemsSettingTime=null,this.initialItemSetDrawn=!1,this.userContinueNotBail=null,this.sequentialSelection=!1,this.itemListeners={add(n,o,a){r._onAdd(o.items),r.options.cluster&&r.clusterGenerator.setItems(r.items,{applyOnChangedLevel:!1}),r.redraw()},update(n,o,a){r._onUpdate(o.items),r.options.cluster&&r.clusterGenerator.setItems(r.items,{applyOnChangedLevel:!1}),r.redraw()},remove(n,o,a){r._onRemove(o.items),r.options.cluster&&r.clusterGenerator.setItems(r.items,{applyOnChangedLevel:!1}),r.redraw()}},this.groupListeners={add(n,o,a){if(r._onAddGroups(o.items),r.groupsData&&r.groupsData.length>0){const l=r.groupsData.getDataSet();l.get().forEach(h=>{if(h.nestedGroups){h.showNested!=!1&&(h.showNested=!0);let d=[];h.nestedGroups.forEach(c=>{const u=l.get(c);u&&(u.nestedInGroup=h.id,h.showNested==!1&&(u.visible=!1),d=d.concat(u))}),l.update(d,a)}})}},update(n,o,a){r._onUpdateGroups(o.items)},remove(n,o,a){r._onRemoveGroups(o.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.popupTimer=null,this.touchParams={},this.groupTouchParams={group:null,isDragging:!1},this._create(),this.setOptions(t),this.clusters=[]}_create(){const e=document.createElement("div");e.className="vis-itemset",e["vis-itemset"]=this,this.dom.frame=e;const t=document.createElement("div");t.className="vis-background",e.appendChild(t),this.dom.background=t;const r=document.createElement("div");r.className="vis-foreground",e.appendChild(r),this.dom.foreground=r;const n=document.createElement("div");n.className="vis-axis",this.dom.axis=n;const o=document.createElement("div");o.className="vis-labelset",this.dom.labelSet=o,this._updateUngrouped();const a=new Ma(Be,null,this);a.show(),this.groups[Be]=a,this.hammer=new te(this.body.dom.centerContainer),this.hammer.on("hammer.input",l=>{l.isFirst&&this._onTouch(l)}),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:te.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.options.rtl?this.groupHammer=new te(this.body.dom.rightContainer):this.groupHammer=new te(this.body.dom.leftContainer),this.groupHammer.on("tap",this._onGroupClick.bind(this)),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:te.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",this._onMouseOver.bind(this)),this.body.dom.centerContainer.addEventListener("mouseout",this._onMouseOut.bind(this)),this.body.dom.centerContainer.addEventListener("mousemove",this._onMouseMove.bind(this)),this.body.dom.centerContainer.addEventListener("contextmenu",this._onDragEnd.bind(this)),this.body.dom.centerContainer.addEventListener("mousewheel",this._onMouseWheel.bind(this)),this.show()}setOptions(e){if(e){const t=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];v.selectiveExtend(t,this.options,e),"itemsAlwaysDraggable"in e&&(typeof e.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=e.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):typeof e.itemsAlwaysDraggable=="object"&&(v.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,e.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in e&&typeof e.sequentialSelection=="boolean"&&(this.options.sequentialSelection=e.sequentialSelection),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.item=e.orientation==="top"?"top":"bottom":typeof e.orientation=="object"&&"item"in e.orientation&&(this.options.orientation.item=e.orientation.item)),"margin"in e&&(typeof e.margin=="number"?(this.options.margin.axis=e.margin,this.options.margin.item.horizontal=e.margin,this.options.margin.item.vertical=e.margin):typeof e.margin=="object"&&(v.selectiveExtend(["axis"],this.options.margin,e.margin),"item"in e.margin&&(typeof e.margin.item=="number"?(this.options.margin.item.horizontal=e.margin.item,this.options.margin.item.vertical=e.margin.item):typeof e.margin.item=="object"&&v.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)))),["locale","locales"].forEach(n=>{n in e&&(this.options[n]=e[n])}),"editable"in e&&(typeof e.editable=="boolean"?(this.options.editable.updateTime=e.editable,this.options.editable.updateGroup=e.editable,this.options.editable.add=e.editable,this.options.editable.remove=e.editable,this.options.editable.overrideItems=!1):typeof e.editable=="object"&&v.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,e.editable)),"groupEditable"in e&&(typeof e.groupEditable=="boolean"?(this.options.groupEditable.order=e.groupEditable,this.options.groupEditable.add=e.groupEditable,this.options.groupEditable.remove=e.groupEditable):typeof e.groupEditable=="object"&&v.selectiveExtend(["order","add","remove"],this.options.groupEditable,e.groupEditable));const r=n=>{const o=e[n];if(o){if(typeof o!="function")throw new Error(`option ${n} must be a function ${n}(item, callback)`);this.options[n]=o}};["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(r),e.cluster?(Object.assign(this.options,{cluster:e.cluster}),this.clusterGenerator||(this.clusterGenerator=new Qv(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}markDirty(e){this.groupIds=[],e&&(e.refreshItems&&v.forEach(this.items,t=>{t.dirty=!0,t.displayed&&t.redraw()}),e.restackGroups&&v.forEach(this.groups,(t,r)=>{r!==Be&&(t.stackDirty=!0)}))}destroy(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}hide(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}show(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}setPopupTimer(e){if(this.clearPopupTimer(),e){const t=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=setTimeout(function(){e.show()},t)}}clearPopupTimer(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}setSelection(e){e==null&&(e=[]),Array.isArray(e)||(e=[e]);const t=this.selection.filter(r=>e.indexOf(r)===-1);for(let r of t){const n=this.getItemById(r);n&&n.unselect()}this.selection=[...e];for(let r of e){const n=this.getItemById(r);n&&n.select()}}getSelection(){return this.selection.concat([])}getVisibleItems(){const e=this.body.range.getRange();let t,r;this.options.rtl?(t=this.body.util.toScreen(e.start),r=this.body.util.toScreen(e.end)):(r=this.body.util.toScreen(e.start),t=this.body.util.toScreen(e.end));const n=[];for(const o in this.groups)if(this.groups.hasOwnProperty(o)){const a=this.groups[o],l=a.isVisible?a.visibleItems:[];for(const h of l)this.options.rtl?h.right<r&&h.right+h.width>t&&n.push(h.id):h.left<t&&h.left+h.width>r&&n.push(h.id)}return n}getItemsAtCurrentTime(e){let t,r;this.options.rtl?(t=this.body.util.toScreen(e),r=this.body.util.toScreen(e)):(r=this.body.util.toScreen(e),t=this.body.util.toScreen(e));const n=[];for(const o in this.groups)if(this.groups.hasOwnProperty(o)){const a=this.groups[o],l=a.isVisible?a.visibleItems:[];for(const h of l)this.options.rtl?h.right<r&&h.right+h.width>t&&n.push(h.id):h.left<t&&h.left+h.width>r&&n.push(h.id)}return n}getVisibleGroups(){const e=[];for(const t in this.groups)this.groups.hasOwnProperty(t)&&this.groups[t].isVisible&&e.push(t);return e}getItemById(e){return this.items[e]||this.clusters.find(t=>t.id===e)}_deselect(e){const t=this.selection;for(let r=0,n=t.length;r<n;r++)if(t[r]==e){t.splice(r,1);break}}redraw(){const e=this.options.margin,t=this.body.range,r=v.option.asSize,n=this.options,o=n.orientation.item;let a=!1;const l=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,l.className="vis-itemset",this.options.cluster&&this._clusterItems(),a=this._orderGroups()||a;const h=t.end-t.start,d=h!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,c=t.start!=this.lastRangeStart,u=n.stack!=this.lastStack,p=n.stackSubgroups!=this.lastStackSubgroups,m=d||c||u||p;this.lastVisibleInterval=h,this.lastRangeStart=t.start,this.lastStack=n.stack,this.lastStackSubgroups=n.stackSubgroups,this.props.lastWidth=this.props.width;const g=this._firstGroup(),b={item:e.item,axis:e.axis},y={item:e.item,axis:e.item.vertical/2};let _=0;const x=e.axis+e.item.vertical;this.groups[Be].redraw(t,y,m);const w={};let D=0;if(v.forEach(this.groups,(S,k)=>{if(k===Be)return;const P=S==g?b:y,B=!0;w[k]=S.redraw(t,P,m,B),D=w[k].length}),D>0){const S={};for(let k=0;k<D;k++)v.forEach(w,(P,B)=>{S[B]=P[k]()});v.forEach(this.groups,(k,P)=>{if(P===Be)return;a=S[P]||a,_+=k.height}),_=Math.max(_,x)}return _=Math.max(_,x),l.style.height=r(_),this.props.width=l.offsetWidth,this.props.height=_,this.dom.axis.style.top=r(o=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,a=this._isResized()||a,a}_firstGroup(){const e=this.options.orientation.item=="top"?0:this.groupIds.length-1,t=this.groupIds[e];return this.groups[t]||this.groups[Ct]||null}_updateUngrouped(){let e=this.groups[Ct],t,r;if(this.groupsData){if(e){e.dispose(),delete this.groups[Ct];for(r in this.items)if(this.items.hasOwnProperty(r)){t=this.items[r],t.parent&&t.parent.remove(t);const n=this.getGroupId(t.data),o=this.groups[n];o&&o.add(t)||t.hide()}}}else if(!e){e=new is(null,null,this),this.groups[Ct]=e;for(r in this.items)this.items.hasOwnProperty(r)&&(t=this.items[r],e.add(t));e.show()}}getLabelSet(){return this.dom.labelSet}setItems(e){this.itemsSettingTime=new Date;const t=this;let r;const n=this.itemsData;if(!e)this.itemsData=null;else if(je(e))this.itemsData=Ft(e);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(n&&(v.forEach(this.itemListeners,(o,a)=>{n.off(a,o)}),n.dispose(),r=n.getIds(),this._onRemove(r)),this.itemsData){const o=this.id;v.forEach(this.itemListeners,(a,l)=>{t.itemsData.on(l,a,o)}),r=this.itemsData.getIds(),this._onAdd(r),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}getItems(){return this.itemsData!=null?this.itemsData.rawDS:null}setGroups(e){const t=this;let r;if(this.groupsData&&(v.forEach(this.groupListeners,(n,o)=>{t.groupsData.off(o,n)}),r=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(r)),!e)this.groupsData=null;else if(je(e))this.groupsData=e;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){const n=this.groupsData.getDataSet();n.get().forEach(a=>{a.nestedGroups&&a.nestedGroups.forEach(l=>{const h=n.get(l);h.nestedInGroup=a.id,a.showNested==!1&&(h.visible=!1),n.update(h)})});const o=this.id;v.forEach(this.groupListeners,(a,l)=>{t.groupsData.on(l,a,o)}),r=this.groupsData.getIds(),this._onAddGroups(r)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}getGroups(){return this.groupsData}removeItem(e){const t=this.itemsData.get(e);t&&this.options.onRemove(t,r=>{r&&this.itemsData.remove(e)})}_getType(e){return e.type||this.options.type||(e.end?"range":"box")}getGroupId(e){return this._getType(e)=="background"&&e.group==null?Be:this.groupsData?e.group:Ct}_onUpdate(e){const t=this;e.forEach(r=>{const n=t.itemsData.get(r);let o=t.items[r];const a=n?t._getType(n):null,l=Ke.types[a];let h;if(o&&(!l||!(o instanceof l)?(h=o.selected,t._removeItem(o),o=null):t._updateItem(o,n)),!o&&n)if(l)o=new l(n,t.conversion,t.options),o.id=r,t._addItem(o),h&&(this.selection.push(r),o.select());else throw new TypeError(`Unknown item type "${a}"`)}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}_onRemove(e){let t=0;const r=this;e.forEach(n=>{const o=r.items[n];o&&(t++,r._removeItem(o))}),t&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}_order(){v.forEach(this.groups,e=>{e.order()})}_onUpdateGroups(e){this._onAddGroups(e)}_onAddGroups(e){const t=this;e.forEach(r=>{const n=t.groupsData.get(r);let o=t.groups[r];if(o)o.setData(n);else{if(r==Ct||r==Be)throw new Error(`Illegal group id. ${r} is a reserved id.`);const a=Object.create(t.options);v.extend(a,{height:null}),o=new is(r,n,t),t.groups[r]=o;for(const l in t.items)if(t.items.hasOwnProperty(l)){const h=t.items[l];h.data.group==r&&o.add(h)}o.order(),o.show()}}),this.body.emitter.emit("_change",{queue:!0})}_onRemoveGroups(e){e.forEach(t=>{const r=this.groups[t];r&&(r.dispose(),delete this.groups[t])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}_orderGroups(){if(this.groupsData){let e=this.groupsData.getIds({order:this.options.groupOrder});e=this._orderNestedGroups(e);const t=!v.equalArray(e,this.groupIds);if(t){const r=this.groups;e.forEach(n=>{r[n].hide()}),e.forEach(n=>{r[n].show()}),this.groupIds=e}return t}else return!1}_orderNestedGroups(e){function t(n,o){let a=[];return o.forEach(l=>{if(a.push(l),n.groupsData.get(l).nestedGroups){const d=n.groupsData.get({filter(c){return c.nestedInGroup==l},order:n.options.groupOrder}).map(c=>c.id);a=a.concat(t(n,d))}}),a}const r=e.filter(n=>!this.groupsData.get(n).nestedInGroup);return t(this,r)}_addItem(e){this.items[e.id]=e;const t=this.getGroupId(e.data),r=this.groups[t];r?r&&r.data&&r.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1,r&&r.add(e)}_updateItem(e,t){e.setData(t);const r=this.getGroupId(e.data),n=this.groups[r];n?n&&n.data&&n.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1}_removeItem(e){e.hide(),delete this.items[e.id];const t=this.selection.indexOf(e.id);t!=-1&&this.selection.splice(t,1),e.parent&&e.parent.remove(e),this.popup!=null&&this.popup.hide()}_constructByEndArray(e){const t=[];for(let r=0;r<e.length;r++)e[r]instanceof Xe&&t.push(e[r]);return t}_onTouch(e){this.touchParams.item=this.itemFromTarget(e),this.touchParams.dragLeftItem=e.target.dragLeftItem||!1,this.touchParams.dragRightItem=e.target.dragRightItem||!1,this.touchParams.itemProps=null}_getGroupIndex(e){for(let t=0;t<this.groupIds.length;t++)if(e==this.groupIds[t])return t}_onDragStart(e){if(this.touchParams.itemIsDragging)return;const t=this.touchParams.item||null,r=this;let n;if(t&&(t.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||t.editable!=null&&!t.editable.updateTime&&!t.editable.updateGroup&&!this.options.editable.overrideItems)return;const o=this.touchParams.dragLeftItem,a=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=t,o)n={item:o,initialX:e.center.x,dragLeft:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[n];else if(a)n={item:a,initialX:e.center.x,dragRight:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[n];else if(this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey))this._onDragStartAddItem(e);else{this.groupIds.length<1&&this.redraw();const l=this._getGroupIndex(t.data.group),h=this.options.itemsAlwaysDraggable.item&&!t.selected?[t.id]:this.getSelection();this.touchParams.itemProps=h.map(d=>{const c=r.items[d],u=r._getGroupIndex(c.data.group);return{item:c,initialX:e.center.x,groupOffset:l-u,data:this._cloneItemData(c.data)}})}e.stopPropagation()}else this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey)&&this._onDragStartAddItem(e)}_onDragStartAddItem(e){const t=this.options.snap||null,r=this.dom.frame.getBoundingClientRect(),n=this.options.rtl?r.right-e.center.x+10:e.center.x-r.left-10,o=this.body.util.toTime(n),a=this.body.util.getScale(),l=this.body.util.getStep(),h=t?t(o,a,l):o,c={type:"range",start:h,end:h,content:"new item"},u=nt();c[this.itemsData.idProp]=u;const p=this.groupFromTarget(e);p&&(c.group=p.groupId);const m=new Xe(c,this.conversion,this.options);m.id=u,m.data=this._cloneItemData(c),this._addItem(m),this.touchParams.selectedItem=m;const g={item:m,initialX:e.center.x,data:m.data};this.options.rtl?g.dragLeft=!0:g.dragRight=!0,this.touchParams.itemProps=[g],e.stopPropagation()}_onDrag(e){if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){const t=this.body.dom.centerContainer,r=t.getBoundingClientRect();this.popup.setPosition(e.center.x-r.left+t.offsetLeft,e.center.y-r.top+t.offsetTop),this.popup.show()}if(this.touchParams.itemProps){e.stopPropagation();const t=this,r=this.options.snap||null,n=this.body.dom.root.offsetLeft,o=this.options.rtl?n+this.body.domProps.right.width:n+this.body.domProps.left.width,a=this.body.util.getScale(),l=this.body.util.getStep(),h=this.touchParams.selectedItem,d=(this.options.editable.overrideItems||h.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&h.editable!=null&&h.editable.updateGroup;let c=null;if(d&&h&&h.data.group!=null){const u=t.groupFromTarget(e);u&&(c=this._getGroupIndex(u.groupId))}this.touchParams.itemProps.forEach(u=>{const p=t.body.util.toTime(e.center.x-o),m=t.body.util.toTime(u.initialX-o);let g,b,y,_,x;this.options.rtl?g=-(p-m):g=p-m;let w=this._cloneItemData(u.item.data);if(u.item.editable!=null&&!u.item.editable.updateTime&&!u.item.editable.updateGroup&&!t.options.editable.overrideItems)return;if((this.options.editable.overrideItems||h.editable==null)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&h.editable!=null&&h.editable.updateTime){if(u.dragLeft)this.options.rtl?w.end!=null&&(y=v.convert(u.data.end,"Date"),x=new Date(y.valueOf()+g),w.end=r?r(x,a,l):x):w.start!=null&&(b=v.convert(u.data.start,"Date"),_=new Date(b.valueOf()+g),w.start=r?r(_,a,l):_);else if(u.dragRight)this.options.rtl?w.start!=null&&(b=v.convert(u.data.start,"Date"),_=new Date(b.valueOf()+g),w.start=r?r(_,a,l):_):w.end!=null&&(y=v.convert(u.data.end,"Date"),x=new Date(y.valueOf()+g),w.end=r?r(x,a,l):x);else if(w.start!=null)if(b=v.convert(u.data.start,"Date").valueOf(),_=new Date(b+g),w.end!=null){y=v.convert(u.data.end,"Date");const T=y.valueOf()-b.valueOf();w.start=r?r(_,a,l):_,w.end=new Date(w.start.valueOf()+T)}else w.start=r?r(_,a,l):_}if(d&&!u.dragLeft&&!u.dragRight&&c!=null&&w.group!=null){let T=c-u.groupOffset;T=Math.max(0,T),T=Math.min(t.groupIds.length-1,T),w.group=t.groupIds[T]}w=this._cloneItemData(w),t.options.onMoving(w,T=>{T&&u.item.setData(this._cloneItemData(T,"Date"))})}),this.body.emitter.emit("_change")}}_moveToGroup(e,t){const r=this.groups[t];if(r&&r.groupId!=e.data.group){const n=e.parent;n.remove(e),n.order(),e.data.group=r.groupId,r.add(e),r.order()}}_onDragEnd(e){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){e.stopPropagation();const t=this,r=this.touchParams.itemProps;this.touchParams.itemProps=null,r.forEach(n=>{const o=n.item.id;if(!(t.itemsData.get(o)!=null))t.options.onAdd(n.item.data,l=>{t._removeItem(n.item),l&&t.itemsData.add(l),t.body.emitter.emit("_change")});else{const l=this._cloneItemData(n.item.data);t.options.onMove(l,h=>{h?(h[this.itemsData.idProp]=o,this.itemsData.update(h)):(n.item.setData(n.data),t.body.emitter.emit("_change"))})}})}}_onGroupClick(e){const t=this.groupFromTarget(e);setTimeout(()=>{this.toggleGroupShowNested(t)},1)}toggleGroupShowNested(e,t=void 0){if(!e||!e.nestedGroups)return;const r=this.groupsData.getDataSet();t!=null?e.showNested=!!t:e.showNested=!e.showNested;let n=r.get(e.groupId);n.showNested=e.showNested;let o=e.nestedGroups,a=o;for(;a.length>0;){let d=a;a=[];for(let c=0;c<d.length;c++){let u=r.get(d[c]);u.nestedGroups&&(a=a.concat(u.nestedGroups))}a.length>0&&(o=o.concat(a))}var l;if(n.showNested){var h=r.get(n.nestedGroups);for(let d=0;d<h.length;d++){let c=h[d];c.nestedGroups&&c.nestedGroups.length>0&&(c.showNested==null||c.showNested==!0)&&h.push(...r.get(c.nestedGroups))}l=h.map(function(d){return d.visible==null&&(d.visible=!0),d.visible=!!n.showNested,d})}else l=r.get(o).map(function(d){return d.visible==null&&(d.visible=!0),d.visible=!!n.showNested,d});r.update(l.concat(n)),n.showNested?(v.removeClassName(e.dom.label,"collapsed"),v.addClassName(e.dom.label,"expanded")):(v.removeClassName(e.dom.label,"expanded"),v.addClassName(e.dom.label,"collapsed"))}toggleGroupDragClassName(e){e.dom.label.classList.toggle("vis-group-is-dragging"),e.dom.foreground.classList.toggle("vis-group-is-dragging")}_onGroupDragStart(e){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(e),this.groupTouchParams.group&&(e.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}_onGroupDrag(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const t=this.groupsData.getDataSet(),r=this.groupFromTarget(e);if(r&&r.height!=this.groupTouchParams.group.height){const n=r.top<this.groupTouchParams.group.top,o=e.center?e.center.y:e.clientY,a=r.dom.foreground.getBoundingClientRect(),l=this.groupTouchParams.group.height;if(n){if(a.top+l<o)return}else{const h=r.height;if(a.top+h-l>o)return}}if(r&&r!=this.groupTouchParams.group){const n=t.get(r.groupId),o=t.get(this.groupTouchParams.group.groupId);o&&n&&(this.options.groupOrderSwap(o,n,t),t.update(o),t.update(n));const a=t.getIds({order:this.options.groupOrder});if(!v.equalArray(a,this.groupTouchParams.originalOrder)){const l=this.groupTouchParams.originalOrder,h=this.groupTouchParams.group.groupId,d=Math.min(l.length,a.length);let c=0,u=0,p=0;for(;c<d;){for(;c+u<d&&c+p<d&&a[c+u]==l[c+p];)c++;if(c+u>=d)break;if(a[c+u]==h)u=1;else if(l[c+p]==h)p=1;else{const m=a.indexOf(l[c+p]),g=t.get(a[c+u]),b=t.get(l[c+p]);this.options.groupOrderSwap(g,b,t),t.update(g),t.update(b);const y=a[c+u];a[c+u]=l[c+p],a[m]=y,c++}}}}}}_onGroupDragEnd(e){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const t=this,r=t.groupTouchParams.group.groupId,n=t.groupsData.getDataSet(),o=v.extend({},n.get(r));t.options.onMoveGroup(o,a=>{if(a)a[n._idProp]=r,n.update(a);else{const l=n.getIds({order:t.options.groupOrder});if(!v.equalArray(l,t.groupTouchParams.originalOrder)){const h=t.groupTouchParams.originalOrder,d=Math.min(h.length,l.length);let c=0;for(;c<d;){for(;c<d&&l[c]==h[c];)c++;if(c>=d)break;const u=l.indexOf(h[c]),p=n.get(l[c]),m=n.get(h[c]);t.options.groupOrderSwap(p,m,n),n.update(p),n.update(m);const g=l[c];l[c]=h[c],l[u]=g,c++}}}}),t.body.emitter.emit("groupDragged",{groupId:r}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}_onSelectItem(e){if(!this.options.selectable)return;const t=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey),r=e.srcEvent&&e.srcEvent.shiftKey;if(t||r){this._onMultiSelectItem(e);return}const n=this.getSelection(),o=this.itemFromTarget(e),a=o&&o.selectable?[o.id]:[];this.setSelection(a);const l=this.getSelection();(l.length>0||n.length>0)&&this.body.emitter.emit("select",{items:l,event:e})}_onMouseOver(e){const t=this.itemFromTarget(e);if(!t)return;const r=this.itemFromRelatedTarget(e);if(t===r)return;const n=t.getTitle();if(this.options.showTooltips&&n){this.popup==null&&(this.popup=new Wv(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(n);const o=this.body.dom.centerContainer,a=o.getBoundingClientRect();this.popup.setPosition(e.clientX-a.left+o.offsetLeft,e.clientY-a.top+o.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:t.id,event:e})}_onMouseOut(e){const t=this.itemFromTarget(e);if(!t)return;const r=this.itemFromRelatedTarget(e);t!==r&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:t.id,event:e}))}_onMouseMove(e){if(this.itemFromTarget(e)&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){const r=this.body.dom.centerContainer,n=r.getBoundingClientRect();this.popup.setPosition(e.clientX-n.left+r.offsetLeft,e.clientY-n.top+r.offsetTop),this.popup.show()}}_onMouseWheel(e){this.touchParams.itemIsDragging&&this._onDragEnd(e)}_onUpdateItem(e){if(!this.options.selectable||!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;const t=this;if(e){const r=t.itemsData.get(e.id);this.options.onUpdate(r,n=>{n&&t.itemsData.update(n)})}}_onDropObjectOnItem(e){const t=this.itemFromTarget(e),r=JSON.parse(e.dataTransfer.getData("text"));this.options.onDropObjectOnItem(r,t)}_onAddItem(e){if(!this.options.selectable||!this.options.editable.add)return;const t=this,r=this.options.snap||null,n=this.dom.frame.getBoundingClientRect(),o=this.options.rtl?n.right-e.center.x:e.center.x-n.left,a=this.body.util.toTime(o),l=this.body.util.getScale(),h=this.body.util.getStep();let d,c;e.type=="drop"?(c=JSON.parse(e.dataTransfer.getData("text")),c.content=c.content?c.content:"new item",c.start=c.start?c.start:r?r(a,l,h):a,c.type=c.type||"box",c[this.itemsData.idProp]=c.id||nt(),c.type=="range"&&!c.end&&(d=this.body.util.toTime(o+this.props.width/5),c.end=r?r(d,l,h):d)):(c={start:r?r(a,l,h):a,content:"new item"},c[this.itemsData.idProp]=nt(),this.options.type==="range"&&(d=this.body.util.toTime(o+this.props.width/5),c.end=r?r(d,l,h):d));const u=this.groupFromTarget(e);u&&(c.group=u.groupId),c=this._cloneItemData(c),this.options.onAdd(c,p=>{p&&(t.itemsData.add(p),e.type=="drop"&&t.setSelection([p.id]))})}_onMultiSelectItem(e){if(!this.options.selectable)return;const t=this.itemFromTarget(e);if(t){let r=this.options.multiselect?this.getSelection():[];if((e.srcEvent&&e.srcEvent.shiftKey||!1||this.options.sequentialSelection)&&this.options.multiselect){const a=this.itemsData.get(t.id).group;let l;this.options.multiselectPerGroup&&r.length>0&&(l=this.itemsData.get(r[0]).group),(!this.options.multiselectPerGroup||l==null||l==a)&&r.push(t.id);const h=Ke._getItemRange(this.itemsData.get(r));if(!this.options.multiselectPerGroup||l==a){r=[];for(const d in this.items)if(this.items.hasOwnProperty(d)){const c=this.items[d],u=c.data.start,p=c.data.end!==void 0?c.data.end:u;u>=h.min&&p<=h.max&&(!this.options.multiselectPerGroup||l==this.itemsData.get(c.id).group)&&!(c instanceof Qe)&&r.push(c.id)}}}else{const a=r.indexOf(t.id);a==-1?r.push(t.id):r.splice(a,1)}const o=r.filter(a=>this.getItemById(a).selectable);this.setSelection(o),this.body.emitter.emit("select",{items:this.getSelection(),event:e})}}static _getItemRange(e){let t=null,r=null;return e.forEach(n=>{(r==null||n.start<r)&&(r=n.start),n.end!=null?(t==null||n.end>t)&&(t=n.end):(t==null||n.start>t)&&(t=n.start)}),{min:r,max:t}}itemFromElement(e){let t=e;for(;t;){if(t.hasOwnProperty("vis-item"))return t["vis-item"];t=t.parentNode}return null}itemFromTarget(e){return this.itemFromElement(e.target)}itemFromRelatedTarget(e){return this.itemFromElement(e.relatedTarget)}groupFromTarget(e){const t=e.center?e.center.y:e.clientY;let r=this.groupIds;r.length<=0&&this.groupsData&&(r=this.groupsData.getIds({order:this.options.groupOrder}));for(let n=0;n<r.length;n++){const o=r[n],a=this.groups[o],l=a.dom.foreground,h=l.getBoundingClientRect();if(t>=h.top&&t<h.top+l.offsetHeight)return a;if(this.options.orientation.item==="top"){if(n===this.groupIds.length-1&&t>h.top)return a}else if(n===0&&t<h.top+l.offset)return a}return null}static itemSetFromTarget(e){let t=e.target;for(;t;){if(t.hasOwnProperty("vis-itemset"))return t["vis-itemset"];t=t.parentNode}return null}_cloneItemData(e,t){const r=v.extend({},e);return t||(t=this.itemsData.type),r.start!=null&&(r.start=v.convert(r.start,t&&t.start||"Date")),r.end!=null&&(r.end=v.convert(r.end,t&&t.end||"Date")),r}_clusterItems(){if(!this.options.cluster)return;const{scale:e}=this.body.range.conversion(this.body.domProps.center.width),t=this.clusterGenerator.getClusters(this.clusters,e,this.options.cluster);if(this.clusters!=t){if(this._detachAllClusters(),t){for(let r of t)r.attach();this.clusters=t}this._updateClusters(t)}}_detachAllClusters(){if(this.options.cluster&&this.clusters&&this.clusters.length)for(let e of this.clusters)e.detach()}_updateClusters(e){if(this.clusters&&this.clusters.length){const t=new Set(e.map(o=>o.id)),r=this.clusters.filter(o=>!t.has(o.id));let n=!1;for(let o of r){const a=this.selection.indexOf(o.id);a!==-1&&(o.unselect(),this.selection.splice(a,1),n=!0)}if(n){const o=this.getSelection();this.body.emitter.emit("select",{items:o,event})}}this.clusters=e||[]}}Ke.types={background:Qe,box:af,range:Xe,point:lf};Ke.prototype._onAdd=Ke.prototype._onUpdate;let Zt=!1,Sl,ss="background: #FFeeee; color: #dd0000";class V{constructor(){}static validate(e,t,r){Zt=!1,Sl=t;let n=t;return r!==void 0&&(n=t[r]),V.parse(e,n,[]),Zt}static parse(e,t,r){for(let n in e)e.hasOwnProperty(n)&&V.check(n,e,t,r)}static check(e,t,r,n){if(r[e]===void 0&&r.__any__===void 0){V.getSuggestion(e,r,n);return}let o=e,a=!0;r[e]===void 0&&r.__any__!==void 0&&(o="__any__",a=V.getType(t[e])==="object");let l=r[o];a&&l.__type__!==void 0&&(l=l.__type__),V.checkFields(e,t,r,o,l,n)}static checkFields(e,t,r,n,o,a){let l=function(c){console.log("%c"+c+V.printLocation(a,e),ss)},h=V.getType(t[e]),d=o[h];d!==void 0?V.getType(d)==="array"&&d.indexOf(t[e])===-1?(l('Invalid option detected in "'+e+'". Allowed values are:'+V.print(d)+' not "'+t[e]+'". '),Zt=!0):h==="object"&&n!=="__any__"&&(a=v.copyAndExtendArray(a,e),V.parse(t[e],r[n],a)):o.any===void 0&&(l('Invalid type received for "'+e+'". Expected: '+V.print(Object.keys(o))+". Received ["+h+'] "'+t[e]+'"'),Zt=!0)}static getType(e){var t=typeof e;return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}static getSuggestion(e,t,r){let n=V.findInOptions(e,t,r,!1),o=V.findInOptions(e,Sl,[],!0),a=8,l=4,h;n.indexMatch!==void 0?h=" in "+V.printLocation(n.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+n.indexMatch+`"?

`:o.distance<=l&&n.distance>o.distance?h=" in "+V.printLocation(n.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+V.printLocation(o.path,o.closestMatch,""):n.distance<=a?h='. Did you mean "'+n.closestMatch+'"?'+V.printLocation(n.path,e):h=". Did you mean one of these: "+V.print(Object.keys(t))+V.printLocation(r,e),console.log('%cUnknown option detected: "'+e+'"'+h,ss),Zt=!0}static findInOptions(e,t,r,n=!1){let o=1e9,a="",l=[],h=e.toLowerCase(),d;for(let c in t){let u;if(t[c].__type__!==void 0&&n===!0){let p=V.findInOptions(e,t[c],v.copyAndExtendArray(r,c));o>p.distance&&(a=p.closestMatch,l=p.path,o=p.distance,d=p.indexMatch)}else c.toLowerCase().indexOf(h)!==-1&&(d=c),u=V.levenshteinDistance(e,c),o>u&&(a=c,l=v.copyArray(r),o=u)}return{closestMatch:a,path:l,distance:o,indexMatch:d}}static printLocation(e,t,r=`Problem value found at: 
`){let n=`

`+r+`options = {
`;for(let o=0;o<e.length;o++){for(let a=0;a<o+1;a++)n+="  ";n+=e[o]+`: {
`}for(let o=0;o<e.length+1;o++)n+="  ";n+=t+`
`;for(let o=0;o<e.length+1;o++){for(let a=0;a<e.length-o;a++)n+="  ";n+=`}
`}return n+`

`}static print(e){return JSON.stringify(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}static levenshteinDistance(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;var r=[],n;for(n=0;n<=t.length;n++)r[n]=[n];var o;for(o=0;o<=e.length;o++)r[0][o]=o;for(n=1;n<=t.length;n++)for(o=1;o<=e.length;o++)t.charAt(n-1)==e.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[t.length][e.length]}}let O="string",N="boolean",z="number",Dl="array",Tt="date",K="object",Zv="dom",St="moment",kl="any",Jv={configure:{enabled:{boolean:N},filter:{boolean:N,function:"function"},container:{dom:Zv},__type__:{object:K,boolean:N,function:"function"}},align:{string:O},alignCurrentTime:{string:O,undefined:"undefined"},rtl:{boolean:N,undefined:"undefined"},rollingMode:{follow:{boolean:N},offset:{number:z,undefined:"undefined"},__type__:{object:K}},onTimeout:{timeoutMs:{number:z},callback:{function:"function"},__type__:{object:K}},verticalScroll:{boolean:N,undefined:"undefined"},horizontalScroll:{boolean:N,undefined:"undefined"},autoResize:{boolean:N},throttleRedraw:{number:z},clickToUse:{boolean:N},dataAttributes:{string:O,array:Dl},editable:{add:{boolean:N,undefined:"undefined"},remove:{boolean:N,undefined:"undefined"},updateGroup:{boolean:N,undefined:"undefined"},updateTime:{boolean:N,undefined:"undefined"},overrideItems:{boolean:N,undefined:"undefined"},__type__:{boolean:N,object:K}},end:{number:z,date:Tt,string:O,moment:St},format:{minorLabels:{millisecond:{string:O,undefined:"undefined"},second:{string:O,undefined:"undefined"},minute:{string:O,undefined:"undefined"},hour:{string:O,undefined:"undefined"},weekday:{string:O,undefined:"undefined"},day:{string:O,undefined:"undefined"},week:{string:O,undefined:"undefined"},month:{string:O,undefined:"undefined"},year:{string:O,undefined:"undefined"},__type__:{object:K,function:"function"}},majorLabels:{millisecond:{string:O,undefined:"undefined"},second:{string:O,undefined:"undefined"},minute:{string:O,undefined:"undefined"},hour:{string:O,undefined:"undefined"},weekday:{string:O,undefined:"undefined"},day:{string:O,undefined:"undefined"},week:{string:O,undefined:"undefined"},month:{string:O,undefined:"undefined"},year:{string:O,undefined:"undefined"},__type__:{object:K,function:"function"}},__type__:{object:K}},moment:{function:"function"},groupHeightMode:{string:O},groupOrder:{string:O,function:"function"},groupEditable:{add:{boolean:N,undefined:"undefined"},remove:{boolean:N,undefined:"undefined"},order:{boolean:N,undefined:"undefined"},__type__:{boolean:N,object:K}},groupOrderSwap:{function:"function"},height:{string:O,number:z},hiddenDates:{start:{date:Tt,number:z,string:O,moment:St},end:{date:Tt,number:z,string:O,moment:St},repeat:{string:O},__type__:{object:K,array:Dl}},itemsAlwaysDraggable:{item:{boolean:N,undefined:"undefined"},range:{boolean:N,undefined:"undefined"},__type__:{boolean:N,object:K}},limitSize:{boolean:N},locale:{string:O},locales:{__any__:{any:kl},__type__:{object:K}},longSelectPressTime:{number:z},margin:{axis:{number:z},item:{horizontal:{number:z,undefined:"undefined"},vertical:{number:z,undefined:"undefined"},__type__:{object:K,number:z}},__type__:{object:K,number:z}},max:{date:Tt,number:z,string:O,moment:St},maxHeight:{number:z,string:O},maxMinorChars:{number:z},min:{date:Tt,number:z,string:O,moment:St},minHeight:{number:z,string:O},moveable:{boolean:N},multiselect:{boolean:N},multiselectPerGroup:{boolean:N},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:O,undefined:"undefined"},item:{string:O,undefined:"undefined"},__type__:{string:O,object:K}},selectable:{boolean:N},sequentialSelection:{boolean:N},showCurrentTime:{boolean:N},showMajorLabels:{boolean:N},showMinorLabels:{boolean:N},showWeekScale:{boolean:N},stack:{boolean:N},stackSubgroups:{boolean:N},cluster:{maxItems:{number:z,undefined:"undefined"},titleTemplate:{string:O,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:N,undefined:"undefined"},fitOnDoubleClick:{boolean:N,undefined:"undefined"},__type__:{boolean:N,object:K}},snap:{function:"function",null:"null"},start:{date:Tt,number:z,string:O,moment:St},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:O,function:"function"},showTooltips:{boolean:N},tooltip:{followMouse:{boolean:N},overflowMethod:{string:["cap","flip","none"]},delay:{number:z},template:{function:"function"},__type__:{object:K}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:N,object:K}},timeAxis:{scale:{string:O,undefined:"undefined"},step:{number:z,undefined:"undefined"},__type__:{object:K}},type:{string:O},width:{string:O,number:z},preferZoom:{boolean:N},zoomable:{boolean:N},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:z},zoomMax:{number:z},zoomMin:{number:z},xss:{disabled:{boolean:N},filterOptions:{__any__:{any:kl},__type__:{object:K}},__type__:{object:K}},__type__:{object:K}},eb={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}};var tb={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};class ib{constructor(e=1){this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return tb[e]}setColor(e,t=!0){if(e==="none")return;let r;var n=this._isColorString(e);if(n!==void 0&&(e=n),v.isString(e)===!0){if(v.isValidRGB(e)===!0){let o=e.substr(4).substr(0,e.length-5).split(",");r={r:o[0],g:o[1],b:o[2],a:1}}else if(v.isValidRGBA(e)===!0){let o=e.substr(5).substr(0,e.length-6).split(",");r={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(v.isValidHex(e)===!0){let o=v.hexToRGB(e);r={r:o.r,g:o.g,b:o.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){let o=e.a!==void 0?e.a:"1.0";r={r:e.r,g:e.g,b:e.b,a:o}}if(r===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(e));this._setColor(r,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(e=!0){e===!0&&(this.previousColor=v.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e,t=!0){t===!0&&(this.initialColor=v.extend({},e)),this.color=e;let r=v.RGBToHSV(e.r,e.g,e.b),n=2*Math.PI,o=this.r*r.s,a=this.centerCoordinates.x+o*Math.sin(n*r.h),l=this.centerCoordinates.y+o*Math.cos(n*r.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){let t=v.RGBToHSV(this.color.r,this.color.g,this.color.b);t.v=e/100;let r=v.HSVToRGB(t.h,t.s,t.v);r.a=this.color.a,this.color=r,this._updatePicker()}_updatePicker(e=this.color){let t=v.RGBToHSV(e.r,e.g,e.b),r=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1)),r.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let n=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;r.clearRect(0,0,n,o),r.putImageData(this.hueCircle,0,0),r.fillStyle="rgba(0,0,0,"+(1-t.v)+")",r.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),r.fill(),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){let t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{let t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var e=this;this.opacityRange.onchange=function(){e._setOpacity(this.value)},this.opacityRange.oninput=function(){e._setOpacity(this.value)},this.brightnessRange.onchange=function(){e._setBrightness(this.value)},this.brightnessRange.oninput=function(){e._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new te(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),Vu(this.hammer,e=>{this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){let e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let t=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,r);let n,o,a,l;this.centerCoordinates={x:t*.5,y:r*.5},this.r=.49*t;let h=2*Math.PI/360,d=1/360,c=1/this.r,u;for(a=0;a<360;a++)for(l=0;l<this.r;l++)n=this.centerCoordinates.x+l*Math.sin(h*a),o=this.centerCoordinates.y+l*Math.cos(h*a),u=v.HSVToRGB(a*d,l*c,1),e.fillStyle="rgb("+u.r+","+u.g+","+u.b+")",e.fillRect(n-.5,o-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,r)}this.generated=!0}_moveSelector(e){let t=this.colorPickerDiv.getBoundingClientRect(),r=e.center.x-t.left,n=e.center.y-t.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=r-a,h=n-o,d=Math.atan2(l,h),c=.98*Math.min(Math.sqrt(l*l+h*h),a),u=Math.cos(d)*c+o,p=Math.sin(d)*c+a;this.colorPickerSelector.style.top=u-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=p-.5*this.colorPickerSelector.clientWidth+"px";let m=d/(2*Math.PI);m=m<0?m+1:m;let g=c/this.r,b=v.RGBToHSV(this.color.r,this.color.g,this.color.b);b.h=m,b.s=g;let y=v.HSVToRGB(b.h,b.s,b.v);y.a=this.color.a,this.color=y,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}class hf{constructor(e,t,r,n=1){this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},v.extend(this.options,this.defaultOptions),this.configureOptions=r,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new ib(n),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof e=="string")this.options.filter=e;else if(Array.isArray(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),e.filter!==void 0&&(this.options.filter=e.filter),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);this.options.filter===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];let e=this.options.filter,t=0,r=!1;for(let n in this.configureOptions)this.configureOptions.hasOwnProperty(n)&&(this.allowCreation=!1,r=!1,typeof e=="function"?(r=e(n,[]),r=r||this._handleObject(this.configureOptions[n],[n],!0)):(e===!0||e.indexOf(n)!==-1)&&(r=!0),r!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(n),this._handleObject(this.configureOptions[n],[n])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let t=this.moduleOptions;for(let r=0;r<e.length;r++)if(t[e[r]]!==void 0)t=t[e[r]];else{t=void 0;break}return t}_makeItem(e,...t){if(this.allowCreation===!0){let r=document.createElement("div");return r.className="vis-configuration vis-config-item vis-config-s"+e.length,t.forEach(n=>{r.appendChild(n)}),this.domElements.push(r),this.domElements.length}return 0}_makeHeader(e){let t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerHTML=v.xss(e),this._makeItem([],t)}_makeLabel(e,t,r=!1){let n=document.createElement("div");return n.className="vis-configuration vis-config-label vis-config-s"+t.length,r===!0?n.innerHTML=v.xss("<i><b>"+e+":</b></i>"):n.innerHTML=v.xss(e+":"),n}_makeDropdown(e,t,r){let n=document.createElement("select");n.className="vis-configuration vis-config-select";let o=0;t!==void 0&&e.indexOf(t)!==-1&&(o=e.indexOf(t));for(let h=0;h<e.length;h++){let d=document.createElement("option");d.value=e[h],h===o&&(d.selected="selected"),d.innerHTML=e[h],n.appendChild(d)}let a=this;n.onchange=function(){a._update(this.value,r)};let l=this._makeLabel(r[r.length-1],r);this._makeItem(r,l,n)}_makeRange(e,t,r){let n=e[0],o=e[1],a=e[2],l=e[3],h=document.createElement("input");h.className="vis-configuration vis-config-range";try{h.type="range",h.min=o,h.max=a}catch{}h.step=l;let d="",c=0;if(t!==void 0){let b=1.2;t<0&&t*b<o?(h.min=Math.ceil(t*b),c=h.min,d="range increased"):t/b<o&&(h.min=Math.ceil(t/b),c=h.min,d="range increased"),t*b>a&&a!==1&&(h.max=Math.ceil(t*b),c=h.max,d="range increased"),h.value=t}else h.value=n;let u=document.createElement("input");u.className="vis-configuration vis-config-rangeinput",u.value=Number(h.value);var p=this;h.onchange=function(){u.value=this.value,p._update(Number(this.value),r)},h.oninput=function(){u.value=this.value};let m=this._makeLabel(r[r.length-1],r),g=this._makeItem(r,m,h,u);d!==""&&this.popupHistory[g]!==c&&(this.popupHistory[g]=c,this._setupPopup(d,g))}_makeButton(){if(this.options.showButton===!0){let e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){let r=document.createElement("div");r.id="vis-configuration-popup",r.className="vis-configuration-popup",r.innerHTML=v.xss(e),r.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:r,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){let t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(()=>{this._removePopup()},1800)}}_makeCheckbox(e,t,r){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=e,t!==void 0&&(n.checked=t,t!==e&&(typeof e=="object"?t!==e.enabled&&this.changedOptions.push({path:r,value:t}):this.changedOptions.push({path:r,value:t})));let o=this;n.onchange=function(){o._update(this.checked,r)};let a=this._makeLabel(r[r.length-1],r);this._makeItem(r,a,n)}_makeTextInput(e,t,r){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=t,t!==e&&this.changedOptions.push({path:r,value:t});let o=this;n.onchange=function(){o._update(this.value,r)};let a=this._makeLabel(r[r.length-1],r);this._makeItem(r,a,n)}_makeColorField(e,t,r){let n=e[1],o=document.createElement("div");t=t===void 0?n:t,t!=="none"?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=t):o.className="vis-configuration vis-config-colorBlock none",t=t===void 0?n:t,o.onclick=()=>{this._showColorPicker(t,o,r)};let a=this._makeLabel(r[r.length-1],r);this._makeItem(r,a,o)}_showColorPicker(e,t,r){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(n=>{let o="rgba("+n.r+","+n.g+","+n.b+","+n.a+")";t.style.backgroundColor=o,this._update(o,r)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(e,t,r)}})}_handleObject(e,t=[],r=!1){let n=!1,o=this.options.filter,a=!1;for(let l in e)if(e.hasOwnProperty(l)){n=!0;let h=e[l],d=v.copyAndExtendArray(t,l);if(typeof o=="function"&&(n=o(l,t),n===!1&&!Array.isArray(h)&&typeof h!="string"&&typeof h!="boolean"&&h instanceof Object&&(this.allowCreation=!1,n=this._handleObject(h,d,!0),this.allowCreation=r===!1)),n!==!1){a=!0;let c=this._getValue(d);if(Array.isArray(h))this._handleArray(h,c,d);else if(typeof h=="string")this._makeTextInput(h,c,d);else if(typeof h=="boolean")this._makeCheckbox(h,c,d);else if(h instanceof Object){let u=!0;if(t.indexOf("physics")!==-1&&this.moduleOptions.physics.solver!==l&&(u=!1),u===!0)if(h.enabled!==void 0){let p=v.copyAndExtendArray(d,"enabled"),m=this._getValue(p);if(m===!0){let g=this._makeLabel(l,d,!0);this._makeItem(d,g),a=this._handleObject(h,d)||a}else this._makeCheckbox(h,m,d)}else{let p=this._makeLabel(l,d,!0);this._makeItem(d,p),a=this._handleObject(h,d)||a}}else console.error("dont know how to handle",h,l,d)}}return a}_handleArray(e,t,r){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,r),e[1]!==t&&this.changedOptions.push({path:r,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:Number(t)}))}_update(e,t){let r=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",r),this.initialized=!0,this.parent.setOptions(r)}_constructOptions(e,t,r={}){let n=r;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let o=0;o<t.length;o++)t[o]!=="global"&&(n[t[o]]===void 0&&(n[t[o]]={}),o!==t.length-1?n=n[t[o]]:n[t[o]]=e);return r}_printOptions(){let e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(e,null,2)+"</pre>"}getOptions(){let e={};for(var t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}}let sb=class df extends ot{constructor(e,t,r,n){if(super(),this.initTime=new Date,this.itemsDone=!1,!(this instanceof df))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(r)||je(r))&&r instanceof Object){const h=n;n=r,r=h}n&&n.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');const o=this;if(this.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:ne},this.options=v.deepExtend({},this.defaultOptions),n&&v.setupXSSProtection(n.xss),this._create(e),!n||n&&typeof n.rtl>"u"){this.dom.root.style.visibility="hidden";let h,d=this.dom.root;for(;!h&&d;)h=window.getComputedStyle(d,null).direction,d=d.parentElement;this.options.rtl=h&&h.toLowerCase()=="rtl"}else this.options.rtl=n.rtl;n&&(n.rollingMode&&(this.options.rollingMode=n.rollingMode),n.onInitialDrawComplete&&(this.options.onInitialDrawComplete=n.onInitialDrawComplete),n.onTimeout&&(this.options.onTimeout=n.onTimeout),n.loadingScreenTemplate&&(this.options.loadingScreenTemplate=n.loadingScreenTemplate));const a=document.createElement("div");if(this.options.loadingScreenTemplate){const h=this.options.loadingScreenTemplate.bind(this),d=h(this.dom.loadingScreen);d instanceof Object&&!(d instanceof Element)?h(a):d instanceof Element?(a.innerHTML="",a.appendChild(d)):d!=null&&(a.innerHTML=v.xss(d))}this.dom.loadingScreen.appendChild(a),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale(){return o.timeAxis.step.scale},getStep(){return o.timeAxis.step.step},toScreen:o._toScreen.bind(o),toGlobalScreen:o._toGlobalScreen.bind(o),toTime:o._toTime.bind(o),toGlobalTime:o._toGlobalTime.bind(o)}},this.range=new Si(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new yi(this.body,this.options),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new ja(this.body,this.options),this.components.push(this.currentTime),this.itemSet=new Ke(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null;function l(h,d){o.hasListeners(h)&&o.emit(h,o.getEventProperties(d))}this.dom.root.onclick=h=>{l("click",h)},this.dom.root.ondblclick=h=>{l("doubleClick",h)},this.dom.root.oncontextmenu=h=>{l("contextmenu",h)},this.dom.root.onmouseover=h=>{l("mouseOver",h)},window.PointerEvent?(this.dom.root.onpointerdown=h=>{l("mouseDown",h)},this.dom.root.onpointermove=h=>{l("mouseMove",h)},this.dom.root.onpointerup=h=>{l("mouseUp",h)}):(this.dom.root.onmousemove=h=>{l("mouseMove",h)},this.dom.root.onmousedown=h=>{l("mouseDown",h)},this.dom.root.onmouseup=h=>{l("mouseUp",h)}),this.initialFitDone=!1,this.on("changed",()=>{if(o.itemsData!=null){if(!o.initialFitDone&&!o.options.rollingMode)if(o.initialFitDone=!0,o.options.start!=null||o.options.end!=null){if(o.options.start==null||o.options.end==null)var h=o.getItemRange();const d=o.options.start!=null?o.options.start:h.min,c=o.options.end!=null?o.options.end:h.max;o.setWindow(d,c,{animation:!1})}else o.fit({animation:!1});!o.initialDrawDone&&(o.initialRangeChangeDone||!o.options.start&&!o.options.end||o.options.rollingMode)&&(o.initialDrawDone=!0,o.itemSet.initialDrawDone=!0,o.dom.root.style.visibility="visible",o.dom.loadingScreen.parentNode.removeChild(o.dom.loadingScreen),o.options.onInitialDrawComplete&&setTimeout(()=>o.options.onInitialDrawComplete(),0))}}),this.on("destroyTimeline",()=>{o.destroy()}),n&&this.setOptions(n),this.body.emitter.on("fit",h=>{this._onFit(h),this.redraw()}),r&&this.setGroups(r),t&&this.setItems(t),this._redraw()}_createConfigurator(){return new hf(this,this.dom.container,eb)}redraw(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}setOptions(e){if(V.validate(e,Jv)===!0&&console.log("%cErrors have been found in the supplied options object.",ss),ot.prototype.setOptions.call(this,e),"type"in e&&e.type!==this.options.type){this.options.type=e.type;const r=this.itemsData;if(r){const n=this.getSelection();this.setItems(null),this.setItems(r.rawDS),this.setSelection(n)}}}setItems(e){this.itemsDone=!1;let t;e?je(e)?t=Ft(e):t=Ft(new ct(e)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.itemSet&&this.itemSet.setItems(t!=null?t.rawDS:null)}setGroups(e){let t;const r=n=>n.visible!==!1;e?(Array.isArray(e)&&(e=new ct(e)),t=new fs(e,{filter:r})):t=null,this.groupsData!=null&&typeof this.groupsData.setData=="function"&&this.groupsData.setData(null),this.groupsData=t,this.itemSet.setGroups(t)}setData(e){e&&e.groups&&this.setGroups(e.groups),e&&e.items&&this.setItems(e.items)}setSelection(e,t){this.itemSet&&this.itemSet.setSelection(e),t&&t.focus&&this.focus(e,t)}getSelection(){return this.itemSet&&this.itemSet.getSelection()||[]}focus(e,t){if(!this.itemsData||e==null)return;const r=Array.isArray(e)?e:[e],n=this.itemsData.get(r);let o=null,a=null;if(n.forEach(l=>{const h=l.start.valueOf(),d="end"in l?l.end.valueOf():l.start.valueOf();(o===null||h<o)&&(o=h),(a===null||d>a)&&(a=d)}),o!==null&&a!==null){const l=this,h=this.itemSet.items[r[0]];let d=this._getScrollTop()*-1,c=null;const u=(x,w,D)=>{const T=El(l,h);if(T===!1||(c||(c=T),c.itemTop==T.itemTop&&!c.shouldScroll))return;c.itemTop!=T.itemTop&&T.shouldScroll&&(c=T,d=l._getScrollTop()*-1);const S=d,k=c.scrollOffset,P=D?k:S+(k-S)*x;l._setScrollTop(-P),w||l._redraw()},p=()=>{const x=El(l,h);x.shouldScroll&&x.itemTop!=c.itemTop&&(l._setScrollTop(-x.scrollOffset),l._redraw())},m=()=>{p(),setTimeout(p,100)},g=t&&t.zoom!==void 0?t.zoom:!0,b=(o+a)/2,y=g?(a-o)*1.1:Math.max(this.range.end-this.range.start,(a-o)*1.1),_=t&&t.animation!==void 0?t.animation:!0;_||(c={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.setRange(b-y/2,b+y/2,{animation:_},m,u)}}fit(e,t){const r=e&&e.animation!==void 0?e.animation:!0;let n;this.itemsData.length===1&&this.itemsData.get()[0].end===void 0?(n=this.getDataRange(),this.moveTo(n.min.valueOf(),{animation:r},t)):(n=this.getItemRange(),this.range.setRange(n.min,n.max,{animation:r},t))}getItemRange(){const e=this.getDataRange();let t=e.min!==null?e.min.valueOf():null,r=e.max!==null?e.max.valueOf():null,n=null,o=null;if(t!=null&&r!=null){let a=r-t;a<=0&&(a=10);const l=a/this.props.center.width,h={};let d=0;if(v.forEach(this.itemSet.items,(u,p)=>{u.groupShowing&&(h[p]=u.redraw(!0),d=h[p].length)}),d>0)for(let u=0;u<d;u++)v.forEach(h,p=>{p[u]()});if(v.forEach(this.itemSet.items,u=>{const p=Gs(u),m=Hs(u);let g,b;this.options.rtl?(g=p-(u.getWidthRight()+10)*l,b=m+(u.getWidthLeft()+10)*l):(g=p-(u.getWidthLeft()+10)*l,b=m+(u.getWidthRight()+10)*l),g<t&&(t=g,n=u),b>r&&(r=b,o=u)}),n&&o){const u=n.getWidthLeft()+10,p=o.getWidthRight()+10,m=this.props.center.width-u-p;m>0&&(this.options.rtl?(t=Gs(n)-p*a/m,r=Hs(o)+u*a/m):(t=Gs(n)-u*a/m,r=Hs(o)+p*a/m))}}return{min:t!=null?new Date(t):null,max:r!=null?new Date(r):null}}getDataRange(){let e=null,t=null;return this.itemsData&&this.itemsData.forEach(r=>{const n=v.convert(r.start,"Date").valueOf(),o=v.convert(r.end!=null?r.end:r.start,"Date").valueOf();(e===null||n<e)&&(e=n),(t===null||o>t)&&(t=o)}),{min:e!=null?new Date(e):null,max:t!=null?new Date(t):null}}getEventProperties(e){const t=e.center?e.center.x:e.clientX,r=e.center?e.center.y:e.clientY,n=this.dom.centerContainer.getBoundingClientRect(),o=this.options.rtl?n.right-t:t-n.left,a=r-n.top,l=this.itemSet.itemFromTarget(e),h=this.itemSet.groupFromTarget(e),d=bs.customTimeFromTarget(e),c=this.itemSet.options.snap||null,u=this.body.util.getScale(),p=this.body.util.getStep(),m=this._toTime(o),g=c?c(m,u,p):m,b=v.getTarget(e);let y=null;return l!=null?y="item":d!=null?y="custom-time":v.hasParent(b,this.timeAxis.dom.foreground)||this.timeAxis2&&v.hasParent(b,this.timeAxis2.dom.foreground)?y="axis":v.hasParent(b,this.itemSet.dom.labelSet)?y="group-label":v.hasParent(b,this.currentTime.bar)?y="current-time":v.hasParent(b,this.dom.center)&&(y="background"),{event:e,item:l?l.id:null,isCluster:l?!!l.isCluster:!1,items:l?l.items||[]:null,group:h?h.groupId:null,customTime:d?d.options.id:null,what:y,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:o,y:a,time:m,snappedTime:g}}toggleRollingMode(){this.range.rolling?this.range.stopRolling():(this.options.rollingMode==null&&this.setOptions(this.options),this.range.startRolling())}_redraw(){ot.prototype._redraw.call(this)}_onFit(e){const{start:t,end:r,animation:n}=e;r?this.range.setRange(t,r,{animation:n}):this.moveTo(t.valueOf(),{animation:n})}};function Gs(s){return v.convert(s.data.start,"Date").valueOf()}function Hs(s){const e=s.data.end!=null?s.data.end:s.data.start;return v.convert(e,"Date").valueOf()}function El(s,e){if(!e.parent)return!1;const t=s.options.rtl?s.props.rightContainer.height:s.props.leftContainer.height,r=s.props.center.height,n=e.parent;let o=n.top,a=!0;const l=s.timeAxis.options.orientation.axis,h=()=>l=="bottom"?n.height-e.top-e.height:e.top,d=s._getScrollTop()*-1,c=o+h(),u=e.height;return c<d?o+t<=o+h()+u&&(o+=h()-s.itemSet.options.margin.item.vertical):c+u>d+t?o+=h()+u-t+s.itemSet.options.margin.item.vertical:a=!1,o=Math.min(o,r-t),{shouldScroll:a,scrollOffset:o,itemTop:c}}function Ue(s){for(var e in s)s.hasOwnProperty(e)&&(s[e].redundant=s[e].used,s[e].used=[])}function pe(s){for(var e in s)if(s.hasOwnProperty(e)&&s[e].redundant){for(var t=0;t<s[e].redundant.length;t++)s[e].redundant[t].parentNode.removeChild(s[e].redundant[t]);s[e].redundant=[]}}function rb(s){Ue(s),pe(s),Ue(s)}function _e(s,e,t){var r;return e.hasOwnProperty(s)?e[s].redundant.length>0?(r=e[s].redundant[0],e[s].redundant.shift()):(r=document.createElementNS("http://www.w3.org/2000/svg",s),t.appendChild(r)):(r=document.createElementNS("http://www.w3.org/2000/svg",s),e[s]={used:[],redundant:[]},t.appendChild(r)),e[s].used.push(r),r}function Bs(s,e,t,r){var n;return e.hasOwnProperty(s)?e[s].redundant.length>0?(n=e[s].redundant[0],e[s].redundant.shift()):(n=document.createElement(s),r!==void 0?t.insertBefore(n,r):t.appendChild(n)):(n=document.createElement(s),e[s]={used:[],redundant:[]},r!==void 0?t.insertBefore(n,r):t.appendChild(n)),e[s].used.push(n),n}function qt(s,e,t,r,n,o){var a;if(t.style=="circle"?(a=_e("circle",r,n),a.setAttributeNS(null,"cx",s),a.setAttributeNS(null,"cy",e),a.setAttributeNS(null,"r",.5*t.size)):(a=_e("rect",r,n),a.setAttributeNS(null,"x",s-.5*t.size),a.setAttributeNS(null,"y",e-.5*t.size),a.setAttributeNS(null,"width",t.size),a.setAttributeNS(null,"height",t.size)),t.styles!==void 0&&a.setAttributeNS(null,"style",t.styles),a.setAttributeNS(null,"class",t.className+" vis-point"),o){var l=_e("text",r,n);o.xOffset&&(s=s+o.xOffset),o.yOffset&&(e=e+o.yOffset),o.content&&(l.textContent=o.content),o.className&&l.setAttributeNS(null,"class",o.className+" vis-label"),l.setAttributeNS(null,"x",s),l.setAttributeNS(null,"y",e)}return a}function da(s,e,t,r,n,o,a,l){if(r!=0){r<0&&(r*=-1,e-=r);var h=_e("rect",o,a);h.setAttributeNS(null,"x",s-.5*t),h.setAttributeNS(null,"y",e),h.setAttributeNS(null,"width",t),h.setAttributeNS(null,"height",r),h.setAttributeNS(null,"class",n),l&&h.setAttributeNS(null,"style",l)}}function nb(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch{return"en"}}class cf{constructor(e,t,r,n,o,a,l=!1,h=!1){if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=o,this.majorCharHeight=a,this._start=e,this._end=t,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=l,this.autoScaleStart=r,this.autoScaleEnd=n,this.formattingFunction=h,r||n){const d=this,c=u=>{const p=u-u%(d.magnitudefactor*d.minorSteps[d.minorStepIdx]);return u%(d.magnitudefactor*d.minorSteps[d.minorStepIdx])>.5*(d.magnitudefactor*d.minorSteps[d.minorStepIdx])?p+d.magnitudefactor*d.minorSteps[d.minorStepIdx]:p};r&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=c(this._start)),n&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=c(this._end)),this.determineScale()}}setCharHeight(e){this.majorCharHeight=e}setHeight(e){this.containerHeight=e}determineScale(){const e=this._end-this._start;this.scale=this.containerHeight/e;const t=this.majorCharHeight/this.scale,r=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,r);let n=0;r<0&&(n=r);let o=!1;for(let a=n;Math.abs(a)<=Math.abs(r);a++){this.magnitudefactor=Math.pow(10,a);for(let l=0;l<this.minorSteps.length;l++)if(this.magnitudefactor*this.minorSteps[l]>=t){o=!0,this.minorStepIdx=l;break}if(o===!0)break}}is_major(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0}getStep(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}getFirstMajor(){const e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)}formatValue(e){let t=e.toPrecision(5);return typeof this.formattingFunction=="function"&&(t=this.formattingFunction(e)),typeof t=="number"?`${t}`:typeof t=="string"?t:e.toPrecision(5)}getLines(){const e=[],t=this.getStep(),r=(t-this._start%t)%t;for(let n=this._start+r;this._end-n>1e-5;n+=t)n!=this._start&&e.push({major:this.is_major(n),y:this.convertValue(n),val:this.formatValue(n)});return e}followScale(e){const t=this.minorStepIdx,r=this._start,n=this._end,o=this,a=()=>{o.magnitudefactor*=2},l=()=>{o.magnitudefactor/=2};e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,t==2||a(),a()):(this.minorStepIdx=2,t==1||l(),l()));const h=e.convertValue(0),d=e.getStep()*e.scale;let c=!1,u=0;for(;!c&&u++<5;){this.scale=d/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);const p=this.containerHeight/this.scale;this._start=r,this._end=this._start+p;const m=this._end*this.scale,g=this.magnitudefactor*this.majorSteps[this.minorStepIdx],b=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){const y=h-m;this._end+=y/this.scale,this._start=this._end-p}else this.autoScaleStart?(this._start-=b/this.scale,this._end=this._start+p):(this._start+=g-b/this.scale,this._end=this._start+p);if(!this.autoScaleEnd&&this._end>n+1e-5){l(),c=!1;continue}if(!this.autoScaleStart&&this._start<r-1e-5)if(this.zeroAlign&&r>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{l(),c=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&p<n-r){a(),c=!1;continue}c=!0}}convertValue(e){return this.containerHeight-(e-this._start)*this.scale}screenToValue(e){return(this.containerHeight-e)/this.scale+this._start}}class ca extends Re{constructor(e,t,r,n){super(),this.id=nt(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format(a){return`${parseFloat(a.toPrecision(3))}`},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format(a){return`${parseFloat(a.toPrecision(3))}`},title:{text:void 0,style:void 0}}},this.linegraphOptions=n,this.linegraphSVG=r,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=v.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(t),this.width=Number(`${this.options.width}`.replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.scale==null&&this._redrawLabels(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};const o=this;this.body.emitter.on("verticalDrag",()=>{o.dom.lineContainer.style.top=`${o.body.domProps.scrollTop}px`})}addGroup(e,t){this.groups.hasOwnProperty(e)||(this.groups[e]=t),this.amountOfGroups+=1}updateGroup(e,t){this.groups.hasOwnProperty(e)||(this.amountOfGroups+=1),this.groups[e]=t}removeGroup(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],this.amountOfGroups-=1)}setOptions(e){if(e){let t=!1;this.options.orientation!=e.orientation&&e.orientation!==void 0&&(t=!0);const r=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];v.selectiveDeepExtend(r,this.options,e),this.minWidth=Number(`${this.options.width}`.replace("px","")),t===!0&&this.dom.frame&&(this.hide(),this.show())}}_create(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}_redrawGroupIcons(){Ue(this.svgElements);let e;const t=this.options.iconWidth,r=15,n=4;let o=n+.5*r;this.options.orientation==="left"?e=n:e=this.width-t-n;const a=Object.keys(this.groups);a.sort((l,h)=>l<h?-1:1);for(const l of a)this.groups[l].visible===!0&&(this.linegraphOptions.visibility[l]===void 0||this.linegraphOptions.visibility[l]===!0)&&(this.groups[l].getLegend(t,r,this.framework,e,o),o+=r+n);pe(this.svgElements),this.iconsRemoved=!1}_cleanupIcons(){this.iconsRemoved===!1&&(Ue(this.svgElements),pe(this.svgElements),this.iconsRemoved=!0)}show(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}hide(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}setRange(e,t){this.range.start=e,this.range.end=t}redraw(){let e=!1,t=0;this.dom.lineContainer.style.top=`${this.body.domProps.scrollTop}px`;for(const r in this.groups)this.groups.hasOwnProperty(r)&&this.groups[r].visible===!0&&(this.linegraphOptions.visibility[r]===void 0||this.linegraphOptions.visibility[r]===!0)&&t++;if(this.amountOfGroups===0||t===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=`${this.height}px`,this.width=this.options.visible===!0?Number(`${this.options.width}`.replace("px","")):0;const r=this.props,n=this.dom.frame;n.className="vis-data-axis",this._calculateCharSize();const o=this.options.orientation,a=this.options.showMinorLabels,l=this.options.showMajorLabels,h=this.body.dom.backgroundHorizontal.offsetWidth;r.minorLabelHeight=a?r.minorCharHeight:0,r.majorLabelHeight=l?r.majorCharHeight:0,r.minorLineWidth=h-this.lineOffset-this.width+2*this.options.minorLinesOffset,r.minorLineHeight=1,r.majorLineWidth=h-this.lineOffset-this.width+2*this.options.majorLinesOffset,r.majorLineHeight=1,o==="left"?(n.style.top="0",n.style.left="0",n.style.bottom="",n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(n.style.top="",n.style.bottom="0",n.style.left="0",n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),e=this._redrawLabels(),e=this._isResized()||e,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(o)}return e}_redrawLabels(){let e=!1;Ue(this.DOMelements.lines),Ue(this.DOMelements.labels);const t=this.options.orientation,r=this.options[t].range!=null?this.options[t].range:{};let n=!0;r.max!=null&&(this.range.end=r.max,n=!1);let o=!0;r.min!=null&&(this.range.start=r.min,o=!1),this.scale=new cf(this.range.start,this.range.end,o,n,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[t].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0,this.scale.getLines().forEach(d=>{const c=d.y,u=d.major;this.options.showMinorLabels&&u===!1&&this._redrawLabel(c-2,d.val,t,"vis-y-axis vis-minor",this.props.minorCharHeight),u&&c>=0&&this._redrawLabel(c-2,d.val,t,"vis-y-axis vis-major",this.props.majorCharHeight),this.master===!0&&(u?this._redrawLine(c,t,"vis-grid vis-horizontal vis-major",this.options.majorLinesOffset,this.props.majorLineWidth):this._redrawLine(c,t,"vis-grid vis-horizontal vis-minor",this.options.minorLinesOffset,this.props.minorLineWidth))});let l=0;this.options[t].title!==void 0&&this.options[t].title.text!==void 0&&(l=this.props.titleCharHeight);const h=this.options.icons===!0?Math.max(this.options.iconWidth,l)+this.options.labelOffsetX+15:l+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-h&&this.options.visible===!0?(this.width=this.maxLabelSize+h,this.options.width=`${this.width}px`,pe(this.DOMelements.lines),pe(this.DOMelements.labels),this.redraw(),e=!0):this.maxLabelSize<this.width-h&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+h),this.options.width=`${this.width}px`,pe(this.DOMelements.lines),pe(this.DOMelements.labels),this.redraw(),e=!0):(pe(this.DOMelements.lines),pe(this.DOMelements.labels),e=!1),e}convertValue(e){return this.scale.convertValue(e)}screenToValue(e){return this.scale.screenToValue(e)}_redrawLabel(e,t,r,n,o){const a=Bs("div",this.DOMelements.labels,this.dom.frame);a.className=n,a.innerHTML=v.xss(t),r==="left"?(a.style.left=`-${this.options.labelOffsetX}px`,a.style.textAlign="right"):(a.style.right=`-${this.options.labelOffsetX}px`,a.style.textAlign="left"),a.style.top=`${e-.5*o+this.options.labelOffsetY}px`,t+="";const l=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<t.length*l&&(this.maxLabelSize=t.length*l)}_redrawLine(e,t,r,n,o){if(this.master===!0){const a=Bs("div",this.DOMelements.lines,this.dom.lineContainer);a.className=r,a.innerHTML="",t==="left"?a.style.left=`${this.width-n}px`:a.style.right=`${this.width-n}px`,a.style.width=`${o}px`,a.style.top=`${e}px`}}_redrawTitle(e){if(Ue(this.DOMelements.title),this.options[e].title!==void 0&&this.options[e].title.text!==void 0){const t=Bs("div",this.DOMelements.title,this.dom.frame);t.className=`vis-y-axis vis-title vis-${e}`,t.innerHTML=v.xss(this.options[e].title.text),this.options[e].title.style!==void 0&&v.addCssText(t,this.options[e].title.style),e==="left"?t.style.left=`${this.props.titleCharHeight}px`:t.style.right=`${this.props.titleCharHeight}px`,t.style.width=`${this.height}px`}pe(this.DOMelements.title)}_calculateCharSize(){if(!("minorCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-minor vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.minorCharHeight=t.clientHeight,this.props.minorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("majorCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-major vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.majorCharHeight=t.clientHeight,this.props.majorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("titleCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-title vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.titleCharHeight=t.clientHeight,this.props.titleCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}}}function ki(s,e){}ki.draw=function(s,e,t,r){r=r||0;for(var n=ob(t,e),o=0;o<s.length;o++)if(!n)qt(s[o].screen_x+r,s[o].screen_y,ua(e),t.svgElements,t.svg,s[o].label);else{var a=n(s[o],e);(a===!0||typeof a=="object")&&qt(s[o].screen_x+r,s[o].screen_y,ua(e,a),t.svgElements,t.svg,s[o].label)}};ki.drawIcon=function(s,e,t,r,n,o){var a=n*.5,l=_e("rect",o.svgElements,o.svg);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",t-a),l.setAttributeNS(null,"width",r),l.setAttributeNS(null,"height",2*a),l.setAttributeNS(null,"class","vis-outline"),qt(e+.5*r,t,ua(s),o.svgElements,o.svg)};function ua(s,e){return e=typeof e>"u"?{}:e,{style:e.style||s.options.drawPoints.style,styles:e.styles||s.options.drawPoints.styles,size:e.size||s.options.drawPoints.size,className:e.className||s.className}}function ob(s,e){var t=void 0;return s.options&&s.options.drawPoints&&s.options.drawPoints.onRender&&typeof s.options.drawPoints.onRender=="function"&&(t=s.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&typeof e.group.options.drawPoints.onRender=="function"&&(t=e.group.options.drawPoints.onRender),t}function se(s,e){}se.drawIcon=function(s,e,t,r,n,o){var a=n*.5,l=_e("rect",o.svgElements,o.svg);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",t-a),l.setAttributeNS(null,"width",r),l.setAttributeNS(null,"height",2*a),l.setAttributeNS(null,"class","vis-outline");var h=Math.round(.3*r),d=s.options.barChart.width,c=d/h,u=Math.round(.4*n),p=Math.round(.75*n),m=Math.round((r-2*h)/3);if(da(e+.5*h+m,t+a-u-1,h,u,s.className+" vis-bar",o.svgElements,o.svg,s.style),da(e+1.5*h+m+2,t+a-p-1,h,p,s.className+" vis-bar",o.svgElements,o.svg,s.style),s.options.drawPoints.enabled==!0){var g={style:s.options.drawPoints.style,styles:s.options.drawPoints.styles,size:s.options.drawPoints.size/c,className:s.className};qt(e+.5*h+m,t+a-u-1,g,o.svgElements,o.svg),qt(e+1.5*h+m+2,t+a-p-1,g,o.svgElements,o.svg)}};se.draw=function(s,e,t){var r=[],n={},o,a,l,h,d,c,u=0;for(d=0;d<s.length;d++)if(h=t.groups[s[d]],h.options.style==="bar"&&h.visible===!0&&(t.options.groups.visibility[s[d]]===void 0||t.options.groups.visibility[s[d]]===!0))for(c=0;c<e[s[d]].length;c++)r.push({screen_x:e[s[d]][c].screen_x,screen_end:e[s[d]][c].screen_end,screen_y:e[s[d]][c].screen_y,x:e[s[d]][c].x,end:e[s[d]][c].end,y:e[s[d]][c].y,groupId:s[d],label:e[s[d]][c].label}),u+=1;if(u!==0)for(r.sort(function(b,y){return b.screen_x===y.screen_x?b.groupId<y.groupId?-1:1:b.screen_x-y.screen_x}),se._getDataIntersections(n,r),d=0;d<r.length;d++){h=t.groups[r[d].groupId];var p=h.options.barChart.minWidth!=null?h.options.barChart.minWidth:.1*h.options.barChart.width;a=r[d].screen_x;var m=0;if(n[a]===void 0)d+1<r.length&&(o=Math.abs(r[d+1].screen_x-a)),l=se._getSafeDrawData(o,h,p);else{var g=d+(n[a].amount-n[a].resolved);g<r.length&&(o=Math.abs(r[g].screen_x-a)),l=se._getSafeDrawData(o,h,p),n[a].resolved+=1,h.options.stack===!0&&h.options.excludeFromStacking!==!0?r[d].screen_y<h.zeroPosition?(m=n[a].accumulatedNegative,n[a].accumulatedNegative+=h.zeroPosition-r[d].screen_y):(m=n[a].accumulatedPositive,n[a].accumulatedPositive+=h.zeroPosition-r[d].screen_y):h.options.barChart.sideBySide===!0&&(l.width=l.width/n[a].amount,l.offset+=n[a].resolved*l.width-.5*l.width*(n[a].amount+1))}let b=l.width,y=r[d].screen_x;if(r[d].screen_end!=null?(b=r[d].screen_end-r[d].screen_x,y+=b*.5):y+=l.offset,da(y,r[d].screen_y-m,b,h.zeroPosition-r[d].screen_y,h.className+" vis-bar",t.svgElements,t.svg,h.style),h.options.drawPoints.enabled===!0){let _={screen_x:r[d].screen_x,screen_y:r[d].screen_y-m,x:r[d].x,y:r[d].y,groupId:r[d].groupId,label:r[d].label};ki.draw([_],h,t,l.offset)}}};se._getDataIntersections=function(s,e){for(var t,r=0;r<e.length;r++)r+1<e.length&&(t=Math.abs(e[r+1].screen_x-e[r].screen_x)),r>0&&(t=Math.min(t,Math.abs(e[r-1].screen_x-e[r].screen_x))),t===0&&(s[e[r].screen_x]===void 0&&(s[e[r].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),s[e[r].screen_x].amount+=1)};se._getSafeDrawData=function(s,e,t){var r,n;return s<e.options.barChart.width&&s>0?(r=s<t?t:s,n=0,e.options.barChart.align==="left"?n-=.5*s:e.options.barChart.align==="right"&&(n+=.5*s)):(r=e.options.barChart.width,n=0,e.options.barChart.align==="left"?n-=.5*e.options.barChart.width:e.options.barChart.align==="right"&&(n+=.5*e.options.barChart.width)),{width:r,offset:n}};se.getStackedYRange=function(s,e,t,r,n){if(s.length>0){s.sort(function(a,l){return a.screen_x===l.screen_x?a.groupId<l.groupId?-1:1:a.screen_x-l.screen_x});var o={};se._getDataIntersections(o,s),e[r]=se._getStackedYRange(o,s),e[r].yAxisOrientation=n,t.push(r)}};se._getStackedYRange=function(s,e){for(var t,r=e[0].screen_y,n=e[0].screen_y,o=0;o<e.length;o++)t=e[o].screen_x,s[t]===void 0?(r=r>e[o].screen_y?e[o].screen_y:r,n=n<e[o].screen_y?e[o].screen_y:n):e[o].screen_y<0?s[t].accumulatedNegative+=e[o].screen_y:s[t].accumulatedPositive+=e[o].screen_y;for(var a in s)s.hasOwnProperty(a)&&(r=r>s[a].accumulatedNegative?s[a].accumulatedNegative:r,r=r>s[a].accumulatedPositive?s[a].accumulatedPositive:r,n=n<s[a].accumulatedNegative?s[a].accumulatedNegative:n,n=n<s[a].accumulatedPositive?s[a].accumulatedPositive:n);return{min:r,max:n}};function J(s,e){}J.calcPath=function(s,e){if(s!=null&&s.length>0){var t=[];return e.options.interpolation.enabled==!0?t=J._catmullRom(s,e):t=J._linear(s),t}};J.drawIcon=function(s,e,t,r,n,o){var a=n*.5,l,h,d=_e("rect",o.svgElements,o.svg);if(d.setAttributeNS(null,"x",e),d.setAttributeNS(null,"y",t-a),d.setAttributeNS(null,"width",r),d.setAttributeNS(null,"height",2*a),d.setAttributeNS(null,"class","vis-outline"),l=_e("path",o.svgElements,o.svg),l.setAttributeNS(null,"class",s.className),s.style!==void 0&&l.setAttributeNS(null,"style",s.style),l.setAttributeNS(null,"d","M"+e+","+t+" L"+(e+r)+","+t),s.options.shaded.enabled==!0&&(h=_e("path",o.svgElements,o.svg),s.options.shaded.orientation=="top"?h.setAttributeNS(null,"d","M"+e+", "+(t-a)+"L"+e+","+t+" L"+(e+r)+","+t+" L"+(e+r)+","+(t-a)):h.setAttributeNS(null,"d","M"+e+","+t+" L"+e+","+(t+a)+" L"+(e+r)+","+(t+a)+"L"+(e+r)+","+t),h.setAttributeNS(null,"class",s.className+" vis-icon-fill"),s.options.shaded.style!==void 0&&s.options.shaded.style!==""&&h.setAttributeNS(null,"style",s.options.shaded.style)),s.options.drawPoints.enabled==!0){var c={style:s.options.drawPoints.style,styles:s.options.drawPoints.styles,size:s.options.drawPoints.size,className:s.className};qt(e+.5*r,t,c,o.svgElements,o.svg)}};J.drawShading=function(s,e,t,r){if(e.options.shaded.enabled==!0){var n=Number(r.svg.style.height.replace("px","")),o=_e("path",r.svgElements,r.svg),a="L";e.options.interpolation.enabled==!0&&(a="C");var l,h=0;e.options.shaded.orientation=="top"?h=0:e.options.shaded.orientation=="bottom"?h=n:h=Math.min(Math.max(0,e.zeroPosition),n),e.options.shaded.orientation=="group"&&t!=null&&t!=null?l="M"+s[0][0]+","+s[0][1]+" "+this.serializePath(s,a,!1)+" L"+t[t.length-1][0]+","+t[t.length-1][1]+" "+this.serializePath(t,a,!0)+t[0][0]+","+t[0][1]+" Z":l="M"+s[0][0]+","+s[0][1]+" "+this.serializePath(s,a,!1)+" V"+h+" H"+s[0][0]+" Z",o.setAttributeNS(null,"class",e.className+" vis-fill"),e.options.shaded.style!==void 0&&o.setAttributeNS(null,"style",e.options.shaded.style),o.setAttributeNS(null,"d",l)}};J.draw=function(s,e,t){if(s!=null&&s!=null){var r=_e("path",t.svgElements,t.svg);r.setAttributeNS(null,"class",e.className),e.style!==void 0&&r.setAttributeNS(null,"style",e.style);var n="L";e.options.interpolation.enabled==!0&&(n="C"),r.setAttributeNS(null,"d","M"+s[0][0]+","+s[0][1]+" "+this.serializePath(s,n,!1))}};J.serializePath=function(s,e,t){if(s.length<2)return"";var r=e,n;if(t)for(n=s.length-2;n>0;n--)r+=s[n][0]+","+s[n][1]+" ";else for(n=1;n<s.length;n++)r+=s[n][0]+","+s[n][1]+" ";return r};J._catmullRomUniform=function(s){var e,t,r,n,o,a,l=[];l.push([Math.round(s[0].screen_x),Math.round(s[0].screen_y)]);for(var h=1/6,d=s.length,c=0;c<d-1;c++)e=c==0?s[0]:s[c-1],t=s[c],r=s[c+1],n=c+2<d?s[c+2]:r,o={screen_x:(-e.screen_x+6*t.screen_x+r.screen_x)*h,screen_y:(-e.screen_y+6*t.screen_y+r.screen_y)*h},a={screen_x:(t.screen_x+6*r.screen_x-n.screen_x)*h,screen_y:(t.screen_y+6*r.screen_y-n.screen_y)*h},l.push([o.screen_x,o.screen_y]),l.push([a.screen_x,a.screen_y]),l.push([r.screen_x,r.screen_y]);return l};J._catmullRom=function(s,e){var t=e.options.interpolation.alpha;if(t==0||t===void 0)return this._catmullRomUniform(s);var r,n,o,a,l,h,d,c,u,p,m,g,b,y,_,x,w,D,T,S=[];S.push([Math.round(s[0].screen_x),Math.round(s[0].screen_y)]);for(var k=s.length,P=0;P<k-1;P++)r=P==0?s[0]:s[P-1],n=s[P],o=s[P+1],a=P+2<k?s[P+2]:o,d=Math.sqrt(Math.pow(r.screen_x-n.screen_x,2)+Math.pow(r.screen_y-n.screen_y,2)),c=Math.sqrt(Math.pow(n.screen_x-o.screen_x,2)+Math.pow(n.screen_y-o.screen_y,2)),u=Math.sqrt(Math.pow(o.screen_x-a.screen_x,2)+Math.pow(o.screen_y-a.screen_y,2)),y=Math.pow(u,t),x=Math.pow(u,2*t),_=Math.pow(c,t),w=Math.pow(c,2*t),T=Math.pow(d,t),D=Math.pow(d,2*t),p=2*D+3*T*_+w,m=2*x+3*y*_+w,g=3*T*(T+_),g>0&&(g=1/g),b=3*y*(y+_),b>0&&(b=1/b),l={screen_x:(-w*r.screen_x+p*n.screen_x+D*o.screen_x)*g,screen_y:(-w*r.screen_y+p*n.screen_y+D*o.screen_y)*g},h={screen_x:(x*n.screen_x+m*o.screen_x-w*a.screen_x)*b,screen_y:(x*n.screen_y+m*o.screen_y-w*a.screen_y)*b},l.screen_x==0&&l.screen_y==0&&(l=n),h.screen_x==0&&h.screen_y==0&&(h=o),S.push([l.screen_x,l.screen_y]),S.push([h.screen_x,h.screen_y]),S.push([o.screen_x,o.screen_y]);return S};J._linear=function(s){for(var e=[],t=0;t<s.length;t++)e.push([s[t].screen_x,s[t].screen_y]);return e};function Me(s,e,t,r){this.id=e;var n=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=v.selectiveBridgeObject(n,t),this.usingDefaultStyle=s.className===void 0,this.groupsUsingDefaultStyles=r,this.zeroPosition=0,this.update(s),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=s.visible===void 0?!0:s.visible}Me.prototype.setItems=function(s){s!=null?(this.itemsData=s,this.options.sort==!0&&v.insertSort(this.itemsData,function(e,t){return e.x>t.x?1:-1})):this.itemsData=[]};Me.prototype.getItems=function(){return this.itemsData};Me.prototype.setZeroPosition=function(s){this.zeroPosition=s};Me.prototype.setOptions=function(s){if(s!==void 0){var e=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];v.selectiveDeepExtend(e,this.options,s),typeof s.drawPoints=="function"&&(s.drawPoints={onRender:s.drawPoints}),v.mergeOptions(this.options,s,"interpolation"),v.mergeOptions(this.options,s,"drawPoints"),v.mergeOptions(this.options,s,"shaded"),s.interpolation&&typeof s.interpolation=="object"&&s.interpolation.parametrization&&(s.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:s.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}};Me.prototype.update=function(s){this.group=s,this.content=s.content||"graph",this.className=s.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=s.visible===void 0?!0:s.visible,this.style=s.style,this.setOptions(s.options)};Me.prototype.getLegend=function(s,e,t,r,n){if(t==null||t==null){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");t={svg:o,svgElements:{},options:this.options,groups:[this]}}switch((r==null||r==null)&&(r=0),(n==null||n==null)&&(n=.5*e),this.options.style){case"line":J.drawIcon(this,r,n,s,e,t);break;case"points":case"point":ki.drawIcon(this,r,n,s,e,t);break;case"bar":se.drawIcon(this,r,n,s,e,t);break}return{icon:t.svg,label:this.content,orientation:this.options.yAxisOrientation}};Me.prototype.getYRange=function(s){for(var e=s[0].y,t=s[0].y,r=0;r<s.length;r++)e=e>s[r].y?s[r].y:e,t=t<s[r].y?s[r].y:t;return{min:e,max:t,yAxisOrientation:this.options.yAxisOrientation}};function ae(s,e,t,r){this.body=s,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=t,this.options=v.extend({},this.defaultOptions),this.linegraphOptions=r,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}ae.prototype=new Re;ae.prototype.clear=function(){this.groups={},this.amountOfGroups=0};ae.prototype.addGroup=function(s,e){e.options.excludeFromLegend!=!0&&(this.groups.hasOwnProperty(s)||(this.groups[s]=e),this.amountOfGroups+=1)};ae.prototype.updateGroup=function(s,e){this.groups[s]=e};ae.prototype.removeGroup=function(s){this.groups.hasOwnProperty(s)&&(delete this.groups[s],this.amountOfGroups-=1)};ae.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)};ae.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};ae.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};ae.prototype.setOptions=function(s){var e=["enabled","orientation","icons","left","right"];v.selectiveDeepExtend(e,this.options,s)};ae.prototype.redraw=function(){var s=0,e=Object.keys(this.groups);e.sort(function(a,l){return a<l?-1:1});for(var t=0;t<e.length;t++){var r=e[t];this.groups[r].visible==!0&&(this.linegraphOptions.visibility[r]===void 0||this.linegraphOptions.visibility[r]==!0)&&s++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||s==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var n=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+n+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var o="";for(t=0;t<e.length;t++)r=e[t],this.groups[r].visible==!0&&(this.linegraphOptions.visibility[r]===void 0||this.linegraphOptions.visibility[r]==!0)&&(o+=this.groups[r].content+"<br />");this.dom.textArea.innerHTML=v.xss(o),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};ae.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var s=Object.keys(this.groups);s.sort(function(d,c){return d<c?-1:1}),rb(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,t=Number(e.replace("px","")),r=t,n=this.options.iconSize,o=.75*this.options.iconSize,a=t+.5*o+3;this.svg.style.width=n+5+t+"px";for(var l=0;l<s.length;l++){var h=s[l];this.groups[h].visible==!0&&(this.linegraphOptions.visibility[h]===void 0||this.linegraphOptions.visibility[h]==!0)&&(this.groups[h].getLegend(n,o,this.framework,r,a),a+=o+this.options.iconSpacing)}}};var rs="__ungrouped__";function F(s,e){this.id=nt(),this.body=s,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=v.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var t=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(r,n,o){t._onAdd(n.items)},update:function(r,n,o){t._onUpdate(n.items)},remove:function(r,n,o){t._onRemove(n.items)}},this.groupListeners={add:function(r,n,o){t._onAddGroups(n.items)},update:function(r,n,o){t._onUpdateGroups(n.items)},remove:function(r,n,o){t._onRemoveGroups(n.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){t.svg.style.left=v.option.asSize(-t.props.width),t.forceGraphUpdate=!0,t.redraw.call(t)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}F.prototype=new Re;F.prototype._create=function(){var s=document.createElement("div");s.className="vis-line-graph",this.dom.frame=s,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",s.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new ca(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new ca(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new ae(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new ae(this.body,this.options.legend,"right",this.options.groups),this.show()};F.prototype.setOptions=function(s){if(s){var e=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];s.graphHeight===void 0&&s.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&s.graphHeight!==void 0&&parseInt((s.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),v.selectiveDeepExtend(e,this.options,s),v.mergeOptions(this.options,s,"interpolation"),v.mergeOptions(this.options,s,"drawPoints"),v.mergeOptions(this.options,s,"shaded"),v.mergeOptions(this.options,s,"legend"),s.interpolation&&typeof s.interpolation=="object"&&s.interpolation.parametrization&&(s.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:s.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&s.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&s.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(rs)&&this.groups[rs].setOptions(s)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};F.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};F.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};F.prototype.setItems=function(s){var e=this,t,r=this.itemsData;if(!s)this.itemsData=null;else if(je(s))this.itemsData=Ft(s);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(r&&(v.forEach(this.itemListeners,function(o,a){r.off(a,o)}),r.dispose(),t=r.getIds(),this._onRemove(t)),this.itemsData){var n=this.id;v.forEach(this.itemListeners,function(o,a){e.itemsData.on(a,o,n)}),t=this.itemsData.getIds(),this._onAdd(t)}};F.prototype.setGroups=function(s){var e=this,t;if(this.groupsData){v.forEach(this.groupListeners,function(o,a){e.groupsData.off(a,o)}),t=this.groupsData.getIds(),this.groupsData=null;for(var r=0;r<t.length;r++)this._removeGroup(t[r])}if(!s)this.groupsData=null;else if(je(s))this.groupsData=s;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var n=this.id;v.forEach(this.groupListeners,function(o,a){e.groupsData.on(a,o,n)}),t=this.groupsData.getIds(),this._onAddGroups(t)}};F.prototype._onUpdate=function(s){this._updateAllGroupData(s)};F.prototype._onAdd=function(s){this._onUpdate(s)};F.prototype._onRemove=function(s){this._onUpdate(s)};F.prototype._onUpdateGroups=function(s){this._updateAllGroupData(null,s)};F.prototype._onAddGroups=function(s){this._onUpdateGroups(s)};F.prototype._onRemoveGroups=function(s){for(var e=0;e<s.length;e++)this._removeGroup(s[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})};F.prototype._removeGroup=function(s){this.groups.hasOwnProperty(s)&&(this.groups[s].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(s),this.legendRight.removeGroup(s),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(s),this.legendLeft.removeGroup(s),this.legendLeft.redraw()),delete this.groups[s])};F.prototype._updateGroup=function(s,e){this.groups.hasOwnProperty(e)?(this.groups[e].update(s),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new Me(s,e,this.options,this.groupsUsingDefaultStyles),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()};F.prototype._updateAllGroupData=function(s,e){if(this.itemsData!=null){var t={},r=this.itemsData.get(),n=this.itemsData.idProp,o={};s&&s.map(function(y){o[y]=y});for(var a={},l=0;l<r.length;l++){var h=r[l],d=h.group;d==null&&(d=rs),a.hasOwnProperty(d)?a[d]++:a[d]=1}var c={};if(!e&&s){for(d in this.groups)if(this.groups.hasOwnProperty(d)){b=this.groups[d];var u=b.getItems();t[d]=u.filter(function(y){return c[y[n]]=y[n],y[n]!==o[y[n]]});var p=a[d];a[d]-=t[d].length,t[d].length<p&&(t[d][p-1]={})}}for(l=0;l<r.length;l++)if(h=r[l],d=h.group,d==null&&(d=rs),!(!e&&s&&h[n]!==o[h[n]]&&c.hasOwnProperty(h[n]))){t.hasOwnProperty(d)||(t[d]=new Array(a[d]));var m=v.bridgeObject(h);m.x=v.convert(h.x,"Date"),m.end=v.convert(h.end,"Date"),m.orginalY=h.y,m.y=Number(h.y),m[n]=h[n];var g=t[d].length-a[d]--;t[d][g]=m}for(d in this.groups)this.groups.hasOwnProperty(d)&&(t.hasOwnProperty(d)||(t[d]=new Array(0)));for(d in t)if(t.hasOwnProperty(d))if(t[d].length==0)this.groups.hasOwnProperty(d)&&this._removeGroup(d);else{var b=void 0;this.groupsData!=null&&(b=this.groupsData.get(d)),b==null&&(b={id:d,content:this.options.defaultGroup+d}),this._updateGroup(b,d),this.groups[d].setItems(t[d])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}};F.prototype.redraw=function(){var s=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,s=this._isResized()||s;var e=this.body.range.end-this.body.range.start,t=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,s==!0&&(this.svg.style.width=v.option.asSize(3*this.props.width),this.svg.style.left=v.option.asSize(-this.props.width),((this.options.height+"").indexOf("%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)),this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",s==!0||t==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)s=this._updateGraph()||s,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var r=this.body.range.start-this.lastStart,n=this.body.range.end-this.body.range.start;if(this.props.width!=0){var o=this.props.width/n,a=r*o;this.svg.style.left=-this.props.width-a+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),s};F.prototype._getSortedGroupIds=function(){var s=[];for(var e in this.groups)if(this.groups.hasOwnProperty(e)){var t=this.groups[e];t.visible==!0&&(this.options.groups.visibility[e]===void 0||this.options.groups.visibility[e]==!0)&&s.push({id:e,zIndex:t.options.zIndex})}v.insertSort(s,function(o,a){var l=o.zIndex,h=a.zIndex;return l===void 0&&(l=0),h===void 0&&(h=0),l==h?0:l<h?-1:1});for(var r=new Array(s.length),n=0;n<s.length;n++)r[n]=s[n].id;return r};F.prototype._updateGraph=function(){if(Ue(this.svgElements),this.props.width!=0&&this.itemsData!=null){var s,e,t={},r=!1,n=this.body.util.toGlobalTime(-this.body.domProps.root.width),o=this.body.util.toGlobalTime(2*this.body.domProps.root.width),a=this._getSortedGroupIds();if(a.length>0){var l={};for(this._getRelevantData(a,l,n,o),this._applySampling(a,l),e=0;e<a.length;e++)this._convertXcoordinates(l[a[e]]);if(this._getYRanges(a,l,t),r=this._updateYAxis(a,t),r==!0)return pe(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var h=void 0;for(e=0;e<a.length;e++)s=this.groups[a[e]],this.options.stack===!0&&this.options.style==="line"&&(s.options.excludeFromStacking==null||!s.options.excludeFromStacking)&&(h!=null&&(this._stack(l[s.id],l[h.id]),s.options.shaded.enabled==!0&&s.options.shaded.orientation!=="group"&&(s.options.shaded.orientation=="top"&&h.options.shaded.orientation!=="group"?(h.options.shaded.orientation="group",h.options.shaded.groupId=s.id):(s.options.shaded.orientation="group",s.options.shaded.groupId=h.id))),h=s),this._convertYcoordinates(l[a[e]],s);var d={};for(e=0;e<a.length;e++)if(s=this.groups[a[e]],s.options.style==="line"&&s.options.shaded.enabled==!0){var c=l[a[e]];if(c==null||c.length==0)continue;if(d.hasOwnProperty(a[e])||(d[a[e]]=J.calcPath(c,s)),s.options.shaded.orientation==="group"){var u=s.options.shaded.groupId;if(a.indexOf(u)===-1){console.log(s.id+": Unknown shading group target given:"+u);continue}d.hasOwnProperty(u)||(d[u]=J.calcPath(l[u],this.groups[u])),J.drawShading(d[a[e]],s,d[u],this.framework)}else J.drawShading(d[a[e]],s,void 0,this.framework)}for(se.draw(a,l,this.framework),e=0;e<a.length;e++)if(s=this.groups[a[e]],l[a[e]].length>0)switch(s.options.style){case"line":d.hasOwnProperty(a[e])||(d[a[e]]=J.calcPath(l[a[e]],s)),J.draw(d[a[e]],s,this.framework);case"point":case"points":(s.options.style=="point"||s.options.style=="points"||s.options.drawPoints.enabled==!0)&&ki.draw(l[a[e]],s,this.framework);break}}}return pe(this.svgElements),!1};F.prototype._stack=function(s,e){var t,r,n,o,a;t=0;for(var l=0;l<s.length;l++){o=void 0,a=void 0;for(var h=t;h<e.length;h++)if(e[h].x===s[l].x){o=e[h],a=e[h],t=h;break}else if(e[h].x>s[l].x){a=e[h],h==0?o=a:o=e[h-1],t=h;break}a===void 0&&(o=e[e.length-1],a=e[e.length-1]),r=a.x-o.x,n=a.y-o.y,r==0?s[l].y=s[l].orginalY+a.y:s[l].y=s[l].orginalY+n/r*(s[l].x-o.x)+o.y}};F.prototype._getRelevantData=function(s,e,t,r){var n,o,a,l;if(s.length>0)for(o=0;o<s.length;o++){n=this.groups[s[o]];var h=n.getItems();if(n.options.sort==!0){var d=function(m,g){return m.getTime()==g.getTime()?0:m<g?-1:1},c=Math.max(0,v.binarySearchValue(h,t,"x","before",d)),u=Math.min(h.length,v.binarySearchValue(h,r,"x","after",d)+1);u<=0&&(u=h.length);var p=new Array(u-c);for(a=c;a<u;a++)l=n.itemsData[a],p[a-c]=l;e[s[o]]=p}else e[s[o]]=n.itemsData}};F.prototype._applySampling=function(s,e){var t;if(s.length>0){for(var r=0;r<s.length;r++)if(t=this.groups[s[r]],t.options.sampling==!0){var n=e[s[r]];if(n.length>0){var o=1,a=n.length,l=this.body.util.toGlobalScreen(n[n.length-1].x)-this.body.util.toGlobalScreen(n[0].x),h=a/l;o=Math.min(Math.ceil(.2*a),Math.max(1,Math.round(h)));for(var d=new Array(a),c=0;c<a;c+=o){var u=Math.round(c/o);d[u]=n[c]}e[s[r]]=d.splice(0,Math.round(a/o))}}}};F.prototype._getYRanges=function(s,e,t){var r,n,o,a=[],l=[],h;if(s.length>0){for(o=0;o<s.length;o++)r=e[s[o]],h=this.groups[s[o]].options,r.length>0&&(n=this.groups[s[o]],h.stack===!0&&h.style==="bar"?h.yAxisOrientation==="left"?a=a.concat(r):l=l.concat(r):t[s[o]]=n.getYRange(r,s[o]));se.getStackedYRange(a,t,s,"__barStackLeft","left"),se.getStackedYRange(l,t,s,"__barStackRight","right")}};F.prototype._updateYAxis=function(s,e){var t=!1,r=!1,n=!1,o=1e9,a=1e9,l=-1e9,h=-1e9,d,c;if(s.length>0){for(var u=0;u<s.length;u++){var p=this.groups[s[u]];p&&p.options.yAxisOrientation!="right"?(r=!0,o=1e9,l=-1e9):p&&p.options.yAxisOrientation&&(n=!0,a=1e9,h=-1e9)}for(u=0;u<s.length;u++)e.hasOwnProperty(s[u])&&e[s[u]].ignore!==!0&&(d=e[s[u]].min,c=e[s[u]].max,e[s[u]].yAxisOrientation!="right"?(r=!0,o=o>d?d:o,l=l<c?c:l):(n=!0,a=a>d?d:a,h=h<c?c:h));r==!0&&this.yAxisLeft.setRange(o,l),n==!0&&this.yAxisRight.setRange(a,h)}t=this._toggleAxisVisiblity(r,this.yAxisLeft)||t,t=this._toggleAxisVisiblity(n,this.yAxisRight)||t,n==!0&&r==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!r,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(n==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,t=this.yAxisLeft.redraw()||t,t=this.yAxisRight.redraw()||t):t=this.yAxisRight.redraw()||t;var m=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(u=0;u<m.length;u++)s.indexOf(m[u])!=-1&&s.splice(s.indexOf(m[u]),1);return t};F.prototype._toggleAxisVisiblity=function(s,e){var t=!1;return s==!1?e.dom.frame.parentNode&&e.hidden==!1&&(e.hide(),t=!0):!e.dom.frame.parentNode&&e.hidden==!0&&(e.show(),t=!0),t};F.prototype._convertXcoordinates=function(s){for(var e=this.body.util.toScreen,t=0;t<s.length;t++)s[t].screen_x=e(s[t].x)+this.props.width,s[t].screen_y=s[t].y,s[t].end!=null?s[t].screen_end=e(s[t].end)+this.props.width:s[t].screen_end=void 0};F.prototype._convertYcoordinates=function(s,e){var t=this.yAxisLeft,r=Number(this.svg.style.height.replace("px",""));e.options.yAxisOrientation=="right"&&(t=this.yAxisRight);for(var n=0;n<s.length;n++)s[n].screen_y=Math.round(t.convertValue(s[n].y));e.setZeroPosition(Math.min(r,t.convertValue(0)))};let A="string",j="boolean",L="number",ab="array",Dt="date",U="object",lb="dom",kt="moment",Nl="any",hb={configure:{enabled:{boolean:j},filter:{boolean:j,function:"function"},container:{dom:lb},__type__:{object:U,boolean:j,function:"function"}},alignCurrentTime:{string:A,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:A},sort:{boolean:j},sampling:{boolean:j},stack:{boolean:j},graphHeight:{string:A,number:L},shaded:{enabled:{boolean:j},orientation:{string:["bottom","top","zero","group"]},groupId:{object:U},__type__:{boolean:j,object:U}},style:{string:["line","bar","points"]},barChart:{width:{number:L},minWidth:{number:L},sideBySide:{boolean:j},align:{string:["left","center","right"]},__type__:{object:U}},interpolation:{enabled:{boolean:j},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:L},__type__:{object:U,boolean:j}},drawPoints:{enabled:{boolean:j},onRender:{function:"function"},size:{number:L},style:{string:["square","circle"]},__type__:{object:U,boolean:j,function:"function"}},dataAxis:{showMinorLabels:{boolean:j},showMajorLabels:{boolean:j},showWeekScale:{boolean:j},icons:{boolean:j},width:{string:A,number:L},visible:{boolean:j},alignZeros:{boolean:j},left:{range:{min:{number:L,undefined:"undefined"},max:{number:L,undefined:"undefined"},__type__:{object:U}},format:{function:"function"},title:{text:{string:A,number:L,undefined:"undefined"},style:{string:A,undefined:"undefined"},__type__:{object:U}},__type__:{object:U}},right:{range:{min:{number:L,undefined:"undefined"},max:{number:L,undefined:"undefined"},__type__:{object:U}},format:{function:"function"},title:{text:{string:A,number:L,undefined:"undefined"},style:{string:A,undefined:"undefined"},__type__:{object:U}},__type__:{object:U}},__type__:{object:U}},legend:{enabled:{boolean:j},icons:{boolean:j},left:{visible:{boolean:j},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:U}},right:{visible:{boolean:j},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:U}},__type__:{object:U,boolean:j}},groups:{visibility:{any:Nl},__type__:{object:U}},autoResize:{boolean:j},throttleRedraw:{number:L},clickToUse:{boolean:j},end:{number:L,date:Dt,string:A,moment:kt},format:{minorLabels:{millisecond:{string:A,undefined:"undefined"},second:{string:A,undefined:"undefined"},minute:{string:A,undefined:"undefined"},hour:{string:A,undefined:"undefined"},weekday:{string:A,undefined:"undefined"},day:{string:A,undefined:"undefined"},week:{string:A,undefined:"undefined"},month:{string:A,undefined:"undefined"},quarter:{string:A,undefined:"undefined"},year:{string:A,undefined:"undefined"},__type__:{object:U}},majorLabels:{millisecond:{string:A,undefined:"undefined"},second:{string:A,undefined:"undefined"},minute:{string:A,undefined:"undefined"},hour:{string:A,undefined:"undefined"},weekday:{string:A,undefined:"undefined"},day:{string:A,undefined:"undefined"},week:{string:A,undefined:"undefined"},month:{string:A,undefined:"undefined"},quarter:{string:A,undefined:"undefined"},year:{string:A,undefined:"undefined"},__type__:{object:U}},__type__:{object:U}},moment:{function:"function"},height:{string:A,number:L},hiddenDates:{start:{date:Dt,number:L,string:A,moment:kt},end:{date:Dt,number:L,string:A,moment:kt},repeat:{string:A},__type__:{object:U,array:ab}},locale:{string:A},locales:{__any__:{any:Nl},__type__:{object:U}},max:{date:Dt,number:L,string:A,moment:kt},maxHeight:{number:L,string:A},maxMinorChars:{number:L},min:{date:Dt,number:L,string:A,moment:kt},minHeight:{number:L,string:A},moveable:{boolean:j},multiselect:{boolean:j},orientation:{string:A},showCurrentTime:{boolean:j},showMajorLabels:{boolean:j},showMinorLabels:{boolean:j},showWeekScale:{boolean:j},snap:{function:"function",null:"null"},start:{date:Dt,number:L,string:A,moment:kt},timeAxis:{scale:{string:A,undefined:"undefined"},step:{number:L,undefined:"undefined"},__type__:{object:U}},width:{string:A,number:L},zoomable:{boolean:j},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:L},zoomMin:{number:L},zIndex:{number:L},__type__:{object:U}},db={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function Ee(s,e,t,r){if(!(Array.isArray(t)||je(t))&&t instanceof Object){var n=r;r=t,t=n}r&&r.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var o=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:ne,width:null,height:null,maxHeight:null,minHeight:null},this.options=v.deepExtend({},this.defaultOptions),this._create(s),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale(){return o.timeAxis.step.scale},getStep(){return o.timeAxis.step.step},toScreen:o._toScreen.bind(o),toGlobalScreen:o._toGlobalScreen.bind(o),toTime:o._toTime.bind(o),toGlobalTime:o._toGlobalTime.bind(o)}},this.range=new Si(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new yi(this.body),this.components.push(this.timeAxis),this.currentTime=new ja(this.body),this.components.push(this.currentTime),this.linegraph=new F(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(a){o.emit("click",o.getEventProperties(a))}),this.on("doubletap",function(a){o.emit("doubleClick",o.getEventProperties(a))}),this.dom.root.oncontextmenu=function(a){o.emit("contextmenu",o.getEventProperties(a))},this.initialFitDone=!1,this.on("changed",function(){if(o.itemsData!=null){if(!o.initialFitDone&&!o.options.rollingMode)if(o.initialFitDone=!0,o.options.start!=null||o.options.end!=null){if(o.options.start==null||o.options.end==null)var a=o.getItemRange();var l=o.options.start!=null?o.options.start:a.min,h=o.options.end!=null?o.options.end:a.max;o.setWindow(l,h,{animation:!1})}else o.fit({animation:!1});!o.initialDrawDone&&(o.initialRangeChangeDone||!o.options.start&&!o.options.end||o.options.rollingMode)&&(o.initialDrawDone=!0,o.dom.root.style.visibility="visible",o.dom.loadingScreen.parentNode.removeChild(o.dom.loadingScreen),o.options.onInitialDrawComplete&&setTimeout(()=>o.options.onInitialDrawComplete(),0))}}),r&&this.setOptions(r),t&&this.setGroups(t),e&&this.setItems(e),this._redraw()}Ee.prototype=new ot;Ee.prototype.setOptions=function(s){V.validate(s,hb)===!0&&console.log("%cErrors have been found in the supplied options object.",ss),ot.prototype.setOptions.call(this,s)};Ee.prototype.setItems=function(s){var e=this.itemsData==null,t;if(s?je(s)?t=Ft(s):t=Ft(new ct(s)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.linegraph&&this.linegraph.setItems(t!=null?t.rawDS:null),e)if(this.options.start!=null||this.options.end!=null){var r=this.options.start!=null?this.options.start:null,n=this.options.end!=null?this.options.end:null;this.setWindow(r,n,{animation:!1})}else this.fit({animation:!1})};Ee.prototype.setGroups=function(s){var e;s?je(s)?e=s:e=new ct(s):e=null,this.groupsData=e,this.linegraph.setGroups(e)};Ee.prototype.getLegend=function(s,e,t){return e===void 0&&(e=15),t===void 0&&(t=15),this.linegraph.groups[s]!==void 0?this.linegraph.groups[s].getLegend(e,t):"cannot find group:'"+s+"'"};Ee.prototype.isGroupVisible=function(s){return this.linegraph.groups[s]!==void 0?this.linegraph.groups[s].visible&&(this.linegraph.options.groups.visibility[s]===void 0||this.linegraph.options.groups.visibility[s]==!0):!1};Ee.prototype.getDataRange=function(){var s=null,e=null;for(var t in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(t)&&this.linegraph.groups[t].visible==!0)for(var r=0;r<this.linegraph.groups[t].itemsData.length;r++){var n=this.linegraph.groups[t].itemsData[r],o=v.convert(n.x,"Date").valueOf();s=s==null||s>o?o:s,e=e==null||e<o?o:e}return{min:s!=null?new Date(s):null,max:e!=null?new Date(e):null}};Ee.prototype.getEventProperties=function(s){var e=s.center?s.center.x:s.clientX,t=s.center?s.center.y:s.clientY,r=e-v.getAbsoluteLeft(this.dom.centerContainer),n=t-v.getAbsoluteTop(this.dom.centerContainer),o=this._toTime(r),a=bs.customTimeFromTarget(s),l=v.getTarget(s),h=null;v.hasParent(l,this.timeAxis.dom.foreground)||this.timeAxis2&&v.hasParent(l,this.timeAxis2.dom.foreground)?h="axis":v.hasParent(l,this.linegraph.yAxisLeft.dom.frame)||v.hasParent(l,this.linegraph.yAxisRight.dom.frame)?h="data-axis":v.hasParent(l,this.linegraph.legendLeft.dom.frame)||v.hasParent(l,this.linegraph.legendRight.dom.frame)?h="legend":a!=null?h="custom-time":v.hasParent(l,this.currentTime.bar)?h="current-time":v.hasParent(l,this.dom.center)&&(h="background");var d=[],c=this.linegraph.yAxisLeft,u=this.linegraph.yAxisRight;return!c.hidden&&this.itemsData.length>0&&d.push(c.screenToValue(n)),!u.hidden&&this.itemsData.length>0&&d.push(u.screenToValue(n)),{event:s,customTime:a?a.options.id:null,what:h,pageX:s.srcEvent?s.srcEvent.pageX:s.pageX,pageY:s.srcEvent?s.srcEvent.pageY:s.pageY,x:r,y:n,time:o,value:d}};Ee.prototype._createConfigurator=function(){return new hf(this,this.dom.container,db)};const cb=nb();$.locale(cb);const ub={Core:ot,DateUtil:mv,Range:Si,stack:$v,TimeStep:Ye,components:{items:{Item:mt,BackgroundItem:Qe,BoxItem:af,ClusterItem:Di,PointItem:lf,RangeItem:Xe},BackgroundGroup:Ma,Component:Re,CurrentTime:ja,CustomTime:bs,DataAxis:ca,DataScale:cf,GraphGroup:Me,Group:is,ItemSet:Ke,Legend:ae,LineGraph:F,TimeAxis:yi}},fb=Object.freeze(Object.defineProperty({__proto__:null,Graph2d:Ee,Timeline:sb,timeline:ub},Symbol.toStringTag,{value:"Module"})),pb=ut(fb);var zs,Ol;function uf(){if(Ol)return zs;Ol=1;var s=typeof ie=="object"&&ie&&ie.Object===Object&&ie;return zs=s,zs}var $s,Al;function Ne(){if(Al)return $s;Al=1;var s=uf(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=s||e||Function("return this")();return $s=t,$s}var Us,Pl;function Ei(){if(Pl)return Us;Pl=1;var s=Ne(),e=s.Symbol;return Us=e,Us}var Vs,Il;function mb(){if(Il)return Vs;Il=1;var s=Ei(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,n=s?s.toStringTag:void 0;function o(a){var l=t.call(a,n),h=a[n];try{a[n]=void 0;var d=!0}catch{}var c=r.call(a);return d&&(l?a[n]=h:delete a[n]),c}return Vs=o,Vs}var Ws,jl;function gb(){if(jl)return Ws;jl=1;var s=Object.prototype,e=s.toString;function t(r){return e.call(r)}return Ws=t,Ws}var Ys,Rl;function Bt(){if(Rl)return Ys;Rl=1;var s=Ei(),e=mb(),t=gb(),r="[object Null]",n="[object Undefined]",o=s?s.toStringTag:void 0;function a(l){return l==null?l===void 0?n:r:o&&o in Object(l)?e(l):t(l)}return Ys=a,Ys}var Xs,Ml;function zt(){if(Ml)return Xs;Ml=1;function s(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Xs=s,Xs}var Ks,Fl;function ff(){if(Fl)return Ks;Fl=1;var s=Bt(),e=zt(),t="[object AsyncFunction]",r="[object Function]",n="[object GeneratorFunction]",o="[object Proxy]";function a(l){if(!e(l))return!1;var h=s(l);return h==r||h==n||h==t||h==o}return Ks=a,Ks}var Qs,Ll;function vb(){if(Ll)return Qs;Ll=1;var s=Ne(),e=s["__core-js_shared__"];return Qs=e,Qs}var Zs,ql;function bb(){if(ql)return Zs;ql=1;var s=vb(),e=function(){var r=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Zs=t,Zs}var Js,Gl;function pf(){if(Gl)return Js;Gl=1;var s=Function.prototype,e=s.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Js=t,Js}var er,Hl;function yb(){if(Hl)return er;Hl=1;var s=ff(),e=bb(),t=zt(),r=pf(),n=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,l=Object.prototype,h=a.toString,d=l.hasOwnProperty,c=RegExp("^"+h.call(d).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function u(p){if(!t(p)||e(p))return!1;var m=s(p)?c:o;return m.test(r(p))}return er=u,er}var tr,Bl;function _b(){if(Bl)return tr;Bl=1;function s(e,t){return e==null?void 0:e[t]}return tr=s,tr}var ir,zl;function gt(){if(zl)return ir;zl=1;var s=yb(),e=_b();function t(r,n){var o=e(r,n);return s(o)?o:void 0}return ir=t,ir}var sr,$l;function ys(){if($l)return sr;$l=1;var s=gt(),e=s(Object,"create");return sr=e,sr}var rr,Ul;function xb(){if(Ul)return rr;Ul=1;var s=ys();function e(){this.__data__=s?s(null):{},this.size=0}return rr=e,rr}var nr,Vl;function wb(){if(Vl)return nr;Vl=1;function s(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return nr=s,nr}var or,Wl;function Cb(){if(Wl)return or;Wl=1;var s=ys(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function n(o){var a=this.__data__;if(s){var l=a[o];return l===e?void 0:l}return r.call(a,o)?a[o]:void 0}return or=n,or}var ar,Yl;function Tb(){if(Yl)return ar;Yl=1;var s=ys(),e=Object.prototype,t=e.hasOwnProperty;function r(n){var o=this.__data__;return s?o[n]!==void 0:t.call(o,n)}return ar=r,ar}var lr,Xl;function Sb(){if(Xl)return lr;Xl=1;var s=ys(),e="__lodash_hash_undefined__";function t(r,n){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=s&&n===void 0?e:n,this}return lr=t,lr}var hr,Kl;function Db(){if(Kl)return hr;Kl=1;var s=xb(),e=wb(),t=Cb(),r=Tb(),n=Sb();function o(a){var l=-1,h=a==null?0:a.length;for(this.clear();++l<h;){var d=a[l];this.set(d[0],d[1])}}return o.prototype.clear=s,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=n,hr=o,hr}var dr,Ql;function kb(){if(Ql)return dr;Ql=1;function s(){this.__data__=[],this.size=0}return dr=s,dr}var cr,Zl;function Fa(){if(Zl)return cr;Zl=1;function s(e,t){return e===t||e!==e&&t!==t}return cr=s,cr}var ur,Jl;function _s(){if(Jl)return ur;Jl=1;var s=Fa();function e(t,r){for(var n=t.length;n--;)if(s(t[n][0],r))return n;return-1}return ur=e,ur}var fr,eh;function Eb(){if(eh)return fr;eh=1;var s=_s(),e=Array.prototype,t=e.splice;function r(n){var o=this.__data__,a=s(o,n);if(a<0)return!1;var l=o.length-1;return a==l?o.pop():t.call(o,a,1),--this.size,!0}return fr=r,fr}var pr,th;function Nb(){if(th)return pr;th=1;var s=_s();function e(t){var r=this.__data__,n=s(r,t);return n<0?void 0:r[n][1]}return pr=e,pr}var mr,ih;function Ob(){if(ih)return mr;ih=1;var s=_s();function e(t){return s(this.__data__,t)>-1}return mr=e,mr}var gr,sh;function Ab(){if(sh)return gr;sh=1;var s=_s();function e(t,r){var n=this.__data__,o=s(n,t);return o<0?(++this.size,n.push([t,r])):n[o][1]=r,this}return gr=e,gr}var vr,rh;function xs(){if(rh)return vr;rh=1;var s=kb(),e=Eb(),t=Nb(),r=Ob(),n=Ab();function o(a){var l=-1,h=a==null?0:a.length;for(this.clear();++l<h;){var d=a[l];this.set(d[0],d[1])}}return o.prototype.clear=s,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=n,vr=o,vr}var br,nh;function La(){if(nh)return br;nh=1;var s=gt(),e=Ne(),t=s(e,"Map");return br=t,br}var yr,oh;function Pb(){if(oh)return yr;oh=1;var s=Db(),e=xs(),t=La();function r(){this.size=0,this.__data__={hash:new s,map:new(t||e),string:new s}}return yr=r,yr}var _r,ah;function Ib(){if(ah)return _r;ah=1;function s(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return _r=s,_r}var xr,lh;function ws(){if(lh)return xr;lh=1;var s=Ib();function e(t,r){var n=t.__data__;return s(r)?n[typeof r=="string"?"string":"hash"]:n.map}return xr=e,xr}var wr,hh;function jb(){if(hh)return wr;hh=1;var s=ws();function e(t){var r=s(this,t).delete(t);return this.size-=r?1:0,r}return wr=e,wr}var Cr,dh;function Rb(){if(dh)return Cr;dh=1;var s=ws();function e(t){return s(this,t).get(t)}return Cr=e,Cr}var Tr,ch;function Mb(){if(ch)return Tr;ch=1;var s=ws();function e(t){return s(this,t).has(t)}return Tr=e,Tr}var Sr,uh;function Fb(){if(uh)return Sr;uh=1;var s=ws();function e(t,r){var n=s(this,t),o=n.size;return n.set(t,r),this.size+=n.size==o?0:1,this}return Sr=e,Sr}var Dr,fh;function qa(){if(fh)return Dr;fh=1;var s=Pb(),e=jb(),t=Rb(),r=Mb(),n=Fb();function o(a){var l=-1,h=a==null?0:a.length;for(this.clear();++l<h;){var d=a[l];this.set(d[0],d[1])}}return o.prototype.clear=s,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=n,Dr=o,Dr}var kr,ph;function Lb(){if(ph)return kr;ph=1;var s="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,s),this}return kr=e,kr}var Er,mh;function qb(){if(mh)return Er;mh=1;function s(e){return this.__data__.has(e)}return Er=s,Er}var Nr,gh;function mf(){if(gh)return Nr;gh=1;var s=qa(),e=Lb(),t=qb();function r(n){var o=-1,a=n==null?0:n.length;for(this.__data__=new s;++o<a;)this.add(n[o])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,Nr=r,Nr}var Or,vh;function Gb(){if(vh)return Or;vh=1;function s(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}return Or=s,Or}var Ar,bh;function Hb(){if(bh)return Ar;bh=1;function s(e){return e!==e}return Ar=s,Ar}var Pr,yh;function Bb(){if(yh)return Pr;yh=1;function s(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}return Pr=s,Pr}var Ir,_h;function zb(){if(_h)return Ir;_h=1;var s=Gb(),e=Hb(),t=Bb();function r(n,o,a){return o===o?t(n,o,a):s(n,e,a)}return Ir=r,Ir}var jr,xh;function gf(){if(xh)return jr;xh=1;var s=zb();function e(t,r){var n=t==null?0:t.length;return!!n&&s(t,r,0)>-1}return jr=e,jr}var Rr,wh;function vf(){if(wh)return Rr;wh=1;function s(e,t,r){for(var n=-1,o=e==null?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}return Rr=s,Rr}var Mr,Ch;function Ni(){if(Ch)return Mr;Ch=1;function s(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}return Mr=s,Mr}var Fr,Th;function Oi(){if(Th)return Fr;Th=1;function s(e){return function(t){return e(t)}}return Fr=s,Fr}var Lr,Sh;function bf(){if(Sh)return Lr;Sh=1;function s(e,t){return e.has(t)}return Lr=s,Lr}var qr,Dh;function $b(){if(Dh)return qr;Dh=1;var s=mf(),e=gf(),t=vf(),r=Ni(),n=Oi(),o=bf(),a=200;function l(h,d,c,u){var p=-1,m=e,g=!0,b=h.length,y=[],_=d.length;if(!b)return y;c&&(d=r(d,n(c))),u?(m=t,g=!1):d.length>=a&&(m=o,g=!1,d=new s(d));e:for(;++p<b;){var x=h[p],w=c==null?x:c(x);if(x=u||x!==0?x:0,g&&w===w){for(var D=_;D--;)if(d[D]===w)continue e;y.push(x)}else m(d,w,u)||y.push(x)}return y}return qr=l,qr}var Gr,kh;function Ga(){if(kh)return Gr;kh=1;function s(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}return Gr=s,Gr}var Hr,Eh;function Ze(){if(Eh)return Hr;Eh=1;function s(e){return e!=null&&typeof e=="object"}return Hr=s,Hr}var Br,Nh;function Ub(){if(Nh)return Br;Nh=1;var s=Bt(),e=Ze(),t="[object Arguments]";function r(n){return e(n)&&s(n)==t}return Br=r,Br}var zr,Oh;function yf(){if(Oh)return zr;Oh=1;var s=Ub(),e=Ze(),t=Object.prototype,r=t.hasOwnProperty,n=t.propertyIsEnumerable,o=s(function(){return arguments}())?s:function(a){return e(a)&&r.call(a,"callee")&&!n.call(a,"callee")};return zr=o,zr}var $r,Ah;function Je(){if(Ah)return $r;Ah=1;var s=Array.isArray;return $r=s,$r}var Ur,Ph;function Vb(){if(Ph)return Ur;Ph=1;var s=Ei(),e=yf(),t=Je(),r=s?s.isConcatSpreadable:void 0;function n(o){return t(o)||e(o)||!!(r&&o&&o[r])}return Ur=n,Ur}var Vr,Ih;function _f(){if(Ih)return Vr;Ih=1;var s=Ga(),e=Vb();function t(r,n,o,a,l){var h=-1,d=r.length;for(o||(o=e),l||(l=[]);++h<d;){var c=r[h];n>0&&o(c)?n>1?t(c,n-1,o,a,l):s(l,c):a||(l[l.length]=c)}return l}return Vr=t,Vr}var Wr,jh;function Ha(){if(jh)return Wr;jh=1;function s(e){return e}return Wr=s,Wr}var Yr,Rh;function Wb(){if(Rh)return Yr;Rh=1;function s(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return Yr=s,Yr}var Xr,Mh;function xf(){if(Mh)return Xr;Mh=1;var s=Wb(),e=Math.max;function t(r,n,o){return n=e(n===void 0?r.length-1:n,0),function(){for(var a=arguments,l=-1,h=e(a.length-n,0),d=Array(h);++l<h;)d[l]=a[n+l];l=-1;for(var c=Array(n+1);++l<n;)c[l]=a[l];return c[n]=o(d),s(r,this,c)}}return Xr=t,Xr}var Kr,Fh;function Yb(){if(Fh)return Kr;Fh=1;function s(e){return function(){return e}}return Kr=s,Kr}var Qr,Lh;function wf(){if(Lh)return Qr;Lh=1;var s=gt(),e=function(){try{var t=s(Object,"defineProperty");return t({},"",{}),t}catch{}}();return Qr=e,Qr}var Zr,qh;function Xb(){if(qh)return Zr;qh=1;var s=Yb(),e=wf(),t=Ha(),r=e?function(n,o){return e(n,"toString",{configurable:!0,enumerable:!1,value:s(o),writable:!0})}:t;return Zr=r,Zr}var Jr,Gh;function Kb(){if(Gh)return Jr;Gh=1;var s=800,e=16,t=Date.now;function r(n){var o=0,a=0;return function(){var l=t(),h=e-(l-a);if(a=l,h>0){if(++o>=s)return arguments[0]}else o=0;return n.apply(void 0,arguments)}}return Jr=r,Jr}var en,Hh;function Cf(){if(Hh)return en;Hh=1;var s=Xb(),e=Kb(),t=e(s);return en=t,en}var tn,Bh;function Ba(){if(Bh)return tn;Bh=1;var s=Ha(),e=xf(),t=Cf();function r(n,o){return t(e(n,o,s),n+"")}return tn=r,tn}var sn,zh;function Tf(){if(zh)return sn;zh=1;var s=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=s}return sn=e,sn}var rn,$h;function $t(){if($h)return rn;$h=1;var s=ff(),e=Tf();function t(r){return r!=null&&e(r.length)&&!s(r)}return rn=t,rn}var nn,Uh;function Sf(){if(Uh)return nn;Uh=1;var s=$t(),e=Ze();function t(r){return e(r)&&s(r)}return nn=t,nn}var on,Vh;function Qb(){if(Vh)return on;Vh=1;var s=$b(),e=_f(),t=Ba(),r=Sf(),n=t(function(o,a){return r(o)?s(o,e(a,1,r,!0)):[]});return on=n,on}var an,Wh;function Zb(){if(Wh)return an;Wh=1;var s=mf(),e=gf(),t=vf(),r=Ni(),n=Oi(),o=bf(),a=Math.min;function l(h,d,c){for(var u=c?t:e,p=h[0].length,m=h.length,g=m,b=Array(m),y=1/0,_=[];g--;){var x=h[g];g&&d&&(x=r(x,n(d))),y=a(x.length,y),b[g]=!c&&(d||p>=120&&x.length>=120)?new s(g&&x):void 0}x=h[0];var w=-1,D=b[0];e:for(;++w<p&&_.length<y;){var T=x[w],S=d?d(T):T;if(T=c||T!==0?T:0,!(D?o(D,S):u(_,S,c))){for(g=m;--g;){var k=b[g];if(!(k?o(k,S):u(h[g],S,c)))continue e}D&&D.push(S),_.push(T)}}return _}return an=l,an}var ln,Yh;function Jb(){if(Yh)return ln;Yh=1;var s=Sf();function e(t){return s(t)?t:[]}return ln=e,ln}var hn,Xh;function ey(){if(Xh)return hn;Xh=1;var s=Ni(),e=Zb(),t=Ba(),r=Jb(),n=t(function(o){var a=s(o,r);return a.length&&a[0]===o[0]?e(a):[]});return hn=n,hn}var dn,Kh;function Df(){if(Kh)return dn;Kh=1;function s(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}return dn=s,dn}var cn,Qh;function ty(){if(Qh)return cn;Qh=1;function s(e){return function(t,r,n){for(var o=-1,a=Object(t),l=n(t),h=l.length;h--;){var d=l[e?h:++o];if(r(a[d],d,a)===!1)break}return t}}return cn=s,cn}var un,Zh;function iy(){if(Zh)return un;Zh=1;var s=ty(),e=s();return un=e,un}var fn,Jh;function sy(){if(Jh)return fn;Jh=1;function s(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}return fn=s,fn}var ei={exports:{}},pn,ed;function ry(){if(ed)return pn;ed=1;function s(){return!1}return pn=s,pn}ei.exports;var td;function kf(){return td||(td=1,function(s,e){var t=Ne(),r=ry(),n=e&&!e.nodeType&&e,o=n&&!0&&s&&!s.nodeType&&s,a=o&&o.exports===n,l=a?t.Buffer:void 0,h=l?l.isBuffer:void 0,d=h||r;s.exports=d}(ei,ei.exports)),ei.exports}var mn,id;function Ef(){if(id)return mn;id=1;var s=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,n){var o=typeof r;return n=n??s,!!n&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<n}return mn=t,mn}var gn,sd;function ny(){if(sd)return gn;sd=1;var s=Bt(),e=Tf(),t=Ze(),r="[object Arguments]",n="[object Array]",o="[object Boolean]",a="[object Date]",l="[object Error]",h="[object Function]",d="[object Map]",c="[object Number]",u="[object Object]",p="[object RegExp]",m="[object Set]",g="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",_="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",D="[object Int8Array]",T="[object Int16Array]",S="[object Int32Array]",k="[object Uint8Array]",P="[object Uint8ClampedArray]",B="[object Uint16Array]",le="[object Uint32Array]",I={};I[x]=I[w]=I[D]=I[T]=I[S]=I[k]=I[P]=I[B]=I[le]=!0,I[r]=I[n]=I[y]=I[o]=I[_]=I[a]=I[l]=I[h]=I[d]=I[c]=I[u]=I[p]=I[m]=I[g]=I[b]=!1;function be(we){return t(we)&&e(we.length)&&!!I[s(we)]}return gn=be,gn}var ti={exports:{}};ti.exports;var rd;function za(){return rd||(rd=1,function(s,e){var t=uf(),r=e&&!e.nodeType&&e,n=r&&!0&&s&&!s.nodeType&&s,o=n&&n.exports===r,a=o&&t.process,l=function(){try{var h=n&&n.require&&n.require("util").types;return h||a&&a.binding&&a.binding("util")}catch{}}();s.exports=l}(ti,ti.exports)),ti.exports}var vn,nd;function oy(){if(nd)return vn;nd=1;var s=ny(),e=Oi(),t=za(),r=t&&t.isTypedArray,n=r?e(r):s;return vn=n,vn}var bn,od;function Nf(){if(od)return bn;od=1;var s=sy(),e=yf(),t=Je(),r=kf(),n=Ef(),o=oy(),a=Object.prototype,l=a.hasOwnProperty;function h(d,c){var u=t(d),p=!u&&e(d),m=!u&&!p&&r(d),g=!u&&!p&&!m&&o(d),b=u||p||m||g,y=b?s(d.length,String):[],_=y.length;for(var x in d)(c||l.call(d,x))&&!(b&&(x=="length"||m&&(x=="offset"||x=="parent")||g&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||n(x,_)))&&y.push(x);return y}return bn=h,bn}var yn,ad;function Cs(){if(ad)return yn;ad=1;var s=Object.prototype;function e(t){var r=t&&t.constructor,n=typeof r=="function"&&r.prototype||s;return t===n}return yn=e,yn}var _n,ld;function Of(){if(ld)return _n;ld=1;function s(e,t){return function(r){return e(t(r))}}return _n=s,_n}var xn,hd;function ay(){if(hd)return xn;hd=1;var s=Of(),e=s(Object.keys,Object);return xn=e,xn}var wn,dd;function ly(){if(dd)return wn;dd=1;var s=Cs(),e=ay(),t=Object.prototype,r=t.hasOwnProperty;function n(o){if(!s(o))return e(o);var a=[];for(var l in Object(o))r.call(o,l)&&l!="constructor"&&a.push(l);return a}return wn=n,wn}var Cn,cd;function Ut(){if(cd)return Cn;cd=1;var s=Nf(),e=ly(),t=$t();function r(n){return t(n)?s(n):e(n)}return Cn=r,Cn}var Tn,ud;function hy(){if(ud)return Tn;ud=1;var s=iy(),e=Ut();function t(r,n){return r&&s(r,n,e)}return Tn=t,Tn}var Sn,fd;function dy(){if(fd)return Sn;fd=1;var s=$t();function e(t,r){return function(n,o){if(n==null)return n;if(!s(n))return t(n,o);for(var a=n.length,l=r?a:-1,h=Object(n);(r?l--:++l<a)&&o(h[l],l,h)!==!1;);return n}}return Sn=e,Sn}var Dn,pd;function cy(){if(pd)return Dn;pd=1;var s=hy(),e=dy(),t=e(s);return Dn=t,Dn}var kn,md;function uy(){if(md)return kn;md=1;var s=Ha();function e(t){return typeof t=="function"?t:s}return kn=e,kn}var En,gd;function fy(){if(gd)return En;gd=1;var s=Df(),e=cy(),t=uy(),r=Je();function n(o,a){var l=r(o)?s:e;return l(o,t(a))}return En=n,En}var Nn,vd;function py(){return vd||(vd=1,Nn=fy()),Nn}var On,bd;function Af(){if(bd)return On;bd=1;var s=wf();function e(t,r,n){r=="__proto__"&&s?s(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n}return On=e,On}var An,yd;function $a(){if(yd)return An;yd=1;var s=Af(),e=Fa(),t=Object.prototype,r=t.hasOwnProperty;function n(o,a,l){var h=o[a];(!(r.call(o,a)&&e(h,l))||l===void 0&&!(a in o))&&s(o,a,l)}return An=n,An}var Pn,_d;function Vt(){if(_d)return Pn;_d=1;var s=$a(),e=Af();function t(r,n,o,a){var l=!o;o||(o={});for(var h=-1,d=n.length;++h<d;){var c=n[h],u=a?a(o[c],r[c],c,o,r):void 0;u===void 0&&(u=r[c]),l?e(o,c,u):s(o,c,u)}return o}return Pn=t,Pn}var In,xd;function my(){if(xd)return In;xd=1;var s=Fa(),e=$t(),t=Ef(),r=zt();function n(o,a,l){if(!r(l))return!1;var h=typeof a;return(h=="number"?e(l)&&t(a,l.length):h=="string"&&a in l)?s(l[a],o):!1}return In=n,In}var jn,wd;function gy(){if(wd)return jn;wd=1;var s=Ba(),e=my();function t(r){return s(function(n,o){var a=-1,l=o.length,h=l>1?o[l-1]:void 0,d=l>2?o[2]:void 0;for(h=r.length>3&&typeof h=="function"?(l--,h):void 0,d&&e(o[0],o[1],d)&&(h=l<3?void 0:h,l=1),n=Object(n);++a<l;){var c=o[a];c&&r(n,c,a,h)}return n})}return jn=t,jn}var Rn,Cd;function vy(){if(Cd)return Rn;Cd=1;var s=$a(),e=Vt(),t=gy(),r=$t(),n=Cs(),o=Ut(),a=Object.prototype,l=a.hasOwnProperty,h=t(function(d,c){if(n(c)||r(c)){e(c,o(c),d);return}for(var u in c)l.call(c,u)&&s(d,u,c[u])});return Rn=h,Rn}var Mn,Td;function by(){if(Td)return Mn;Td=1;var s=xs();function e(){this.__data__=new s,this.size=0}return Mn=e,Mn}var Fn,Sd;function yy(){if(Sd)return Fn;Sd=1;function s(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return Fn=s,Fn}var Ln,Dd;function _y(){if(Dd)return Ln;Dd=1;function s(e){return this.__data__.get(e)}return Ln=s,Ln}var qn,kd;function xy(){if(kd)return qn;kd=1;function s(e){return this.__data__.has(e)}return qn=s,qn}var Gn,Ed;function wy(){if(Ed)return Gn;Ed=1;var s=xs(),e=La(),t=qa(),r=200;function n(o,a){var l=this.__data__;if(l instanceof s){var h=l.__data__;if(!e||h.length<r-1)return h.push([o,a]),this.size=++l.size,this;l=this.__data__=new t(h)}return l.set(o,a),this.size=l.size,this}return Gn=n,Gn}var Hn,Nd;function Cy(){if(Nd)return Hn;Nd=1;var s=xs(),e=by(),t=yy(),r=_y(),n=xy(),o=wy();function a(l){var h=this.__data__=new s(l);this.size=h.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=o,Hn=a,Hn}var Bn,Od;function Ty(){if(Od)return Bn;Od=1;var s=Vt(),e=Ut();function t(r,n){return r&&s(n,e(n),r)}return Bn=t,Bn}var zn,Ad;function Sy(){if(Ad)return zn;Ad=1;function s(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return zn=s,zn}var $n,Pd;function Dy(){if(Pd)return $n;Pd=1;var s=zt(),e=Cs(),t=Sy(),r=Object.prototype,n=r.hasOwnProperty;function o(a){if(!s(a))return t(a);var l=e(a),h=[];for(var d in a)d=="constructor"&&(l||!n.call(a,d))||h.push(d);return h}return $n=o,$n}var Un,Id;function Ua(){if(Id)return Un;Id=1;var s=Nf(),e=Dy(),t=$t();function r(n){return t(n)?s(n,!0):e(n)}return Un=r,Un}var Vn,jd;function ky(){if(jd)return Vn;jd=1;var s=Vt(),e=Ua();function t(r,n){return r&&s(n,e(n),r)}return Vn=t,Vn}var ii={exports:{}};ii.exports;var Rd;function Ey(){return Rd||(Rd=1,function(s,e){var t=Ne(),r=e&&!e.nodeType&&e,n=r&&!0&&s&&!s.nodeType&&s,o=n&&n.exports===r,a=o?t.Buffer:void 0,l=a?a.allocUnsafe:void 0;function h(d,c){if(c)return d.slice();var u=d.length,p=l?l(u):new d.constructor(u);return d.copy(p),p}s.exports=h}(ii,ii.exports)),ii.exports}var Wn,Md;function Ny(){if(Md)return Wn;Md=1;function s(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}return Wn=s,Wn}var Yn,Fd;function Oy(){if(Fd)return Yn;Fd=1;function s(e,t){for(var r=-1,n=e==null?0:e.length,o=0,a=[];++r<n;){var l=e[r];t(l,r,e)&&(a[o++]=l)}return a}return Yn=s,Yn}var Xn,Ld;function Pf(){if(Ld)return Xn;Ld=1;function s(){return[]}return Xn=s,Xn}var Kn,qd;function Va(){if(qd)return Kn;qd=1;var s=Oy(),e=Pf(),t=Object.prototype,r=t.propertyIsEnumerable,n=Object.getOwnPropertySymbols,o=n?function(a){return a==null?[]:(a=Object(a),s(n(a),function(l){return r.call(a,l)}))}:e;return Kn=o,Kn}var Qn,Gd;function Ay(){if(Gd)return Qn;Gd=1;var s=Vt(),e=Va();function t(r,n){return s(r,e(r),n)}return Qn=t,Qn}var Zn,Hd;function Wa(){if(Hd)return Zn;Hd=1;var s=Of(),e=s(Object.getPrototypeOf,Object);return Zn=e,Zn}var Jn,Bd;function If(){if(Bd)return Jn;Bd=1;var s=Ga(),e=Wa(),t=Va(),r=Pf(),n=Object.getOwnPropertySymbols,o=n?function(a){for(var l=[];a;)s(l,t(a)),a=e(a);return l}:r;return Jn=o,Jn}var eo,zd;function Py(){if(zd)return eo;zd=1;var s=Vt(),e=If();function t(r,n){return s(r,e(r),n)}return eo=t,eo}var to,$d;function jf(){if($d)return to;$d=1;var s=Ga(),e=Je();function t(r,n,o){var a=n(r);return e(r)?a:s(a,o(r))}return to=t,to}var io,Ud;function Iy(){if(Ud)return io;Ud=1;var s=jf(),e=Va(),t=Ut();function r(n){return s(n,t,e)}return io=r,io}var so,Vd;function Rf(){if(Vd)return so;Vd=1;var s=jf(),e=If(),t=Ua();function r(n){return s(n,t,e)}return so=r,so}var ro,Wd;function jy(){if(Wd)return ro;Wd=1;var s=gt(),e=Ne(),t=s(e,"DataView");return ro=t,ro}var no,Yd;function Ry(){if(Yd)return no;Yd=1;var s=gt(),e=Ne(),t=s(e,"Promise");return no=t,no}var oo,Xd;function My(){if(Xd)return oo;Xd=1;var s=gt(),e=Ne(),t=s(e,"Set");return oo=t,oo}var ao,Kd;function Fy(){if(Kd)return ao;Kd=1;var s=gt(),e=Ne(),t=s(e,"WeakMap");return ao=t,ao}var lo,Qd;function Ya(){if(Qd)return lo;Qd=1;var s=jy(),e=La(),t=Ry(),r=My(),n=Fy(),o=Bt(),a=pf(),l="[object Map]",h="[object Object]",d="[object Promise]",c="[object Set]",u="[object WeakMap]",p="[object DataView]",m=a(s),g=a(e),b=a(t),y=a(r),_=a(n),x=o;return(s&&x(new s(new ArrayBuffer(1)))!=p||e&&x(new e)!=l||t&&x(t.resolve())!=d||r&&x(new r)!=c||n&&x(new n)!=u)&&(x=function(w){var D=o(w),T=D==h?w.constructor:void 0,S=T?a(T):"";if(S)switch(S){case m:return p;case g:return l;case b:return d;case y:return c;case _:return u}return D}),lo=x,lo}var ho,Zd;function Ly(){if(Zd)return ho;Zd=1;var s=Object.prototype,e=s.hasOwnProperty;function t(r){var n=r.length,o=new r.constructor(n);return n&&typeof r[0]=="string"&&e.call(r,"index")&&(o.index=r.index,o.input=r.input),o}return ho=t,ho}var co,Jd;function qy(){if(Jd)return co;Jd=1;var s=Ne(),e=s.Uint8Array;return co=e,co}var uo,ec;function Xa(){if(ec)return uo;ec=1;var s=qy();function e(t){var r=new t.constructor(t.byteLength);return new s(r).set(new s(t)),r}return uo=e,uo}var fo,tc;function Gy(){if(tc)return fo;tc=1;var s=Xa();function e(t,r){var n=r?s(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}return fo=e,fo}var po,ic;function Hy(){if(ic)return po;ic=1;var s=/\w*$/;function e(t){var r=new t.constructor(t.source,s.exec(t));return r.lastIndex=t.lastIndex,r}return po=e,po}var mo,sc;function By(){if(sc)return mo;sc=1;var s=Ei(),e=s?s.prototype:void 0,t=e?e.valueOf:void 0;function r(n){return t?Object(t.call(n)):{}}return mo=r,mo}var go,rc;function zy(){if(rc)return go;rc=1;var s=Xa();function e(t,r){var n=r?s(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}return go=e,go}var vo,nc;function $y(){if(nc)return vo;nc=1;var s=Xa(),e=Gy(),t=Hy(),r=By(),n=zy(),o="[object Boolean]",a="[object Date]",l="[object Map]",h="[object Number]",d="[object RegExp]",c="[object Set]",u="[object String]",p="[object Symbol]",m="[object ArrayBuffer]",g="[object DataView]",b="[object Float32Array]",y="[object Float64Array]",_="[object Int8Array]",x="[object Int16Array]",w="[object Int32Array]",D="[object Uint8Array]",T="[object Uint8ClampedArray]",S="[object Uint16Array]",k="[object Uint32Array]";function P(B,le,I){var be=B.constructor;switch(le){case m:return s(B);case o:case a:return new be(+B);case g:return e(B,I);case b:case y:case _:case x:case w:case D:case T:case S:case k:return n(B,I);case l:return new be;case h:case u:return new be(B);case d:return t(B);case c:return new be;case p:return r(B)}}return vo=P,vo}var bo,oc;function Uy(){if(oc)return bo;oc=1;var s=zt(),e=Object.create,t=function(){function r(){}return function(n){if(!s(n))return{};if(e)return e(n);r.prototype=n;var o=new r;return r.prototype=void 0,o}}();return bo=t,bo}var yo,ac;function Vy(){if(ac)return yo;ac=1;var s=Uy(),e=Wa(),t=Cs();function r(n){return typeof n.constructor=="function"&&!t(n)?s(e(n)):{}}return yo=r,yo}var _o,lc;function Wy(){if(lc)return _o;lc=1;var s=Ya(),e=Ze(),t="[object Map]";function r(n){return e(n)&&s(n)==t}return _o=r,_o}var xo,hc;function Yy(){if(hc)return xo;hc=1;var s=Wy(),e=Oi(),t=za(),r=t&&t.isMap,n=r?e(r):s;return xo=n,xo}var wo,dc;function Xy(){if(dc)return wo;dc=1;var s=Ya(),e=Ze(),t="[object Set]";function r(n){return e(n)&&s(n)==t}return wo=r,wo}var Co,cc;function Ky(){if(cc)return Co;cc=1;var s=Xy(),e=Oi(),t=za(),r=t&&t.isSet,n=r?e(r):s;return Co=n,Co}var To,uc;function Qy(){if(uc)return To;uc=1;var s=Cy(),e=Df(),t=$a(),r=Ty(),n=ky(),o=Ey(),a=Ny(),l=Ay(),h=Py(),d=Iy(),c=Rf(),u=Ya(),p=Ly(),m=$y(),g=Vy(),b=Je(),y=kf(),_=Yy(),x=zt(),w=Ky(),D=Ut(),T=Ua(),S=1,k=2,P=4,B="[object Arguments]",le="[object Array]",I="[object Boolean]",be="[object Date]",we="[object Error]",Ss="[object Function]",vt="[object GeneratorFunction]",Ds="[object Map]",Ai="[object Number]",Pi="[object Object]",Ii="[object RegExp]",ks="[object Set]",ji="[object String]",Fe="[object Symbol]",Ri="[object WeakMap]",Es="[object ArrayBuffer]",ue="[object DataView]",Ns="[object Float32Array]",bt="[object Float64Array]",Mi="[object Int8Array]",Os="[object Int16Array]",yt="[object Int32Array]",Wt="[object Uint8Array]",Yt="[object Uint8ClampedArray]",As="[object Uint16Array]",Oe="[object Uint32Array]",M={};M[B]=M[le]=M[Es]=M[ue]=M[I]=M[be]=M[Ns]=M[bt]=M[Mi]=M[Os]=M[yt]=M[Ds]=M[Ai]=M[Pi]=M[Ii]=M[ks]=M[ji]=M[Fe]=M[Wt]=M[Yt]=M[As]=M[Oe]=!0,M[we]=M[Ss]=M[Ri]=!1;function _t(R,Le,qe,Ps,xt,Ce){var C,E=Le&S,W=Le&k,fe=Le&P;if(qe&&(C=xt?qe(R,Ps,xt,Ce):qe(R)),C!==void 0)return C;if(!x(R))return R;var Ge=b(R);if(Ge){if(C=p(R),!E)return a(R,C)}else{var Te=u(R),Za=Te==Ss||Te==vt;if(y(R))return o(R,E);if(Te==Pi||Te==B||Za&&!xt){if(C=W||Za?{}:g(R),!E)return W?h(R,n(C,R)):l(R,r(C,R))}else{if(!M[Te])return xt?R:{};C=m(R,Te,E)}}Ce||(Ce=new s);var Ja=Ce.get(R);if(Ja)return Ja;Ce.set(R,C),w(R)?R.forEach(function(He){C.add(_t(He,Le,qe,He,R,Ce))}):_(R)&&R.forEach(function(He,et){C.set(et,_t(He,Le,qe,et,R,Ce))});var $f=fe?W?c:d:W?T:D,el=Ge?void 0:$f(R);return e(el||R,function(He,et){el&&(et=He,He=R[et]),t(C,et,_t(He,Le,qe,et,R,Ce))}),C}return To=_t,To}var So,fc;function Ka(){if(fc)return So;fc=1;var s=Bt(),e=Ze(),t="[object Symbol]";function r(n){return typeof n=="symbol"||e(n)&&s(n)==t}return So=r,So}var Do,pc;function Zy(){if(pc)return Do;pc=1;var s=Je(),e=Ka(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function n(o,a){if(s(o))return!1;var l=typeof o;return l=="number"||l=="symbol"||l=="boolean"||o==null||e(o)?!0:r.test(o)||!t.test(o)||a!=null&&o in Object(a)}return Do=n,Do}var ko,mc;function Jy(){if(mc)return ko;mc=1;var s=qa(),e="Expected a function";function t(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new TypeError(e);var o=function(){var a=arguments,l=n?n.apply(this,a):a[0],h=o.cache;if(h.has(l))return h.get(l);var d=r.apply(this,a);return o.cache=h.set(l,d)||h,d};return o.cache=new(t.Cache||s),o}return t.Cache=s,ko=t,ko}var Eo,gc;function e_(){if(gc)return Eo;gc=1;var s=Jy(),e=500;function t(r){var n=s(r,function(a){return o.size===e&&o.clear(),a}),o=n.cache;return n}return Eo=t,Eo}var No,vc;function t_(){if(vc)return No;vc=1;var s=e_(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=s(function(n){var o=[];return n.charCodeAt(0)===46&&o.push(""),n.replace(e,function(a,l,h,d){o.push(h?d.replace(t,"$1"):l||a)}),o});return No=r,No}var Oo,bc;function i_(){if(bc)return Oo;bc=1;var s=Ei(),e=Ni(),t=Je(),r=Ka(),n=1/0,o=s?s.prototype:void 0,a=o?o.toString:void 0;function l(h){if(typeof h=="string")return h;if(t(h))return e(h,l)+"";if(r(h))return a?a.call(h):"";var d=h+"";return d=="0"&&1/h==-n?"-0":d}return Oo=l,Oo}var Ao,yc;function s_(){if(yc)return Ao;yc=1;var s=i_();function e(t){return t==null?"":s(t)}return Ao=e,Ao}var Po,_c;function Qa(){if(_c)return Po;_c=1;var s=Je(),e=Zy(),t=t_(),r=s_();function n(o,a){return s(o)?o:e(o,a)?[o]:t(r(o))}return Po=n,Po}var Io,xc;function r_(){if(xc)return Io;xc=1;function s(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return Io=s,Io}var jo,wc;function Mf(){if(wc)return jo;wc=1;var s=Ka(),e=1/0;function t(r){if(typeof r=="string"||s(r))return r;var n=r+"";return n=="0"&&1/r==-e?"-0":n}return jo=t,jo}var Ro,Cc;function n_(){if(Cc)return Ro;Cc=1;var s=Qa(),e=Mf();function t(r,n){n=s(n,r);for(var o=0,a=n.length;r!=null&&o<a;)r=r[e(n[o++])];return o&&o==a?r:void 0}return Ro=t,Ro}var Mo,Tc;function o_(){if(Tc)return Mo;Tc=1;function s(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}return Mo=s,Mo}var Fo,Sc;function a_(){if(Sc)return Fo;Sc=1;var s=n_(),e=o_();function t(r,n){return n.length<2?r:s(r,e(n,0,-1))}return Fo=t,Fo}var Lo,Dc;function l_(){if(Dc)return Lo;Dc=1;var s=Qa(),e=r_(),t=a_(),r=Mf();function n(o,a){return a=s(a,o),o=t(o,a),o==null||delete o[r(e(a))]}return Lo=n,Lo}var qo,kc;function h_(){if(kc)return qo;kc=1;var s=Bt(),e=Wa(),t=Ze(),r="[object Object]",n=Function.prototype,o=Object.prototype,a=n.toString,l=o.hasOwnProperty,h=a.call(Object);function d(c){if(!t(c)||s(c)!=r)return!1;var u=e(c);if(u===null)return!0;var p=l.call(u,"constructor")&&u.constructor;return typeof p=="function"&&p instanceof p&&a.call(p)==h}return qo=d,qo}var Go,Ec;function d_(){if(Ec)return Go;Ec=1;var s=h_();function e(t){return s(t)?void 0:t}return Go=e,Go}var Ho,Nc;function c_(){if(Nc)return Ho;Nc=1;var s=_f();function e(t){var r=t==null?0:t.length;return r?s(t,1):[]}return Ho=e,Ho}var Bo,Oc;function u_(){if(Oc)return Bo;Oc=1;var s=c_(),e=xf(),t=Cf();function r(n){return t(e(n,void 0,s),n+"")}return Bo=r,Bo}var zo,Ac;function f_(){if(Ac)return zo;Ac=1;var s=Ni(),e=Qy(),t=l_(),r=Qa(),n=Vt(),o=d_(),a=u_(),l=Rf(),h=1,d=2,c=4,u=a(function(p,m){var g={};if(p==null)return g;var b=!1;m=s(m,function(_){return _=r(_,p),b||(b=_.length>1),_}),n(p,l(p),g),b&&(g=e(g,h|d|c,o));for(var y=m.length;y--;)t(g,m[y]);return g});return zo=u,zo}var ce=dp,p_=cp;Object.defineProperty(as,"__esModule",{value:!0});as.Timeline=void 0;var m_=ce(up),g_=ce(fp),Et=ce(Gc()),v_=ce(pp),b_=ce(gp()),Pc=ce(vp()),si=ce(bp),$o=C_(q),Ic=pg,y_=pb,jc=ce(Qb()),__=ce(ey()),Ki=ce(py()),x_=ce(vy()),w_=ce(f_()),Rc=ce(Ut());function Ff(s){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Ff=function(n){return n?t:e})(s)}function C_(s,e){if(!e&&s&&s.__esModule)return s;if(s===null||p_(s)!=="object"&&typeof s!="function")return{default:s};var t=Ff(e);if(t&&t.has(s))return t.get(s);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in s)if(o!=="default"&&Object.prototype.hasOwnProperty.call(s,o)){var a=n?Object.getOwnPropertyDescriptor(s,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=s[o]}return r.default=s,t&&t.set(s,r),r}function T_(s,e){var t=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!t){if(Array.isArray(s)||(t=S_(s))||e&&s&&typeof s.length=="number"){t&&(s=t);var r=0,n=function(){};return{s:n,n:function(){return r>=s.length?{done:!0}:{done:!1,value:s[r++]}},e:function(d){throw d},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,a=!1,l;return{s:function(){t=t.call(s)},n:function(){var d=t.next();return o=d.done,d},e:function(d){a=!0,l=d},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function S_(s,e){if(s){if(typeof s=="string")return Mc(s,e);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(s);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mc(s,e)}}function Mc(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=s[t];return r}function D_(s){var e=k_();return function(){var r=(0,Pc.default)(s),n;if(e){var o=(0,Pc.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,b_.default)(this,n)}}function k_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Lf=function(){},qf=["currentTimeTick","click","contextmenu","doubleClick","dragover","drop","mouseOver","mouseDown","mouseUp","mouseMove","groupDragged","changed","rangechange","rangechanged","select","itemover","itemout","timechange","timechanged","markerchange","markerchanged"],Gf={};(0,Ki.default)(qf,function(s){Gf["".concat(s,"Handler")]=Lf});var Hf=function(s){(0,v_.default)(t,s);var e=D_(t);function t(r){var n;return(0,m_.default)(this,t),n=e.call(this,r),(0,si.default)((0,Et.default)(n),"timeline",void 0),(0,si.default)((0,Et.default)(n),"items",void 0),(0,si.default)((0,Et.default)(n),"groups",void 0),(0,si.default)((0,Et.default)(n),"ref",$o.default.createRef()),Object.defineProperty((0,Et.default)(n),"items",{value:new Ic.DataSet,writable:!1}),Object.defineProperty((0,Et.default)(n),"groups",{value:new Ic.DataSet,writable:!1}),n}return(0,g_.default)(t,[{key:"componentWillUnmount",value:function(){this.timeline.destroy()}},{key:"componentDidMount",value:function(){Object.defineProperty(this,"timeline",{value:new y_.Timeline(this.ref.current,this.items,this.groups,this.props.options),writable:!1});var n=T_(qf),o;try{for(n.s();!(o=n.n()).done;){var a=o.value,l=this.props["".concat(a,"Handler")];l!==Lf&&this.timeline.on(a,l)}}catch(h){n.e(h)}finally{n.f()}this.init()}},{key:"shouldComponentUpdate",value:function(n){var o=this.props,a=o.initialItems,l=o.initialGroups,h=o.options,d=o.selection,c=o.customTimes,u=o.currentTime,p=a!==n.initialItems,m=l!==n.initialGroups,g=h!==n.options,b=c!==n.customTimes,y=d!==n.selection,_=u!==n.currentTime;return m&&console.warn("react-vis-timeline: you are trying to change 'initialGroups' prop. Please use the public api exposed with in ref"),p&&console.warn("react-vis-timeline: you are trying to change 'initialItems' prop. Please use the public api exposed with in ref"),g&&this.timeline.setOptions(n.options),b&&this.updateCustomTimes(c,n.customTimes),y&&this.updateSelection(n.selection,n.selectionOptions),_&&this.timeline.setCurrentTime(n.currentTime),!1}},{key:"updateCustomTimes",value:function(n,o){var a=this,l=(0,Rc.default)(n),h=(0,Rc.default)(o),d=(0,jc.default)(h,l),c=(0,jc.default)(l,h),u=(0,__.default)(l,h);(0,Ki.default)(c,function(p){return a.timeline.removeCustomTime(p)}),(0,Ki.default)(d,function(p){var m=o[p].datetime;a.timeline.addCustomTime(m,p)}),(0,Ki.default)(u,function(p){var m=o[p].datetime;a.timeline.setCustomTime(m,p)})}},{key:"updateSelection",value:function(n,o){this.timeline.setSelection(n,o)}},{key:"init",value:function(){var n=this.props,o=n.initialItems,a=n.initialGroups,l=n.options,h=n.selection,d=n.selectionOptions,c=d===void 0?{}:d,u=n.customTimes,p=n.animate,m=p===void 0?!0:p,g=n.currentTime,b=l;m&&(b=(0,w_.default)(l,"start","end"),this.timeline.setWindow(l.start,l.end,{animation:m})),this.timeline.setOptions(b),(a==null?void 0:a.length)>0&&this.groups.add(a),(o==null?void 0:o.length)>0&&this.items.add(o),this.updateSelection(h,c),g&&this.timeline.setCurrentTime(g),this.updateCustomTimes([],u)}},{key:"render",value:function(){return $o.default.createElement("div",{ref:this.ref})}}]),t}($o.Component);as.Timeline=Hf;(0,si.default)(Hf,"defaultProps",(0,x_.default)({initialItems:[],groups:[],options:{},selection:[],customTimes:[]},Gf));(function(s){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return e.Timeline}});var e=as})(Lc);const E_=os(Lc);var Bf={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.cssValue=Gt.parseLengthAndUnit=void 0;var N_={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function zf(s){if(typeof s=="number")return{value:s,unit:"px"};var e,t=(s.match(/^[0-9.]*/)||"").toString();t.includes(".")?e=parseFloat(t):e=parseInt(t,10);var r=(s.match(/[^0-9]*$/)||"").toString();return N_[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(s," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}Gt.parseLengthAndUnit=zf;function O_(s){var e=zf(s);return"".concat(e.value).concat(e.unit)}Gt.cssValue=O_;var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.createAnimation=void 0;var A_=function(s,e,t){var r="react-spinners-".concat(s,"-").concat(t);if(typeof window>"u"||!window.document)return r;var n=document.createElement("style");document.head.appendChild(n);var o=n.sheet,a=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return o&&o.insertRule(a,0),r};Ts.createAnimation=A_;var ns=ie&&ie.__assign||function(){return ns=Object.assign||function(s){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n])}return s},ns.apply(this,arguments)},P_=ie&&ie.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,n)}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),I_=ie&&ie.__setModuleDefault||(Object.create?function(s,e){Object.defineProperty(s,"default",{enumerable:!0,value:e})}:function(s,e){s.default=e}),j_=ie&&ie.__importStar||function(s){if(s&&s.__esModule)return s;var e={};if(s!=null)for(var t in s)t!=="default"&&Object.prototype.hasOwnProperty.call(s,t)&&P_(e,s,t);return I_(e,s),e},R_=ie&&ie.__rest||function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};Object.defineProperty(Bf,"__esModule",{value:!0});var tt=j_(q),M_=Gt,Nt=Ts,ee=[1,3,5],F_=[(0,Nt.createAnimation)("PropagateLoader","25% {transform: translateX(-".concat(ee[0],`rem) scale(0.75)}
    50% {transform: translateX(-`).concat(ee[1],`rem) scale(0.6)}
    75% {transform: translateX(-`).concat(ee[2],`rem) scale(0.5)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-0"),(0,Nt.createAnimation)("PropagateLoader","25% {transform: translateX(-".concat(ee[0],`rem) scale(0.75)}
    50% {transform: translateX(-`).concat(ee[1],`rem) scale(0.6)}
    75% {transform: translateX(-`).concat(ee[1],`rem) scale(0.6)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-1"),(0,Nt.createAnimation)("PropagateLoader","25% {transform: translateX(-".concat(ee[0],`rem) scale(0.75)}
    75% {transform: translateX(-`).concat(ee[0],`rem) scale(0.75)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-2"),(0,Nt.createAnimation)("PropagateLoader","25% {transform: translateX(".concat(ee[0],`rem) scale(0.75)}
    75% {transform: translateX(`).concat(ee[0],`rem) scale(0.75)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-3"),(0,Nt.createAnimation)("PropagateLoader","25% {transform: translateX(".concat(ee[0],`rem) scale(0.75)}
    50% {transform: translateX(`).concat(ee[1],`rem) scale(0.6)}
    75% {transform: translateX(`).concat(ee[1],`rem) scale(0.6)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-4"),(0,Nt.createAnimation)("PropagateLoader","25% {transform: translateX(".concat(ee[0],`rem) scale(0.75)}
    50% {transform: translateX(`).concat(ee[1],`rem) scale(0.6)}
    75% {transform: translateX(`).concat(ee[2],`rem) scale(0.5)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-5")];function L_(s){var e=s.loading,t=e===void 0?!0:e,r=s.color,n=r===void 0?"#000000":r,o=s.speedMultiplier,a=o===void 0?1:o,l=s.cssOverride,h=l===void 0?{}:l,d=s.size,c=d===void 0?15:d,u=R_(s,["loading","color","speedMultiplier","cssOverride","size"]),p=(0,M_.parseLengthAndUnit)(c),m=p.value,g=p.unit,b=ns({display:"inherit",position:"relative"},h),y=function(_){return{position:"absolute",fontSize:"".concat(m/3).concat(g),width:"".concat(m).concat(g),height:"".concat(m).concat(g),background:n,borderRadius:"50%",animation:"".concat(F_[_]," ").concat(1.5/a,"s infinite"),animationFillMode:"forwards"}};return t?tt.createElement("span",ns({style:b},u),tt.createElement("span",{style:y(0)}),tt.createElement("span",{style:y(1)}),tt.createElement("span",{style:y(2)}),tt.createElement("span",{style:y(3)}),tt.createElement("span",{style:y(4)}),tt.createElement("span",{style:y(5)})):null}var q_=Bf.default=L_;Wi.registerLocale(hp);Wf.register(Yf,Xf,Kf);const G_=lp(ap),Fc={chart:{fontFamily:"inherit"},cutoutPercentage:75,responsive:!0,maintainAspectRatio:!1,cutout:"75%",title:{display:!1},animation:{animateScale:!0,animateRotate:!0},tooltips:{enabled:!0,intersect:!1,mode:"nearest",bodySpacing:5,yPadding:10,xPadding:10,caretPadding:0,displayColors:!1,backgroundColor:"#20D489",titleFontColor:"#ffffff",cornerRadius:4,footerSpacing:0,titleSpacing:0},plugins:{legend:{display:!1}}},H_={chart:{id:"basic-bar",fontFamily:"inherit",type:"bar",toolbar:{show:!1}},xaxis:{categories:["Jun","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],axisBorder:{show:!1},axisTicks:{show:!1},labels:{style:{colors:G("--bs-gray-500"),fontSize:"13px"}},crosshairs:{fill:{gradient:{opacityFrom:0,opacityTo:0}}}},yaxis:{labels:{style:{colors:G("--bs-gray-500"),fontSize:"13px"},formatter:function(s){return parseInt(s)}}},fill:{opacity:1},tooltip:{style:{fontSize:"12px"}},plotOptions:{bar:{horizontal:!1,columnWidth:"22%",borderRadius:5,dataLabels:{position:"top"}}},legend:{show:!1},dataLabels:{enabled:!0,offsetY:-30,style:{fontSize:"13px",colors:[G("--bs-gray-900")]},formatter:function(s){return s==0?"":s}},stroke:{show:!0,width:2,colors:["transparent"]},colors:[G("--bs-success"),G("--bs-success-light")],grid:{borderColor:G("--bs-border-dashed-color"),strokeDashArray:4,yaxis:{lines:{show:!0}}}},B_={chart:{id:"basic-bar",fontFamily:"inherit",type:"bar",toolbar:{show:!1}},xaxis:{categories:["Jun","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],axisBorder:{show:!1},axisTicks:{show:!1},labels:{style:{colors:G("--bs-gray-500"),fontSize:"13px"}},crosshairs:{fill:{gradient:{opacityFrom:0,opacityTo:0}}}},yaxis:{labels:{style:{colors:G("--bs-gray-500"),fontSize:"13px"},formatter:function(s){return parseInt(s)}}},fill:{opacity:1},tooltip:{style:{fontSize:"12px"}},plotOptions:{bar:{horizontal:!1,columnWidth:"22%",borderRadius:5,dataLabels:{position:"top"}}},legend:{show:!1},dataLabels:{enabled:!0,offsetY:-30,style:{fontSize:"13px",colors:[G("--bs-gray-900")]},formatter:function(s){return s==0?"":s}},stroke:{show:!0,width:2,colors:["transparent"]},colors:[G("--bs-primary"),G("--bs-primary-light")],grid:{borderColor:G("--bs-border-dashed-color"),strokeDashArray:4,yaxis:{lines:{show:!0}}}},z_={series:[20,100,15,25],chart:{fontFamily:"inherit",type:"donut",width:250},plotOptions:{pie:{donut:{size:"50%",labels:{value:{fontSize:"10px"}}}}},colors:[G("--bs-info"),G("--bs-success"),G("--bs-primary"),G("--bs-danger")],stroke:{width:0},labels:["Approved","Change","Correction","Update & correction"],legend:{show:!1},fill:{type:"false"}},$_={chart:{type:"area",height:350,toolbar:{show:!1}},legend:{show:!1},dataLabels:{enabled:!1},fill:{type:"solid",opacity:1},stroke:{curve:"smooth",show:!0,width:3,colors:[G("--bs-success"),G("--bs-primary")]},xaxis:{categories:["Jun","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],axisBorder:{show:!1},axisTicks:{show:!1},labels:{style:{colors:G("--bs-gray-500"),fontSize:"12px"}},crosshairs:{position:"front",stroke:{color:G("--bs-primary"),width:1,dashArray:3}},tooltip:{enabled:!0,formatter:void 0,offsetY:0,style:{fontSize:"12px"}}},yaxis:{labels:{style:{colors:G("--bs-gray-500"),fontSize:"12px"}}},states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"none",value:0}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"none",value:0}}},tooltip:{style:{fontSize:"12px"},y:{formatter:function(s){return s?parseInt(s)+" dossiers":"0 dossiers"}}},colors:[G("--bs-success"),G("--bs-primary")],grid:{borderColor:G("--bs-gray-200"),strokeDashArray:4,yaxis:{lines:{show:!0}}},markers:{colors:[G("--bs-primary-light"),G("--bs-success-light")],strokeColor:[G("--bs-success"),G("--bs-primary")],strokeWidth:3}},U_=({RequetNumber:s,totalRequet:e,PublishingCount:t,formattingCount:r,acceptance:n,correction:o,update:a,totalclosed:l,inprogress:h,currentUser:d,countsformating:c,countspublishing:u,teamId:p,notifications:m,updateandcorrection:g})=>{const[b,y]=q.useState(new Date),[_,x]=q.useState("initiated"),[w,D]=q.useState(new Date),[T,S]=q.useState(new Date),[k,P]=q.useState(()=>{const C=new Date;return new Date(C.getFullYear(),C.getMonth(),1)}),[B,le]=q.useState(new Date),[I,be]=q.useState(1);q.useState([]);const[we,Ss]=q.useState(5),[vt,Ds]=q.useState({formattingRT:[],publishingRT:[],labelsf:"",labelsp:""}),[Ai,Pi]=q.useState({formattingR:[],publishingR:[]}),[Ii,ks]=q.useState({formattingCR:[],publishingCR:[]}),[ji,Fe]=q.useState(!1),[Ri,Es]=q.useState([]),[ue,Ns]=q.useState([]),[bt,Mi]=q.useState(1);q.useState();const Os=q.useRef(),yt=q.useRef(!0);var Wt={},Yt={};p===2?(Wt={labels:["Initiated","Submitted","In progress","Completed","To verify","Delivered","To correct"],datasets:[{data:[c.initiated,c.submitted,c["in progress"],c.completed,c["to verify"],c.delivered,c["to correct"]],backgroundColor:["#00A3FF","#50CD89","#FFC700","#00B4D8","#7239EA","#009EF7","#F1416C"]}]},Yt={labels:["Initiated","Submitted","In progress","Completed","To verify","Delivered","To correct"],datasets:[{data:[u.initiated,u.submitted,u["in progress"],u.completed,u["to verify"],u.delivered,u["to correct"]],backgroundColor:["#00A3FF","#50CD89","#FFC700","#00B4D8","#7239EA","#009EF7","#F1416C"]}]}):(Wt={labels:["Initiated","Submitted","In progress","Completed","Closed"],datasets:[{data:[c.initiated,c.submitted,c["in progress"],c.completed,c.closed],backgroundColor:["#00A3FF","#50CD89","#FFC700","#00B4D8","#f1f1f2"]}]},Yt={labels:["Initiated","Submitted","In progress","Completed","Closed","To verify","Delivered","To correct"],datasets:[{data:[u.initiated,u.submitted,u["in progress"],u.completed,u.closed],backgroundColor:["#00A3FF","#50CD89","#FFC700","#00B4D8","#f1f1f2"]}]}),q.useEffect(()=>{yt.current||Fe(!0),As()},[b,_]),q.useEffect(()=>{yt.current||Fe(!0),R()},[w]),q.useEffect(()=>{yt.current?yt.current=!1:Fe(!0),Le()},[T]);const As=()=>{const C=$(b).year();Fi.post("getRequestPerType",{selecedYear:C,status:_}).then(E=>{Ds(W=>({formattingRT:E.data.formattingRT.data?E.data.formattingRT.data:[],publishingRT:E.data.publishingRT.data?E.data.publishingRT.data:[],labelsf:E.data.formattingRT.cat?E.data.formattingRT.cat:"",labelsp:E.data.publishingRT.cat?E.data.publishingRT.cat:""})),setTimeout(()=>{Fe(!1)},1e3)})};q.useEffect(()=>{Fi.post("getRequestPerCountry",{from:k,to:B}).then(C=>{Ns(C.data.productCountry),console.log(C.data),be(1)})},[k,B]);const Oe=q.useMemo(()=>{const C=(ue==null?void 0:ue.length)||0,E=Math.ceil(C/we),W=(I-1)*we,fe=Math.min(W+we,C),Ge=(ue==null?void 0:ue.slice(W,fe))||[];return{totalItems:C,totalPages:E,startIndex:W,endIndex:fe,currentItems:Ge}},[ue,I,we]),M=C=>{C>=1&&C<=Oe.totalPages&&be(C)},_t=()=>{const C=[],E=Oe.totalPages,W=5;let fe=Math.max(1,I-Math.floor(W/2)),Ge=Math.min(E,fe+W-1);Ge-fe+1<W&&(fe=Math.max(1,Ge-W+1));for(let Te=fe;Te<=Ge;Te++)C.push(Te);return C},R=()=>{const C=$(w).year();Fi.post("getRequestsPerMonth",{selecedYear:C}).then(E=>{Pi(W=>({formattingR:E.data.formattingReq?E.data.formattingReq:[],publishingR:E.data.publishingReq?E.data.publishingReq:[]})),setTimeout(()=>{Fe(!1)},1e3)})},Le=()=>{const C=$(T).year();Fi.post("getRequestsPerMonth",{selecedYear:C}).then(E=>{ks(W=>({formattingCR:E.data.formattingReq?E.data.formattingReq:[],publishingCR:E.data.publishingReq?E.data.publishingReq:[]})),setTimeout(()=>{Fe(!1)},1e3)})};q.useEffect(()=>{if(p===1)return;const C=h.map(E=>({id:E._id,group:E.form=="Formatting"?"Formatting":"Publishing",start:new Date(E.created_at),end:new Date(E.deadline),content:E.dossier_type.value,title:"Start : "+$(E.created_at).format("DD-MM-yyyy")+" , End : "+$(E.deadline).format("DD-MM-yyyy"),color:E.form=="Formatting"?"primary":"success",type:"point"}));Es(C)},[]);const qe={chart:{fontFamily:"inherit",type:"pie",width:"100%"},labels:vt.labelsf,legend:{show:!1}},Ps={chart:{fontFamily:"inherit",type:"pie",width:"100%"},labels:vt.labelsp,legend:{show:!1}},xt=[{id:"Formatting",content:"Formatting",order:1,style:"color:#3e97ff"},{id:"Publishing",content:"Publishing",order:2,style:"color:#50cd89"}];$(new Date).add(1.5,"hours"),$(new Date).add(1,"hours"),$(new Date).add(2,"hours"),$(new Date).add(30,"minutes"),$(new Date).add(2.5,"hours"),$(new Date).add(1.5,"hours"),$(new Date).add(3,"hours");const Ce={zoomable:!1,moveable:!0,selectable:!1,margin:{item:{horizontal:10,vertical:35}},showCurrentTime:!0,xss:{disabled:!1,filterOptions:{whiteList:{div:["class","style"],img:["data-kt-timeline-avatar-src","alt"],a:["href","class"]}}},template:function(C){return`<div class="rounded-pill bg-${C.color} d-flex align-items-center position-relative h-40px w-100 p-2 overflow-hidden">
                
    
                <div class="d-flex align-items-center position-relative z-index-2">
                   
    
                    <a class="fw-bold text-white">${C.content}</a>
                </div>
    
               
            </div>        
            `}};return f.jsxs(f.Fragment,{children:[f.jsx(Qf,{title:"Dashboard"}),f.jsxs("div",{className:"row g-5 g-xl-10 mb-5 mb-xl-1",children:[f.jsx("div",{className:"col-4",children:f.jsxs("div",{className:"card card-flush h-xl-100 h-100",children:[f.jsx("div",{className:"card-header rounded bgi-no-repeat bgi-size-cover bgi-position-y-top bgi-position-x-center align-items-start h-250px",style:{backgroundImage:"url('storage/media/svg/shapes/top-green.png')"},"data-bs-theme":"light",children:f.jsxs("h3",{className:"card-title align-items-start flex-column text-white pt-15",children:[f.jsx("span",{className:"fw-bold fs-2x mb-3",children:"My Tasks"}),f.jsxs("div",{className:"fs-4 text-white",children:[f.jsx("span",{className:"opacity-75",children:"You have "}),f.jsxs("span",{className:"position-relative d-inline-block",children:[f.jsx("a",{href:"#",className:"link-white opacity-75-hover text-warning fw-bold d-block mb-1",onClick:()=>{Zf.get("tasks")},children:e}),f.jsx("span",{className:"position-absolute opacity-50 bottom-0 start-0 border-2 border-body border-bottom w-100"})]}),f.jsx("span",{className:"opacity-75",children:" task to complete"})]})]})}),f.jsx("div",{className:"card-body mt-n5",children:f.jsx("div",{className:"mt-n20 position-relative",children:f.jsxs("div",{className:"row g-3 g-lg-6",children:[f.jsx("div",{className:"col-12",children:f.jsxs("div",{className:"bg-gray-100 d-flex justify-content-between bg-opacity-70 rounded-2 px-6 py-5",children:[f.jsxs("div",{className:"d-flex align-items-center",children:[f.jsx("span",{className:"text-gray-700 fw-bolder d-block fs-2qx lh-1 ls-n1 me-3 ",children:s[0].total}),f.jsx("span",{className:"text-gray-500 fw-semibold fs-6",children:s[0].status})]}),s[2]?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"vr text-gray-500"}),f.jsxs("div",{className:"d-flex align-items-center",children:[f.jsx("span",{className:"text-gray-700 fw-bolder d-block fs-2qx lh-1 ls-n1 me-3 ",children:s[2].total}),f.jsx("span",{className:"text-gray-500 fw-semibold fs-6",children:s[2].status})]})]}):""]})}),f.jsx("div",{className:"col-12",children:f.jsxs("div",{className:"bg-gray-100 d-flex justify-content-between bg-opacity-70 rounded-2 px-6 py-5",children:[f.jsxs("div",{className:"d-flex align-items-center",children:[f.jsx("span",{className:"text-gray-700 fw-bolder d-block fs-2qx lh-1 ls-n1 me-3 ",children:s[1].total}),f.jsx("span",{className:"text-gray-500 fw-semibold fs-6",children:s[1].status})]}),s[3]?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"vr text-gray-500"}),f.jsxs("div",{className:"d-flex align-items-center",children:[f.jsx("span",{className:"text-gray-700 fw-bolder d-block fs-2qx lh-1 ls-n1 me-3 ",children:s[3].total}),f.jsx("span",{className:"text-gray-500 fw-semibold fs-6",children:s[3].status})]})]}):""]})})]})})})]})}),f.jsx("div",{className:"col-8",children:f.jsxs("div",{className:"card card-flush h-lg-100",children:[f.jsxs("div",{className:"card-header mt-6",children:[f.jsx("div",{className:"card-title flex-column",children:f.jsx("h3",{className:"fw-bold mb-1",children:"Total requests"})}),f.jsxs("div",{className:"card-toolbar",children:[f.jsx("button",{className:`btn me-2 ${bt===1?"btn-primary":"btn-outline-primary"}`,onClick:()=>Mi(1),children:"Graph view"}),f.jsx("button",{className:`btn ${bt===2?"btn-primary":"btn-outline-primary"}`,onClick:()=>Mi(2),children:"Table view"})]})]}),bt===1&&f.jsx("div",{className:"card-body p-9 pt-5",children:f.jsxs("div",{className:"row",children:[f.jsx("div",{className:"col-lg-6 border-end",children:f.jsxs("div",{className:"d-flex flex-wrap justify-content-center",children:[f.jsxs("div",{className:"position-relative d-flex flex-center h-175px w-175px mb-7",children:[f.jsxs("div",{className:"position-absolute translate-middle start-50 top-50 d-flex flex-column flex-center",children:[p===2?f.jsx("span",{className:"fs-2qx fw-bold",children:c.initiated+c.submitted+c["in progress"]+c.completed+c.delivered+c["to correct"]+c["to verify"]}):f.jsx("span",{className:"fs-2qx fw-bold",children:c.initiated+c.submitted+c["in progress"]+c.completed+c.closed}),f.jsx("span",{className:"fs-6 fw-semibold text-gray-400",children:"Formatting"})]}),f.jsx(tl,{data:Wt,options:Fc})]}),f.jsxs("div",{className:"d-flex flex-column justify-content-center flex-row-fluid pe-11 mb-5 ms-4",children:[c.initiated?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#00A3FF"}}),f.jsx("div",{className:"text-gray-400",children:"Intiated"}),f.jsxs("div",{className:"ms-auto fw-bold text-gray-700",children:[c.initiated," "]})]}):"",c.submitted?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#50CD89"}}),f.jsx("div",{className:"text-gray-400",children:"Submitted"}),f.jsxs("div",{className:"ms-auto fw-bold text-gray-700",children:[c.submitted," "]})]}):"",c["in progress"]?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#FFC700"}}),f.jsx("div",{className:"text-gray-400",children:"In progress"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:c["in progress"]})]}):"",c.completed?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#00B4D8"}}),f.jsx("div",{className:"text-gray-400",children:"Completed"}),f.jsxs("div",{className:"ms-auto fw-bold text-gray-700",children:[c.completed," "]})]}):"",c.closed?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#f1f1f2"}}),f.jsx("div",{className:"text-gray-400",children:"Closed"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:c.closed})]}):"",p===2?f.jsxs(f.Fragment,{children:[c["to verify"]?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#7239EA"}}),f.jsx("div",{className:"text-gray-400",children:"To verify"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:c["to verify"]})]}):"",c.delivered?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#009EF7"}}),f.jsx("div",{className:"text-gray-400",children:"Delivred"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:c.delivered})]}):"",c["to correct"]?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#F1416C"}}),f.jsx("div",{className:"text-gray-400",children:"To correct"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:c["to correct"]})]}):""]}):""]})]})}),f.jsx("div",{className:"col-lg-6 col-md-6",children:f.jsxs("div",{className:"d-flex flex-wrap justify-content-center",children:[f.jsxs("div",{className:"position-relative d-flex flex-center h-175px w-175px mb-7",children:[f.jsxs("div",{className:"position-absolute translate-middle start-50 top-50 d-flex flex-column flex-center",children:[p===2?f.jsx("span",{className:"fs-2qx fw-bold",children:u.initiated+u.submitted+u["in progress"]+u.completed+u["to verify"]+u.delivered+u["to correct"]}):f.jsx("span",{className:"fs-2qx fw-bold",children:u.initiated+u.submitted+u["in progress"]+u.completed+u.closed}),f.jsx("span",{className:"fs-6 fw-semibold text-gray-400",children:"Publishing"})]}),f.jsx(tl,{data:Yt,options:Fc})]}),f.jsxs("div",{className:"d-flex flex-column justify-content-center flex-row-fluid pe-11 mb-5 ms-4",children:[u.initiated?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#00A3FF"}}),f.jsx("div",{className:"text-gray-400",children:"Intiated"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:u.initiated})]}):"",u.submitted?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#50CD89"}}),f.jsx("div",{className:"text-gray-400",children:"Submitted"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:u.submitted})]}):"",u["in progress"]?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#FFC700"}}),f.jsx("div",{className:"text-gray-400",children:"In progress"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:u["in progress"]})]}):"",u.completed?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#00B4D8"}}),f.jsx("div",{className:"text-gray-400",children:"Completed"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:u.completed})]}):"",u.closed?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#f1f1f2"}}),f.jsx("div",{className:"text-gray-400",children:"Closed"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:u.closed})]}):"",p===2?f.jsxs(f.Fragment,{children:[u["to verify"]?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#7239EA"}}),f.jsx("div",{className:"text-gray-400",children:"To verify"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:u["to verify"]})]}):"",u.delivered?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#009EF7"}}),f.jsx("div",{className:"text-gray-400",children:"Delivred"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:u.delivered})]}):"",u["to correct"]?f.jsxs("div",{className:"d-flex fs-6 fw-semibold align-items-center mb-3",children:[f.jsx("div",{className:"bullet me-3",style:{backgroundColor:"#F1416C"}}),f.jsx("div",{className:"text-gray-400",children:"To correct"}),f.jsx("div",{className:"ms-auto fw-bold text-gray-700",children:u["to correct"]})]}):""]}):""]})]})})]})}),bt===2&&f.jsx("div",{className:"card-body py-0 ps-6 mt-2 ",children:f.jsxs("div",{className:"d-flex",children:[f.jsxs("div",{className:"flex-fill border-end pe-3",children:[f.jsx("span",{children:"Formatting"}),f.jsxs("table",{className:"table table-bordered table-striped",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Status"}),f.jsx("th",{className:"text-end",children:"Count"})]})}),f.jsxs("tbody",{children:[f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#00A3FF"}}),"Initiated"]}),f.jsx("td",{className:"text-end fw-bold",children:c.initiated})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#50CD89"}}),"Submitted"]}),f.jsx("td",{className:"text-end fw-bold",children:c.submitted})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#FFC700"}}),"In progress"]}),f.jsx("td",{className:"text-end fw-bold",children:c["in progress"]})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#00B4D8"}}),"Completed"]}),f.jsx("td",{className:"text-end fw-bold",children:c.completed})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#f1f1f2"}}),"Closed"]}),f.jsx("td",{className:"text-end fw-bold",children:c.closed})]}),p===2&&f.jsxs(f.Fragment,{children:[f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#7239EA"}}),"To verify"]}),f.jsx("td",{className:"text-end fw-bold",children:c["to verify"]})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#009EF7"}}),"Delivered"]}),f.jsx("td",{className:"text-end fw-bold",children:c.delivered})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#F1416C"}}),"To correct"]}),f.jsx("td",{className:"text-end fw-bold",children:c["to correct"]})]})]})]}),f.jsx("tfoot",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Total"}),f.jsx("th",{className:"text-end fw-bold",children:(()=>(p===2?["initiated","submitted","in progress","completed","closed","to verify","delivered","to correct"]:["initiated","submitted","in progress","completed","closed"]).reduce((E,W)=>E+(c[W]||0),0))()})]})})]})]}),f.jsxs("div",{className:"flex-fill ps-3",children:[f.jsx("span",{children:"Publishing"}),f.jsxs("table",{className:"table table-bordered table-striped",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Status"}),f.jsx("th",{className:"text-end",children:"Count"})]})}),f.jsxs("tbody",{children:[f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#00A3FF"}}),"Initiated"]}),f.jsx("td",{className:"text-end fw-bold",children:u.initiated})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#50CD89"}}),"Submitted"]}),f.jsx("td",{className:"text-end fw-bold",children:u.submitted})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#FFC700"}}),"In progress"]}),f.jsx("td",{className:"text-end fw-bold",children:u["in progress"]})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#00B4D8"}}),"Completed"]}),f.jsx("td",{className:"text-end fw-bold",children:u.completed})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#f1f1f2"}}),"Closed"]}),f.jsx("td",{className:"text-end fw-bold",children:u.closed})]}),p===2&&f.jsxs(f.Fragment,{children:[f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#7239EA"}}),"To verify"]}),f.jsx("td",{className:"text-end fw-bold",children:u["to verify"]})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#009EF7"}}),"Delivered"]}),f.jsx("td",{className:"text-end fw-bold",children:u.delivered})]}),f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("span",{className:"bullet me-2",style:{backgroundColor:"#F1416C"}}),"To correct"]}),f.jsx("td",{className:"text-end fw-bold",children:u["to correct"]})]})]})]}),f.jsx("tfoot",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Total"}),f.jsx("th",{className:"text-end fw-bold",children:(()=>(p===2?["initiated","submitted","in progress","completed","closed","to verify","delivered","to correct"]:["initiated","submitted","in progress","completed","closed"]).reduce((E,W)=>E+(u[W]||0),0))()})]})})]})]})]})})]})}),f.jsx("div",{className:"col-4",children:f.jsxs("div",{className:"card card-flush h-lg-100",children:[f.jsx("div",{className:"card-header mt-6",children:f.jsx("div",{className:"card-title flex-column",children:f.jsx("h3",{className:"fw-bold mb-1",children:"Latest updates"})})}),f.jsx("div",{className:"card-body py-0 ps-6 mt-2",children:f.jsx("div",{className:"timeline-label",children:m==null?void 0:m.map((C,E)=>{var W,fe;return f.jsxs("div",{className:"timeline-item",children:[f.jsx("div",{className:"timeline-line w-40px"}),f.jsx("div",{className:"timeline-icon symbol symbol-40px me-4",children:f.jsx("span",{className:"svg-icon svg-icon-2 svg-icon-primary",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[f.jsx("path",{opacity:"0.3",d:"M21 19H3C2.4 19 2 18.6 2 18V6C2 5.4 2.4 5 3 5H21C21.6 5 22 5.4 22 6V18C22 18.6 21.6 19 21 19Z",fill:"currentColor"}),f.jsx("path",{d:"M21 19H3C2.4 19 2 18.6 2 18V6C2 5.4 2.4 5 3 5H21C21.6 5 22 5.4 22 6V18C22 18.6 21.6 19 21 19Z",fill:"currentColor",className:"primary"}),f.jsx("path",{d:"M9 8C10.3 8 11 7.3 11 6C11 4.7 10.3 4 9 4C7.7 4 7 4.7 7 6C7 7.3 7.7 8 9 8Z",fill:"currentColor"}),f.jsx("path",{opacity:"0.3",d:"M17 8C18.3 8 19 7.3 19 6C19 4.7 18.3 4 17 4C15.7 4 15 4.7 15 6C15 7.3 15.7 8 17 8Z",fill:"currentColor"})]})})}),f.jsxs("div",{className:"timeline-content mb-10",children:[f.jsxs("span",{className:"fw-semibold text-gray-800 text-hover-primary fs-6",children:[C.data.title," - ",C.data.status]}),f.jsxs("span",{className:"text-muted fw-semibold d-block",children:[(W=C.data.country)==null?void 0:W.value," - ",(fe=C.data.country)==null?void 0:fe.code]}),f.jsx("span",{className:"text-muted fw-semibold d-block",children:$(C.created_at).format("YYYY-MM-DD HH:mm")})]})]})})})})]})}),f.jsx("div",{className:"col-8",children:f.jsxs("div",{className:"card card-flush h-lg-100",children:[f.jsxs("div",{className:"card-header py-7 mb-3",children:[f.jsx("h3",{className:"card-title align-items-start flex-column",children:f.jsx("span",{className:"card-label fw-bold text-gray-800",children:"Request per type"})}),f.jsxs("div",{className:"card-toolbar m-0",children:[f.jsxs("ul",{className:"nav nav-pills nav-pills-custom",role:"tablist",children:[f.jsx("li",{className:"nav-item mb-3 me-3 me-lg-6",children:f.jsx("a",{className:"nav-link btn btn-outline btn-flex btn-active-color-primary flex-column overflow-hidden w-60px h-60px pt-5 pb-2 active","data-bs-toggle":"tab",href:"#kt_charts_widget_11_tab_content_1",children:f.jsxs("div",{className:"nav-icon mb-2",children:[f.jsxs("i",{className:"ki-duotone ki-ship fs-4 p-0",children:[f.jsx("span",{className:"path1"}),f.jsx("span",{className:"path2"}),f.jsx("span",{className:"path3"})]}),f.jsx("span",{className:"nav-text text-gray-800 fw-bold fs-9 lh-1",children:"Formatting"}),f.jsx("span",{className:"bullet-custom position-absolute bottom-0 w-100 h-2px bg-primary"})]})})}),f.jsx("li",{className:"nav-item mb-3 me-3 me-lg-6",children:f.jsx("a",{className:"nav-link btn btn-outline btn-flex btn-active-color-primary flex-column overflow-hidden w-60px h-60px pt-5 pb-2","data-bs-toggle":"tab",href:"#kt_charts_widget_12_tab_content_2",children:f.jsxs("div",{className:"nav-icon mb-2",children:[f.jsxs("i",{className:"ki-duotone ki-ship fs-4 p-0",children:[f.jsx("span",{className:"path1"}),f.jsx("span",{className:"path2"}),f.jsx("span",{className:"path3"})]}),f.jsx("span",{className:"nav-text text-gray-800 fw-bold fs-9 lh-1",children:"Publishing"}),f.jsx("span",{className:"bullet-custom position-absolute bottom-0 w-100 h-2px bg-primary"})]})})})]}),f.jsxs("select",{className:"form-select form-select-solid form-select-sm fw-bold w-100px me-3","data-kt-select2":"true","data-allow-clear":"true",onChange:C=>x(C.target.value),children:[f.jsx("option",{value:"initiated",children:"Initiated"}),f.jsx("option",{value:"delivered",children:"Delivred"}),f.jsx("option",{value:"submitted",children:"Submitted"}),f.jsx("option",{value:"completed",children:"Completed"}),f.jsx("option",{value:"to verify",children:"To verify"}),f.jsx("option",{value:"to correct",children:"To correct"}),f.jsx("option",{value:"in progress",children:"In progress"}),f.jsx("option",{value:"completed",children:"Completed"}),f.jsx("option",{value:"closed",children:"Closed"})]}),f.jsx(Xt,{dateFormat:"yyyy",showYearPicker:!0,selected:b,onChange:C=>y(C),className:"form-select form-select-solid form-select-sm fw-bold w-100px",yearItemNumber:6})]})]}),f.jsx("div",{className:"card-body py-0 ps-6 mt-2",children:f.jsxs("div",{className:"tab-content ps-4 pe-6",children:[f.jsx("div",{className:"tab-pane fade active show",id:"kt_charts_widget_11_tab_content_1",children:f.jsx(wt,{options:qe,series:vt.formattingRT,type:"donut",height:300})}),f.jsx("div",{className:"tab-pane fade",id:"kt_charts_widget_12_tab_content_2",children:f.jsx(wt,{options:Ps,series:vt.publishingRT,type:"donut",height:300})})]})})]})}),f.jsx("div",{className:"col-lg-6 col-md-6 mb-5 mb-xl-10",children:f.jsxs("div",{className:"card card-flush h-xxl-100 h-lg-100",children:[f.jsxs("div",{className:"card-header pt-7",children:[f.jsx("h3",{className:"card-title align-items-start flex-column",children:f.jsx("span",{className:"card-label fw-bold text-gray-800",children:"Requests per month"})}),f.jsx("div",{className:"card-toolbar",children:f.jsx(Xt,{dateFormat:"yyyy",showYearPicker:!0,selected:w,onChange:C=>D(C),className:"form-select form-select-solid form-select-sm fw-bold w-100px",yearItemNumber:6})})]}),f.jsxs("div",{className:"card-body d-flex flex-column justify-content-between pb-5 px-0",children:[f.jsxs("ul",{className:"nav nav-pills nav-pills-custom mb-3 mx-9",role:"tablist",children:[f.jsx("li",{className:"nav-item mb-3 me-3 me-lg-6",children:f.jsx("a",{className:"nav-link btn btn-outline btn-flex btn-active-color-success flex-column overflow-hidden w-80px h-85px pt-5 pb-2 active","data-bs-toggle":"tab",href:"#kt_charts_widget_10_tab_content_1",children:f.jsxs("div",{className:"nav-icon mb-3",children:[f.jsxs("i",{className:"ki-duotone ki-ship fs-1 p-0",children:[f.jsx("span",{className:"path1"}),f.jsx("span",{className:"path2"}),f.jsx("span",{className:"path3"})]}),f.jsx("span",{className:"nav-text text-gray-800 fw-bold fs-6 lh-1",children:"Formatting"}),f.jsx("span",{className:"bullet-custom position-absolute bottom-0 w-100 h-4px bg-success"})]})})}),f.jsx("li",{className:"nav-item mb-3 me-3 me-lg-6",children:f.jsx("a",{className:"nav-link btn btn-outline btn-flex btn-active-color-primary flex-column overflow-hidden w-80px h-85px pt-5 pb-2","data-bs-toggle":"tab",href:"#kt_charts_widget_10_tab_content_2",children:f.jsxs("div",{className:"nav-icon mb-3",children:[f.jsxs("i",{className:"ki-duotone ki-ship fs-1 p-0",children:[f.jsx("span",{className:"path1"}),f.jsx("span",{className:"path2"}),f.jsx("span",{className:"path3"})]}),f.jsx("span",{className:"nav-text text-gray-800 fw-bold fs-6 lh-1",children:"Publishing"}),f.jsx("span",{className:"bullet-custom position-absolute bottom-0 w-100 h-4px bg-primary"})]})})})]}),f.jsxs("div",{className:"tab-content ps-4 pe-6",children:[f.jsx("div",{className:"tab-pane fade active show",id:"kt_charts_widget_10_tab_content_1",children:f.jsx(wt,{options:H_,series:[{name:"Formatting",data:Ai.formattingR}],type:"bar",height:270})}),f.jsx("div",{className:"tab-pane fade",id:"kt_charts_widget_10_tab_content_2",children:f.jsx(wt,{options:B_,series:[{name:"Publishing",data:Ai.publishingR}],type:"bar",height:270})})]})]})]})}),f.jsx("div",{className:"col-lg-6 col-md-6 mb-5 mb-xl-10",children:f.jsxs("div",{className:"card card-flush h-lg-100",children:[f.jsxs("div",{className:"card-header mt-6",children:[f.jsxs("div",{className:"card-title flex-column",children:[f.jsx("h3",{className:"fw-bold mb-1",children:"Cumulative requests"}),f.jsxs("div",{className:"fs-6 d-flex text-gray-400 fs-6 fw-semibold",children:[f.jsxs("div",{className:"d-flex align-items-center me-6",children:[f.jsx("span",{className:"menu-bullet d-flex align-items-center me-2",children:f.jsx("span",{className:"bullet bg-success"})}),"Formatting"]}),f.jsxs("div",{className:"d-flex align-items-center",children:[f.jsx("span",{className:"menu-bullet d-flex align-items-center me-2",children:f.jsx("span",{className:"bullet bg-primary"})}),"Publishing"]})]})]}),f.jsx("div",{className:"card-toolbar",children:f.jsx(Xt,{dateFormat:"yyyy",showYearPicker:!0,selected:T,onChange:S,className:"form-select form-select-solid form-select-sm fw-bold w-100px",yearItemNumber:6})})]}),f.jsx("div",{className:"card-body pt-10 pb-0 px-5",children:f.jsx(wt,{options:$_,series:[{name:"Formatting",data:Ii.formattingCR},{name:"Publishing",data:Ii.publishingCR}],type:"line"})})]})}),p!==1?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"col-lg-6",children:f.jsxs("div",{className:"card card-flush h-lg-100",children:[f.jsxs("div",{className:"card-header pt-7 mb-5",children:[f.jsx("h3",{className:"card-title align-items-start flex-column",children:f.jsx("span",{className:"card-label fw-bold text-gray-800",children:"Requests Per Product-Country"})}),f.jsxs("div",{className:"card-toolbar",children:[f.jsx("span",{className:"me-3",children:"From"}),f.jsx(Xt,{dateFormat:"d/M/yy",className:"form-select form-select-solid form-select-sm fw-bold w-100px",selected:k,onChange:P}),f.jsx("span",{className:"ms-3 me-3",children:"To"}),f.jsx(Xt,{dateFormat:"d/M/yy",className:"form-select form-select-solid form-select-sm fw-bold w-100px",selected:B,onChange:le})]})]}),f.jsx("div",{className:"card-body pt-0",children:f.jsxs("div",{className:"table-responsive",children:[f.jsxs("table",{className:"table table-row-dashed table-row-gray-200 align-middle gs-0 gy-4",ref:Os,children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Country"}),f.jsx("th",{children:"Produit"}),f.jsx("th",{children:"Formatting"}),f.jsx("th",{children:"Publishing"})]})}),f.jsx("tbody",{children:ue==null?void 0:ue.map((C,E)=>f.jsxs("tr",{children:[f.jsx("td",{children:f.jsxs("div",{className:"d-flex align-items-center",children:[f.jsx("div",{className:"symbol symbol-45px me-2",children:C.cnt=="KSA"?f.jsx(Is,{countryCode:Wi.getAlpha2Code("Saudi arabia","en"),svg:!0,style:{width:"2em",height:"2em"}}):C.cnt=="EU"?f.jsx(Is,{countryCode:"EU","aria-label":"Europe",title:"Europe",svg:!0,style:{width:"2em",height:"2em"}}):f.jsx(Is,{countryCode:Wi.getAlpha2Code(C.cnt,"en"),svg:!0,style:{width:"2em",height:"2em"}})}),f.jsxs("div",{className:"d-flex justify-content-start flex-column",children:[f.jsx("span",{className:"text-dark fw-bold text-hover-primary fs-6",children:C.cnt=="EU"?"Europe":C.cnt}),f.jsx("span",{className:"text-muted fw-semibold text-muted d-block fs-7",children:C.cnt=="EU"?"EU":Wi.getAlpha2Code(C.cnt,"en")})]})]})}),f.jsx("td",{children:f.jsx("span",{className:"text-gray-700 fw-bold fs-6 me-3 d-block",children:C.pr})}),f.jsx("td",{children:f.jsx("span",{className:"text-gray-500 fw-bold fs-6 me-3 d-block",children:C.formatting})}),f.jsx("td",{children:f.jsx("span",{className:"text-gray-500 fw-bold fs-6 me-3 d-block",children:C.publishing})})]},E))})]}),Oe.totalPages>0&&f.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap mt-4",children:[f.jsxs("div",{className:"d-flex align-items-center text-muted fs-7",children:["Showing ",f.jsx("span",{className:"fw-bold mx-1",children:Oe.startIndex+1})," to",f.jsx("span",{className:"fw-bold mx-1",children:Oe.endIndex})," of",f.jsx("span",{className:"fw-bold mx-1",children:Oe.totalItems})," entries"]}),f.jsxs("ul",{className:"pagination",children:[f.jsx("li",{className:`page-item previous ${I===1?"disabled":""}`,children:f.jsx("button",{className:"page-link",onClick:()=>M(I-1),children:f.jsx("i",{className:"previous"})})}),_t().map(C=>f.jsx("li",{className:`page-item ${I===C?"active":""}`,children:f.jsx("button",{className:"page-link",onClick:()=>M(C),children:C})},C)),f.jsx("li",{className:`page-item next ${I===Oe.totalPages?"disabled":""}`,children:f.jsx("button",{className:"page-link",onClick:()=>M(I+1),children:f.jsx("i",{className:"next"})})})]})]})]})})]})}),f.jsx("div",{className:"col-lg-6",children:f.jsxs("div",{className:"card card-flush h-lg-100",children:[f.jsx("div",{className:"card-header pt-7 mb-5",children:f.jsx("h3",{className:"card-title align-items-center flex-column",children:f.jsx("span",{className:"card-label fw-bold text-gray-800",children:"Request review"})})}),f.jsx("div",{className:"card-body pt-0",children:f.jsxs("div",{className:"d-flex flex-wrap flex-md-nowrap",children:[f.jsxs("div",{className:"me-md-5 w-100",children:[f.jsxs("div",{className:"d-flex border border-gray-300 border-dashed rounded p-6 mb-6",children:[f.jsxs("div",{className:"d-flex align-items-center flex-grow-1 me-2 me-sm-5",children:[f.jsx("div",{className:"symbol symbol-50px me-4",children:f.jsx("span",{className:"symbol-label",children:f.jsxs("i",{className:"ki-duotone ki-shield-tick fs-2qx text-primary",children:[f.jsx("span",{className:"path1"}),f.jsx("span",{className:"path2"})]})})}),f.jsx("div",{className:"me-2",children:f.jsx("span",{className:"text-gray-800 fs-6 fw-bold",children:"Approved"})})]}),f.jsxs("div",{className:"d-flex align-items-center",children:[f.jsx("span",{className:"text-dark fw-bolder fs-2x",children:n}),f.jsx("span",{className:"fw-semibold fs-2 text-gray-600 mx-1 pt-1",children:"/"}),f.jsx("span",{className:"text-gray-600 fw-semibold fs-2 me-3 pt-2",children:l})]})]}),f.jsxs("div",{className:"d-flex border border-gray-300 border-dashed rounded p-6 mb-6",children:[f.jsxs("div",{className:"d-flex align-items-center flex-grow-1 me-2 me-sm-5",children:[f.jsx("div",{className:"symbol symbol-50px me-4",children:f.jsx("span",{className:"symbol-label",children:f.jsxs("i",{className:"ki-duotone ki-shield fs-2qx text-primary",children:[f.jsx("span",{className:"path1"}),f.jsx("span",{className:"path2"})]})})}),f.jsx("div",{className:"me-2",children:f.jsx("span",{className:"text-gray-800 fs-6 fw-bold",children:"Change"})})]}),f.jsxs("div",{className:"d-flex align-items-center",children:[f.jsx("span",{className:"text-dark fw-bolder fs-2x",children:a}),f.jsx("span",{className:"fw-semibold fs-2 text-gray-600 mx-1 pt-1",children:"/"}),f.jsx("span",{className:"text-gray-600 fw-semibold fs-2 me-3 pt-2",children:l})]})]}),f.jsxs("div",{className:"d-flex border border-gray-300 border-dashed rounded p-6 mb-6",children:[f.jsxs("div",{className:"d-flex align-items-center flex-grow-1 me-2 me-sm-5",children:[f.jsx("div",{className:"symbol symbol-50px me-4",children:f.jsx("span",{className:"symbol-label",children:f.jsxs("i",{className:"ki-duotone ki-shield-cross fs-2qx text-primary",children:[f.jsx("span",{className:"path1"}),f.jsx("span",{className:"path2"}),f.jsx("span",{className:"path3"})]})})}),f.jsx("div",{className:"me-2",children:f.jsx("span",{className:"text-gray-800 fs-6 fw-bold",children:"Correction"})})]}),f.jsxs("div",{className:"d-flex align-items-center",children:[f.jsx("span",{className:"text-dark fw-bolder fs-2x",children:o}),f.jsx("span",{className:"fw-semibold fs-2 text-gray-600 mx-1 pt-1",children:"/"}),f.jsx("span",{className:"text-gray-600 fw-semibold fs-2 me-3 pt-2",children:l})]})]}),f.jsxs("div",{className:"d-flex border border-gray-300 border-dashed rounded p-6 mb-6",children:[f.jsxs("div",{className:"d-flex align-items-center flex-grow-1 me-2 me-sm-5",children:[f.jsx("div",{className:"symbol symbol-50px me-4",children:f.jsx("span",{className:"symbol-label",children:f.jsxs("i",{className:"ki-duotone ki-shield-cross fs-2qx text-primary",children:[f.jsx("span",{className:"path1"}),f.jsx("span",{className:"path2"}),f.jsx("span",{className:"path3"})]})})}),f.jsx("div",{className:"me-2",children:f.jsx("span",{className:"text-gray-800 fs-6 fw-bold",children:"Update & Correction"})})]}),f.jsxs("div",{className:"d-flex align-items-center",children:[f.jsx("span",{className:"text-dark fw-bolder fs-2x",children:g}),f.jsx("span",{className:"fw-semibold fs-2 text-gray-600 mx-1 pt-1",children:"/"}),f.jsx("span",{className:"text-gray-600 fw-semibold fs-2 me-3 pt-2",children:l})]})]})]}),f.jsxs("div",{className:"d-flex justify-content-between flex-column w-225px w-md-600px mx-auto mx-md-0 pt-3 pb-10",children:[f.jsx(wt,{options:z_,series:[n,a,o,g],type:"donut"}),f.jsxs("div",{className:"mx-auto",children:[f.jsxs("div",{className:"d-flex align-items-center mb-2",children:[f.jsx("div",{className:"bullet bullet-dot w-8px h-7px bg-success me-2"}),f.jsx("div",{className:"fs-8 fw-semibold text-muted",children:"Change"})]}),f.jsxs("div",{className:"d-flex align-items-center mb-2",children:[f.jsx("div",{className:"bullet bullet-dot w-8px h-7px bg-primary me-2"}),f.jsx("div",{className:"fs-8 fw-semibold text-muted",children:"Correction"})]}),f.jsxs("div",{className:"d-flex align-items-center mb-2",children:[f.jsx("div",{className:"bullet bullet-dot w-8px h-7px bg-info me-2"}),f.jsx("div",{className:"fs-8 fw-semibold text-muted",children:"Approved"})]}),f.jsxs("div",{className:"d-flex align-items-center mb-2",children:[f.jsx("div",{className:"bullet bullet-dot w-8px h-7px bg-danger me-2"}),f.jsx("div",{className:"fs-8 fw-semibold text-muted",children:"Update & Correction"})]})]})]})]})})]})})]}):"",d==3?f.jsx("div",{className:"col-12",children:f.jsxs("div",{className:"card h-md-100",children:[f.jsx("div",{className:"card-header position-relative py-0 border-bottom-1",children:f.jsx("h3",{className:"card-title text-gray-800 fw-bold",children:"Active Tasks"})}),f.jsx("div",{className:"card-body pb-0",children:Ri.length>0?f.jsx(E_,{options:Ce,initialGroups:xt,initialItems:Ri}):""})]})}):""]}),ji&&f.jsx("div",{className:"overlay",children:f.jsx(q_,{color:"#009ef7",loading:ji,"aria-label":"Loading Spinner","data-testid":"loader"})})]})},V_=s=>{var b,y,_;const e=s.RequestNumber,t=s.formattingCount,r=s.publishingCount,n=s.acceptance,o=s.correction,a=s.update;s.perMonthFor,s.perMonthPub;const l=Object.values(e).reduce((x,w)=>x+w.total,0),h=s.totalclosed;s.productCountry;const d=s.inprogress,c=s.updateandcorrection,u=s.auth.user.current_team_id,p=(b=s.auth.user.notifications)==null?void 0:b.slice(0,3);q.useEffect(()=>{s.flash.message&&G_.fire({title:f.jsx("p",{children:"Done !"}),icon:"success",text:s.flash.message})},[]);const{config:m,classes:g}=Jf();return(_=(y=m.app)==null?void 0:y.toolbar)!=null&&_.display?f.jsxs(f.Fragment,{children:[f.jsx(ep,{breadcrumbs:[],children:"Dashboard"}),f.jsx(U_,{RequetNumber:e,totalRequet:l,formattingCount:t,PublishingCount:r,acceptance:n,correction:o,update:a,totalclosed:h,inprogress:d,currentUser:s.auth.user.current_team_id,countsformating:s.countsformating,countspublishing:s.countspublishing,teamId:u,notifications:p,updateandcorrection:c})]}):null};V_.layout=s=>f.jsx(op,{children:s,auth:s.props.auth});export{V_ as default};
