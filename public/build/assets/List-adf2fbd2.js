import{r as n,j as e,c as C}from"./app-134494bf.js";import{K as h,S,R as u,h as x,A as _}from"./AuthenticatedLayout-e3c0c57e.js";import"./MetronicSplashScreen-fb846d29.js";import{c as p}from"./MenuComponent-20e277f4.js";import{$ as o,D as T,w as D,S as k}from"./sweetalert2-react-content.es-51b87784.js";import{S as w}from"./StatusComponent-debf3ff1.js";const M=l=>{const{data:c}=l,[i,d]=n.useState(1),[s,g]=n.useState();n.useState(!0),n.useEffect(()=>{o.fn.DataTable.isDataTable("#myTable")||o(document).ready(function(){var a=new T("#lisTable",{info:!1,order:[],pageLength:15});g(a)}),console.log("render1"),o.fn.dataTable.ext.errMode="none"},[]);const j=a=>{s.search(a.target.value).draw()},f=a=>{let t=a.value;t==="All"&&(t=""),s.column(3).search(t).draw()},m=[];var r;if(s){r=s.page.info().pages;for(let a=1;a<=r;a++)m.push(a)}const b=a=>{console.log(a),d(a),s.page(a-1).draw("page")},N=()=>{let a=s.page.info().page;d(a),s.page(a-1).draw("page")},v=()=>{let a=s.page.info().page+1;console.log(a),d(a+1),s.page(a).draw("page")},y=a=>{let t;return a==="Swissmedic"||!a?t="CH":t=a.split("-")[0],t};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"card mb-5",children:[e.jsxs("div",{className:"card-header align-items-center py-5 gap-2 gap-md-5",children:[e.jsx("div",{className:"card-title",children:e.jsxs("div",{className:"d-flex align-items-center position-relative my-1",children:[e.jsx(h,{iconName:"magnifier",className:"fs-3 position-absolute ms-4"}),e.jsx("input",{type:"text",className:"form-control form-control-solid w-250px ps-12",placeholder:"Search",onChange:j})]})}),e.jsxs("div",{className:"card-toolbar flex-row-fluid justify-content-end gap-5",children:[e.jsx("div",{className:"w-100 mw-150px",children:e.jsx(S,{options:[{label:"All",value:"All"},{label:"Initiated",value:"Initiated"},{label:"Submitted",value:"Submitted"},{label:"To verify",value:"To verify"},{label:"Delivered",value:"Delivered"},{label:"To correct",value:"To correct"},{label:"Closed",value:"Closed"}],placeholder:"All Forms",onChange:f,menuPortalTarget:document.body,styles:{menuPortal:a=>({...a,zIndex:9999})},isClearable:!0})}),l.user.current_team_id!==3?e.jsxs("a",{href:"#",className:"btn btn-sm btn-light-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_invite_friends",children:[e.jsx(h,{iconName:"plus",className:"fs-3"}),"New Request"]}):""]})]}),e.jsx("div",{className:"card-body py-3",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4",id:"lisTable",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"fw-bold text-muted",children:[e.jsx("th",{className:"min-w-150px",children:"Product"}),e.jsx("th",{className:"min-w-140px",children:"Country"}),e.jsx("th",{className:"min-w-140px",children:"Sequence"}),e.jsx("th",{className:"min-w-130px",children:"Status"}),e.jsx("th",{className:"min-w-130px",children:"Dossier type"}),e.jsx("th",{className:"min-w-130px",children:"Request date"}),e.jsx("th",{className:"min-w-130px",children:"Last update"})]})}),e.jsx("tbody",{children:c?Object.values(c).map((a,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:typeof a.product_name=="object"&&a.product_name?e.jsx("a",{href:"#",onClick:()=>C.get("show-formatting",{id:a._id}),className:"text-dark fw-bold text-hover-primary fs-6",children:a.product_name.value}):a.product_name})}),e.jsx("td",{children:typeof a.country=="object"&&a.country?e.jsx(e.Fragment,{children:e.jsx(u,{countryCode:a.country.code,"aria-label":a.country.value,title:a.country.value,svg:!0,style:{width:"1.5em",height:"1.5em"}})}):e.jsx(u,{countryCode:y(a.agency_code),"aria-label":a.country,title:a.country,svg:!0,style:{width:"1.5em",height:"1.5em"}})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:a.sequence?a.sequence:"NA"})}),e.jsx("td",{children:e.jsx(w,{status:a.status})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:a.dossier_type?a.dossier_type.value:""})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:a.request_date?x(a.request_date).format("DD-MMM-YYYY"):""})}),e.jsx("td",{children:e.jsx("span",{className:"fs-7",children:a.updated_at?x(a.updated_at).format("DD-MMM-YYYY"):""})})]},t)):""})]})})}),e.jsx("div",{className:"card-footer",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"}),e.jsx("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:p("paginate_button page-item previous",i===1?"disabled":""),children:e.jsx("a",{className:"page-link",onClick:N,children:e.jsx("i",{className:"bi bi-chevron-left"})})}),m.map(a=>e.jsx("li",{className:i===a?"page-item active":"page-item",children:e.jsxs("button",{onClick:()=>b(a),className:"page-link",children:[" ",a," "]})},a)),e.jsx("li",{className:p("paginate_button page-item next",i===r?"disabled":""),children:e.jsx("a",{className:"page-link",onClick:v,children:e.jsx("i",{className:"bi bi-chevron-right"})})})]})})]})})]})})},Y=D(k),L=l=>{const{allDemands:c}=l;return n.useEffect(()=>{l.flash.message&&Y.fire({title:e.jsx("p",{children:"Done !"}),icon:"success",text:l.flash.message})},[]),e.jsx(_,{auth:l.auth,children:e.jsx(M,{data:c,user:l.auth.user})})};export{L as default};
