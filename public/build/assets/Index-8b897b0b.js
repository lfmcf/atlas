import{r as x,W as v,j as s,h as _}from"./app-a341eacf.js";import{A as y,S as n}from"./AuthenticatedLayout-33d704c4.js";import{w as C}from"./sweetalert2-react-content.es-ee96281c.js";import{t as f}from"./MenuComponent-411eb7b6.js";import"./MetronicSplashScreen-203eb2b3.js";import"./hoist-non-react-statics.cjs-1d8f9095.js";const k=C(n),P=a=>{const[o,d]=x.useState(!1),[l,b]=x.useState(a.auth.user.avatar),m=()=>{d(!o)},{data:S,setData:u,post:w,processing:E,errors:e,reset:p,clearErrors:g}=v({current_password:"",password:"",password_confirmation:""}),j=r=>{const t=r.target.files[0];if(t){const h=new FormData;h.append("avatar",t),_.post(route("update_avatar"),h,{preserveScroll:!0,onSuccess:c=>{b(c.props.auth.user.avatar)},onError:c=>{n.fire("Error",c.avatar||"An error occurred","error")},forceFormData:!0})}else n.fire("Error","Please select a file.","error")},i=r=>{g(r.target.name),u(r.target.name,r.target.value)},N=r=>{r.preventDefault(),w(route("password_update"),{preserveScroll:!0,onSuccess:()=>{k.fire({icon:"success",title:"Password Updated",text:"Password Updated Successfully"}).then(()=>{p("current_password","password","password_confirmation"),d(!1)})},onError:t=>{t.password&&p("password","password_confirmation")}})};return s.jsxs("div",{children:[s.jsxs("div",{className:"card mb-5 mb-xl-10",children:[s.jsx("div",{className:"card-header cursor-pointer",children:s.jsx("div",{className:"card-title m-0",children:s.jsx("h3",{className:"fw-bold m-0",children:"Profile Details"})})}),s.jsxs("div",{className:"card-body p-9",children:[s.jsxs("div",{className:"row mb-6",children:[s.jsx("label",{className:"col-lg-4 col-form-label fw-semibold fs-6",children:"Avatar"}),s.jsxs("div",{className:"col-lg-8",children:[s.jsxs("div",{className:"image-input image-input-outline","data-kt-image-input":"true",style:{backgroundImage:l?`url(${f(l)})`:"none",backgroundColor:l?"transparent":"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",height:"125px",width:"125px"},children:[l?s.jsx("div",{className:"image-input-wrapper w-125px h-125px",style:{backgroundImage:`url(${f(l)})`}}):s.jsx("div",{className:"initials-placeholder w-125px h-125px",style:{fontSize:"2rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",color:"#555",backgroundColor:"#0D92F4"},children:s.jsx("div",{className:"initials",style:{color:"#fff",width:"100%",textAlign:"center"},children:a.auth.user.name?a.auth.user.name.split(" ").map(r=>r[0]).slice(0,2).join("").toUpperCase():""})}),s.jsxs("label",{className:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip",title:"Change avatar",children:[s.jsxs("i",{className:"ki-duotone ki-pencil fs-7",children:[s.jsx("span",{className:"path1"}),s.jsx("span",{className:"path2"})]}),s.jsx("input",{type:"file",name:"avatar",accept:".png, .jpg, .jpeg",onChange:j}),s.jsx("input",{type:"hidden",name:"avatar_remove"})]}),s.jsx("span",{className:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"cancel","data-bs-toggle":"tooltip",title:"Cancel avatar",children:s.jsxs("i",{className:"ki-duotone ki-cross fs-2",children:[s.jsx("span",{className:"path1"}),s.jsx("span",{className:"path2"})]})})]}),s.jsx("div",{className:"form-text",children:"Allowed file types: png, jpg, jpeg."})]})]}),s.jsxs("div",{className:"row mb-7",children:[s.jsx("label",{className:"col-lg-4 fw-semibold text-muted",children:"Full Name"}),s.jsx("div",{className:"col-lg-8",children:s.jsx("span",{className:"fw-bold fs-6 text-gray-800",children:a.auth.user.name})})]}),s.jsxs("div",{className:"row mb-7",children:[s.jsx("label",{className:"col-lg-4 fw-semibold text-muted",children:"Email"}),s.jsxs("div",{className:"col-lg-8 d-flex align-items-center",children:[s.jsx("span",{className:"fw-bold fs-6 text-gray-800 me-2",children:a.auth.user.email}),s.jsx("span",{className:"badge badge-success",children:"Verified"})]})]}),s.jsxs("div",{className:"row mb-7",children:[s.jsx("label",{className:"col-lg-4 fw-semibold text-muted",children:"Team"}),s.jsx("div",{className:"col-lg-8 d-flex align-items-center",children:s.jsx("span",{className:"fw-bold fs-6 text-gray-800 me-2",children:a.auth.user.current_team_id==1?"Manager":a.auth.user.current_team_id==2?"Operational":"Ekemia"})})]})]})]}),s.jsxs("div",{className:"card mb-5 mb-xl-10",children:[s.jsx("div",{className:"card-header border-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_account_signin_method",children:s.jsx("div",{className:"card-title m-0",children:s.jsx("h3",{className:"fw-bold m-0",children:"Sign-in Method"})})}),s.jsx("div",{id:"kt_account_settings_signin_method",className:"collapse show",children:s.jsx("div",{className:"card-body border-top p-9",children:s.jsxs("div",{className:"d-flex flex-wrap align-items-center mb-10",children:[o?s.jsx("div",{id:"kt_signin_password_edit",className:"flex-row-fluid",children:s.jsxs("form",{id:"kt_signin_change_password",className:"form",onSubmit:N,children:[s.jsxs("div",{className:"row mb-1",children:[s.jsxs("div",{className:"col-lg-4",children:[s.jsxs("div",{className:"fv-row mb-0",children:[s.jsx("label",{htmlFor:"current_password",className:"form-label fs-6 fw-bold mb-3",style:{color:e.current_password?"red":""},children:"Current Password"}),s.jsx("input",{type:"password",className:"form-control form-control-lg form-control-solid",name:"current_password",id:"current_password",onChange:i,style:{borderColor:e.current_password?"red":""}})]}),e.current_password?s.jsx("div",{className:"form-text mb-5",style:{color:"red"},children:e.current_password}):""]}),s.jsxs("div",{className:"col-lg-4",children:[s.jsxs("div",{className:"fv-row mb-0",children:[s.jsx("label",{htmlFor:"password",className:"form-label fs-6 fw-bold mb-3",style:{color:e.password?"red":""},children:"New Password"}),s.jsx("input",{type:"password",className:"form-control form-control-lg form-control-solid",name:"password",id:"password",onChange:i,style:{borderColor:e.password?"red":""}})]}),e.password?s.jsx("div",{className:"form-text mb-5",style:{color:"red"},children:e.password}):""]}),s.jsxs("div",{className:"col-lg-4",children:[s.jsxs("div",{className:"fv-row mb-0",children:[s.jsx("label",{htmlFor:"confirmpassword",className:"form-label fs-6 fw-bold mb-3",style:{color:e.password_confirmation?"red":""},children:"Confirm New Password"}),s.jsx("input",{type:"password",className:"form-control form-control-lg form-control-solid",name:"password_confirmation",id:"confirmpassword",onChange:i,style:{borderColor:e.password_confirmation?"red":""}})]}),e.password_confirmation?s.jsx("div",{className:"form-text mb-5",style:{color:"red"},children:e.password_confirmation}):""]})]}),s.jsxs("div",{className:"d-fle mt-5",children:[s.jsx("button",{id:"kt_password_submit",type:"submit",className:"btn btn-primary me-2 px-6",children:"Update Password"}),s.jsx("button",{id:"kt_password_cancel",type:"button",className:"btn btn-color-gray-400 btn-active-light-primary px-6",onClick:m,children:"Cancel"})]})]})}):s.jsxs("div",{id:"kt_signin_password",children:[s.jsx("div",{className:"fs-6 fw-bold mb-1",children:"Password"}),s.jsx("div",{className:"fw-semibold text-gray-600",children:"************"})]}),o?"":s.jsx("div",{id:"kt_signin_password_button",className:"ms-auto",children:s.jsx("button",{className:"btn btn-light btn-active-light-primary",onClick:m,children:"Reset Password"})})]})})})]})]})};P.layout=a=>s.jsx(y,{children:a,auth:a.props.auth});export{P as default};
